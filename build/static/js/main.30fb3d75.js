/*! For license information please see main.30fb3d75.js.LICENSE.txt */
(()=>{"use strict";var e={730(e,t,n){var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case N:return"Profiler";case T:return"StrictMode";case C:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch($t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Te=null;function Ne(e){if(e=xa(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=ka(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Te?Te.push(e):Te=[e]:Se=e}function _e(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ie(e,t,n)}finally{je=!1,(null!==Se||null!==Te)&&(Ce(),_e())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Oe(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){Me=!0,Le=e}};function Be(e,t,n,r,a,s,i,o,l){Me=!1,Le=null,Oe.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(s(188))}function Ke(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return qe(a),e;if(i===r)return qe(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Je=a.unstable_requestPaint,Xe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=dt(o):0!==(s&=i)&&(r=dt(s))}else 0!==(i=n&~a)?r=dt(i):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Tt,Nt,Et=!1,_t=[],It=null,Ct=null,jt=null,At=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ba(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Nt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==It&&Ft(It)&&(It=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(zt),Dt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<_t.length){Bt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Ct&&Bt(Ct,e),null!==jt&&Bt(jt,e),At.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var Ht=x.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,r){var a=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,Ht.transition=s}}function Wt(e,t,n,r){var a=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,Ht.transition=s}}function Gt(e,t,n,r){if(qt){var a=Yt(e,t,n,r);if(null===a)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Mt(It,e,t,n,r,a),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,a),!0;case"mouseover":return jt=Mt(jt,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var s=xa(a);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=ba(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return en=a.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function sn(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rn:an,this.isPropagationStopped=an,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(un),hn=L({},un,{view:0,detail:0}),fn=sn(hn),mn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=sn(mn),gn=sn(L({},mn,{dataTransfer:0})),vn=sn(L({},hn,{relatedTarget:0})),yn=sn(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),wn=sn(L({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function En(){return Nn}var _n=L({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(_n),Cn=sn(L({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=sn(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=L({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Dn),Rn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!On||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Yn(e){zr(e,0)}function Jn(e){if(G(wa(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Zn;if(u){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Gn&&(Gn.detachEvent("onpropertychange",rr),Qn=Gn=null)}function rr(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];Wn(t,Qn,e,we(e)),Ae(Yn,t)}}function ar(e,t,n){"focusin"===e?(nr(),Qn=n,(Gn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!lr(e[a],t[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&mr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=dr(n,s);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,yr=null,br=null,xr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Gr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Tr={},Nr={};function Er(e){if(Tr[e])return Tr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Tr[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var _r=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),jr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(_r,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(jr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Le;Me=!1,Le=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Fr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Fr(a,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function Ur(e,t){var n=t[ga];void 0===n&&(n=t[ga]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Vr]){e[Vr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var a=Kt;break;case 4:a=Wt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ba(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=s,a=we(n),i=[];e:{var o=Ar.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case _r:case Ir:case Cr:l=yn;break;case jr:l=An;break;case"scroll":l=fn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=De(m,h))&&u.push(Wr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:wa(l),f=null==c?o:wa(c),(o=new u(p,m+"leave",l,n,a)).target=d,o.relatedTarget=f,p=null,ba(a)===r&&((u=new u(h,m+"enter",c,n,a)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Qr(f))m++;for(f=0,p=h;p;p=Qr(p))f++;for(;0<m-f;)u=Qr(u),m--;for(;0<f-m;)h=Qr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Qr(u),h=Qr(h)}u=null}else u=null;null!==l&&Yr(i,o,l,u,!1),null!==c&&null!==d&&Yr(i,d,c,u,!0)}if("select"===(l=(o=r?wa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Kn(o))if($n)g=or;else{g=sr;var v=ar}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Wn(i,g,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wa(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(vr=v,yr=r,br=null);break;case"focusout":br=yr=vr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,wr(i,n,a);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=tn()):(Zt="value"in(Xt=a)?Xt.value:Xt.textContent,Hn=!0)),0<(v=Gr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!On&&Bn(e,t)?(e=tn(),en=Zt=Xt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}zr(i,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=De(e,n))&&r.unshift(Wr(e,s,a)),null!=(s=De(e,t))&&r.push(Wr(e,s,a))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=De(n,s))&&i.unshift(Wr(n,l,o)):a||null!=(l=De(n,s))&&i.push(Wr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function ea(){}var ta=null,na=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var aa="function"===typeof setTimeout?setTimeout:void 0,sa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(la)}:aa;function la(e){setTimeout(function(){throw e})}function ca(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),fa="__reactFiber$"+ha,ma="__reactProps$"+ha,pa="__reactContainer$"+ha,ga="__reactEvents$"+ha,va="__reactListeners$"+ha,ya="__reactHandles$"+ha;function ba(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[fa])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ka(e){return e[ma]||null}var Sa=[],Ta=-1;function Na(e){return{current:e}}function Ea(e){0>Ta||(e.current=Sa[Ta],Sa[Ta]=null,Ta--)}function _a(e,t){Ta++,Sa[Ta]=e.current,e.current=t}var Ia={},Ca=Na(Ia),ja=Na(!1),Aa=Ia;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ra(){Ea(ja),Ea(Ca)}function Oa(e,t,n){if(Ca.current!==Ia)throw Error(s(168));_a(Ca,t),_a(ja,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,H(e)||"Unknown",a));return L({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Aa=Ca.current,_a(Ca,e),_a(ja,ja.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ma(e,t,Aa),r.__reactInternalMemoizedMergedChildContext=e,Ea(ja),Ea(Ca),_a(Ca,e)):Ea(ja),_a(ja,n)}var za=null,Ua=!1,Ba=!1;function Va(e){null===za?za=[e]:za.push(e)}function Ha(){if(!Ba&&null!==za){Ba=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ua=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ge(Ze,Ha),a}finally{bt=t,Ba=!1}}return null}var qa=[],Ka=0,Wa=null,Ga=0,Qa=[],Ya=0,Ja=null,Xa=1,$a="";function Za(e,t){qa[Ka++]=Ga,qa[Ka++]=Wa,Wa=e,Ga=t}function es(e,t,n){Qa[Ya++]=Xa,Qa[Ya++]=$a,Qa[Ya++]=Ja,Ja=e;var r=Xa;e=$a;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xa=1<<32-it(t)+a|n<<a|r,$a=s+e}else Xa=1<<s|n<<a|r,$a=e}function ts(e){null!==e.return&&(Za(e,1),es(e,1,0))}function ns(e){for(;e===Wa;)Wa=qa[--Ka],qa[Ka]=null,Ga=qa[--Ka],qa[Ka]=null;for(;e===Ja;)Ja=Qa[--Ya],Qa[Ya]=null,$a=Qa[--Ya],Qa[Ya]=null,Xa=Qa[--Ya],Qa[Ya]=null}var rs=null,as=null,ss=!1,is=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,as=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ja?{id:Xa,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,as=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=as;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ua(n.nextSibling);var r=rs;t&&ls(e,t)?os(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=as)){if(cs(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ua(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=rs?ua(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=as;e;)e=ua(e.nextSibling)}function ms(){as=rs=null,ss=!1}function ps(e){null===is?is=[e]:is.push(e)}var gs=x.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&bs(s)===t.type)?((r=a(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case D:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||O(n))return null!==a?null:d(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case D:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,a,null);ys(t,r)}return null}function p(a,s,o,l){for(var c=null,u=null,d=s,p=s=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(a,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),s=i(v,s,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return n(a,d),ss&&Za(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(s=i(d,s,p),null===u?c=d:u.sibling=d,u=d);return ss&&Za(a,p),c}for(d=r(a,d);p<o.length;p++)null!==(g=m(d,a,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),s=i(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ss&&Za(a,p),c}function g(a,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=f(a,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(a,p),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(a,p),ss&&Za(a,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return ss&&Za(a,g),u}for(p=r(a,p);!y.done;g++,y=l.next())null!==(y=m(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(a,e)}),ss&&Za(a,g),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===S){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bs(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=vs(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===S?((s=Oc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Rc(i.type,i.key,i.props,null,r.mode,l)).ref=vs(r,s,i),l.return=r,r=l)}return o(r);case k:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(i,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return p(r,s,i,l);if(O(i))return g(r,s,i,l);ys(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Lc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=xs(!0),ks=xs(!1),Ss=Na(null),Ts=null,Ns=null,Es=null;function _s(){Es=Ns=Ts=null}function Is(e){var t=Ss.current;Ea(Ss),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t){Ts=e,Es=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===Ts)throw Error(s(308));Ns=e,Ts.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ds=null;function Ps(e){null===Ds?Ds=[e]:Ds.push(e)}function Rs(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ps(t)):(n.next=a.next,a.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Os(e,n)}return null===(a=r.interleaved)?(t.next=t,Ps(r)):(t.next=a.next,a.next=t),r.interleaved=t,Os(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var a=e.updateQueue;Ms=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=L({},d,h);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ml|=i,e.lanes=i,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Ks={},Ws=Na(Ks),Gs=Na(Ks),Qs=Na(Ks);function Ys(e){if(e===Ks)throw Error(s(174));return e}function Js(e,t){switch(_a(Qs,t),_a(Gs,e),_a(Ws,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ea(Ws),_a(Ws,t)}function Xs(){Ea(Ws),Ea(Gs),Ea(Qs)}function $s(e){Ys(Qs.current);var t=Ys(Ws.current),n=le(t,e.type);t!==n&&(_a(Gs,e),_a(Ws,n))}function Zs(e){Gs.current===e&&(Ea(Ws),Ea(Gs))}var ei=Na(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=x.ReactCurrentDispatcher,si=x.ReactCurrentBatchConfig,ii=0,oi=null,li=null,ci=null,ui=!1,di=!1,hi=0,fi=0;function mi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,a,i){if(ii=i,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:eo,e=n(r,a),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(s(301));i+=1,ci=li=null,t.updateQueue=null,ai.current=to,e=n(r,a)}while(di)}if(ai.current=$i,t=null!==li&&null!==li.next,ii=0,ci=li=oi=null,ui=!1,t)throw Error(s(300));return e}function vi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?oi.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=oi.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?oi.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(s(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?oi.memoizedState=ci=e:ci=ci.next=e}return ci}function xi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,oi.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,lr(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,oi.lanes|=i,Ml|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);lr(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Si(){}function Ti(e,t){var n=oi,r=bi(),a=t(),i=!lr(r.memoizedState,a);if(i&&(r.memoizedState=a,xo=!0),r=r.queue,Mi(_i.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Ai(9,Ei.bind(null,n,r,a,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&ii)||Ni(n,t,a)}return a}function Ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ei(e,t,n,r){t.value=n,t.getSnapshot=r,Ii(t)&&Ci(e)}function _i(e,t,n){return n(function(){Ii(t)&&Ci(e)})}function Ii(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ci(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function ji(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=Qi.bind(null,oi,e),[t.memoizedState,e]}function Ai(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oi.updateQueue)?(t={lastEffect:null,stores:null},oi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Di(){return bi().memoizedState}function Pi(e,t,n,r){var a=yi();oi.flags|=e,a.memoizedState=Ai(1|t,n,void 0,void 0===r?null:r)}function Ri(e,t,n,r){var a=bi();r=void 0===r?null:r;var s=void 0;if(null!==li){var i=li.memoizedState;if(s=i.destroy,null!==r&&pi(r,i.deps))return void(a.memoizedState=Ai(t,n,s,r))}oi.flags|=e,a.memoizedState=Ai(1|t,n,s,r)}function Oi(e,t){return Pi(8390656,8,e,t)}function Mi(e,t){return Ri(2048,8,e,t)}function Li(e,t){return Ri(4,2,e,t)}function Fi(e,t){return Ri(4,4,e,t)}function zi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4,4,zi.bind(null,t,e),n)}function Bi(){}function Vi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(lr(n,t)||(n=pt(),oi.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ki(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{bt=n,si.transition=r}}function Wi(){return bi().memoizedState}function Gi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,n);else if(null!==(n=Rs(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function Qi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,lr(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ps(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Rs(e,t,a,r))&&(nc(n,e,r,a=ec()),Xi(n,t,r))}}function Yi(e){var t=e.alternate;return e===oi||null!==t&&t===oi}function Ji(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $i={readContext:As,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Zi={readContext:As,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4194308,4,zi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,oi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:ji,useDebugValue:Bi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=ji(!1),t=e[0];return e=Ki.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oi,a=yi();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!==(30&ii)||Ni(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Oi(_i.bind(null,r,i,e),[e]),r.flags|=2048,Ai(9,Ei.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Cl.identifierPrefix;if(ss){var n=$a;t=":"+t+"R"+(n=(Xa&~(1<<32-it(Xa)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:As,useCallback:Vi,useContext:As,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:Hi,useReducer:wi,useRef:Di,useState:function(){return wi(xi)},useDebugValue:Bi,useDeferredValue:function(e){return qi(bi(),li.memoizedState,e)},useTransition:function(){return[wi(xi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ti,useId:Wi,unstable_isNewReconciler:!1},to={readContext:As,useCallback:Vi,useContext:As,useEffect:Mi,useImperativeHandle:Ui,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:Hi,useReducer:ki,useRef:Di,useState:function(){return ki(xi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:qi(t,li.memoizedState,e)},useTransition:function(){return[ki(xi)[0],bi().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ti,useId:Wi,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=zs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Bs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=zs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Bs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=zs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Us(e,a,r))&&(nc(t,e,r,n),Bs(t,e,r))}};function so(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(a,s))}function io(e,t,n){var r=!1,a=Ia,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(a=Pa(t)?Aa:Ca.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ia),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=As(s):(s=Pa(t)?Aa:Ca.current,a.context=Da(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ao.enqueueReplaceState(a,a.state,null),Hs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Kl=r),ho(0,t)},n}function po(e,t,n){(n=zs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=x.ReactCurrentOwner,xo=!1;function wo(e,t,n,r){t.child=null===e?ks(t,null,n,r):ws(t,e.child,n,r)}function ko(e,t,n,r,a){n=n.render;var s=t.ref;return js(t,a),r=gi(e,t,n,r,s,a),n=vi(),null===e||xo?(ss&&n&&ts(t),t.flags|=1,wo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function So(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,To(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)return qo(e,t,a)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function To(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,qo(e,t,a);0!==(131072&e.flags)&&(xo=!0)}}return _o(e,t,n,r,a)}function No(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_a(Pl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_a(Pl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,_a(Pl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,_a(Pl,Dl),Dl|=r;return wo(e,t,a,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _o(e,t,n,r,a){var s=Pa(n)?Aa:Ca.current;return s=Da(t,s),js(t,a),n=gi(e,t,n,r,s,a),r=vi(),null===e||xo?(ss&&r&&ts(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qo(e,t,a))}function Io(e,t,n,r,a){if(Pa(n)){var s=!0;La(t)}else s=!1;if(js(t,a),null===t.stateNode)Ho(e,t),io(t,n,r),lo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Da(t,c=Pa(n)?Aa:Ca.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,i,r,c),Ms=!1;var h=t.memoizedState;i.state=h,Hs(t,r,i,a),l=t.memoizedState,o!==r||h!==l||ja.current||Ms?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ms||so(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Da(t,l=Pa(n)?Aa:Ca.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,i,r,l),Ms=!1,h=t.memoizedState,i.state=h,Hs(t,r,i,a);var m=t.memoizedState;o!==d||h!==m||ja.current||Ms?("function"===typeof f&&(ro(t,n,f,r),m=t.memoizedState),(c=Ms||so(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,a)}function Co(e,t,n,r,a,s){Eo(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Fa(t,n,!1),qo(e,t,s);r=t.stateNode,bo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Oa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oa(0,t.context,!1),Js(e,t.containerInfo)}function Ao(e,t,n,r,a){return ms(),ps(a),t.flags|=256,wo(e,t,n,r),t.child}var Do,Po,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,a=t.pendingProps,i=ei.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_a(ei,1&i),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,a,0,null),e=Oc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Mc({mode:"visible",children:r.children},a,0,null),(i=Oc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Oo,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=uo(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Cl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Os(e,a),nc(r,e,a,-1))}return pc(),zo(e,t,o,r=uo(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,as=ua(a.nextSibling),rs=t,ss=!0,is=null,null!==e&&(Qa[Ya++]=Xa,Qa[Ya++]=$a,Qa[Ya++]=Ja,Xa=e.id,$a=e.overflow,Ja=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Pc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,a}return e=(o=e.child).sibling,a=Pc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Bo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Vo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_a(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Bo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Pa(t.type)&&Ra(),Wo(t),null;case 3:return r=t.stateNode,Xs(),Ea(ja),Ea(Ca),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==is&&(ic(is),is=null))),Wo(t),null;case 5:Zs(t);var a=Ys(Qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Ys(Ws.current),hs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[ma]=i,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,i),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ur("invalid",r);break;case"textarea":ae(r,i),Ur("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,i,!0);break;case"textarea":W(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=ea)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fa]=t,e[ma]=r,Do(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":J(e,r),a=Y(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Ur("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=ea)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Ro(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Qs.current),Ys(Ws.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ea(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ms(),t.flags|=98560,i=!1;else if(i=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[fa]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),i=!1}else null!==is&&(ic(is),is=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Rl&&(Rl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Xs(),null===e&&Hr(t.stateNode.containerInfo),Wo(t),null;case 10:return Is(t.type._context),Wo(t),null;case 19:if(Ea(ei),null===(i=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ko(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Ko(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _a(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ss)return Wo(t),null}else 2*Xe()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=ei.current,_a(ei,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ns(t),t.tag){case 1:return Pa(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ea(ja),Ea(Ca),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ea(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ea(ei),null;case 4:return Xs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ys(Ws.current);var s,i=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=ea)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Jo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ma],delete t[ga],delete t[va],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ea));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ca(e.parentNode,n):1===e.nodeType&&ca(e,n),Vt(e)):ca(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Tc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Tc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:pl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":$(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(a,!!i.multiple,m,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){Tc(e,e.return,g)}}break;case 6:if(pl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Tc(e,e.return,g)}}break;case 3:if(pl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,pl(t,e),Jo=u):pl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(h=$o=d;null!==$o;){switch(m=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,$o=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Tc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Tc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$o=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var a=$o,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Yo;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Yo;var c=Jo;if(Yo=i,(Jo=l)&&!c)for($o=a;null!==$o;)l=(i=$o).child,22===i.tag&&null!==i.memoizedState?kl(a):null!==l?(l.return=i,$o=l):kl(a);for(;null!==s;)$o=s,bl(s,t,n),s=s.sibling;$o=a,Yo=o,Jo=c}xl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,$o=s):xl(e)}}function xl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&al(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function kl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Tc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Tc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Tc(t,i,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var Sl,Tl=Math.ceil,Nl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Il=0,Cl=null,jl=null,Al=0,Dl=0,Pl=Na(0),Rl=0,Ol=null,Ml=0,Ll=0,Fl=0,zl=null,Ul=null,Bl=0,Vl=1/0,Hl=null,ql=!1,Kl=null,Wl=null,Gl=!1,Ql=null,Yl=0,Jl=0,Xl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==$l?$l:$l=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==gs.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Cl||(e===Cl&&(0===(2&Il)&&(Ll|=n),4===Rl&&oc(e,Al)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Vl=Xe()+500,Ua&&Ha()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Cl?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ua=!0,Va(e)}(lc.bind(null,e)):Va(lc.bind(null,e)),oa(function(){0===(6&Il)&&Ha()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($l=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Il;Il|=2;var i=mc();for(Cl===e&&Al===t||(Hl=null,Vl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}_s(),Nl.current=i,Il=a,null!==jl?t=0:(Cl=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!lr(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Hl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=aa(wc.bind(null,e,Ul,Hl),t);break}wc(e,Ul,Hl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=aa(wc.bind(null,e,Ul,Hl),r);break}wc(e,Ul,Hl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Hl),rc(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Vl=Xe()+500,Ua&&Ha())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,0===(6&(Il=t))&&Ha()}}function dc(){Dl=Pl.current,Ea(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,sa(n)),null!==jl)for(n=jl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ra();break;case 3:Xs(),Ea(ja),Ea(Ca),ri();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Ea(ei);break;case 10:Is(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,jl=e=Pc(e.current,null),Al=Dl=t,Rl=0,Ol=null,Fl=Ll=Ml=0,Ul=zl=null,null!==Ds){for(t=0;t<Ds.length;t++)if(null!==(r=(n=Ds[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Ds=null}return e}function fc(e,t){for(;;){var n=jl;try{if(_s(),ai.current=$i,ui){for(var r=oi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=oi=null,di=!1,hi=0,El.current=null,null===n||null===n.return){Rl=1,Ol=t,jl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=vo(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&go(i,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){go(i,u,t),pc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var v=vo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),yo(v,o,l,0,t),ps(co(c,l));break e}}i=c=co(c,l),4!==Rl&&(Rl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Vs(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Vs(i,po(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function mc(){var e=Nl.current;return Nl.current=$i,null===e?$i:e}function pc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Ml)&&0===(268435455&Ll)||oc(Cl,Al)}function gc(e,t){var n=Il;Il|=2;var r=mc();for(Cl===e&&Al===t||(Hl=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(_s(),Il=n,Nl.current=r,null!==jl)throw Error(s(261));return Cl=null,Al=0,Rl}function vc(){for(;null!==jl;)bc(jl)}function yc(){for(;null!==jl&&!Ye();)bc(jl)}function bc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?xc(e):jl=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Dl)))return void(jl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return Rl=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=bt,a=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Cl&&(jl=Cl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Cc(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=_l.transition,_l.transition=null;var o=bt;bt=1;var l=Il;Il|=4,El.current=null,function(e,t){if(ta=qt,mr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(na={focusedElem:e,selectionRange:n},qt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}p=tl,tl=!1}(e,n),gl(n,e),pr(na),qt=!!ta,na=ta=null,e.current=n,yl(n,e,a),Je(),Il=l,bt=o,_l.transition=i}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=a),i=e.pendingLanes,0===i&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Ha()}(e,t,n,r)}finally{_l.transition=a,bt=r}return null}function kc(){if(null!==Ql){var e=xt(Yl),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Il))throw Error(s(331));var a=Il;for(Il|=4,$o=e.current;null!==$o;){var i=$o,o=i.child;if(0!==(16&$o.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,$o=h;else for(;null!==$o;){var f=(d=$o).sibling,m=d.return;if(sl(d),d===u){$o=null;break}if(null!==f){f.return=m,$o=f;break}$o=m}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,$o=o;else e:for(;null!==$o;){if(0!==(2048&(i=$o).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,$o=y;break e}$o=i.return}}var b=e.current;for($o=b;null!==$o;){var x=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,$o=x;else e:for(o=b;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Tc(l,l.return,k)}if(l===o){$o=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$o=w;break e}$o=l.return}}if(Il=a,Ha(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=mo(0,t=co(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=po(t,e=co(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Xe()-Bl?hc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(vt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return Ge(e,t)}function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new jc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Oc(n.children,a,i,t);case T:o=8,a|=8;break;case N:return(e=Ac(12,n,t,2|a)).elementType=N,e.lanes=i,e;case C:return(e=Ac(13,n,t,a)).elementType=C,e.lanes=i,e;case j:return(e=Ac(19,n,t,a)).elementType=j,e.lanes=i,e;case P:return Mc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case _:o=9;break e;case I:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,a,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Bc(e){if(!e)return Ia;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Ma(e,n,t)}return t}function Vc(e,t,n,r,a,s,i,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=zs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Hc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(a,t,i))&&(nc(e,a,i,s),Bs(e,a,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ja.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),ms();break;case 5:$s(t);break;case 1:Pa(t.type)&&La(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;_a(Ss,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_a(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(_a(ei,1&ei.current),null!==(e=qo(e,t,n))?e.sibling:null);_a(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),_a(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ss&&0!==(1048576&t.flags)&&es(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var a=Da(t,Ca.current);js(t,n),a=gi(null,t,r,e,a,n);var i=vi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=ao,t.stateNode=a,a._reactInternals=t,lo(t,r,e,n),t=Co(null,t,r,!0,i,n)):(t.tag=0,ss&&i&&ts(t),wo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=no(r,e),a){case 0:t=_o(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=So(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,_o(e,t,r,a=t.elementType===r?a:no(r,a),n);case 1:return r=t.type,a=t.pendingProps,Io(e,t,r,a=t.elementType===r?a:no(r,a),n);case 3:e:{if(jo(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Fs(e,t),Hs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,r,n,a=co(Error(s(423)),t));break e}if(r!==a){t=Ao(e,t,r,n,a=co(Error(s(424)),t));break e}for(as=ua(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,is=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===a){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&us(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(r,a)?o=null:null!==i&&ra(r,i)&&(t.flags|=32),Eo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&us(t),null;case 13:return Lo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ko(e,t,r,a=t.elementType===r?a:no(r,a),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,_a(Ss,r._currentValue),r._currentValue=o,null!==i)if(lr(i.value,o)){if(i.children===a.children&&!ja.current){t=qo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=zs(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Cs(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}wo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,js(t,n),r=r(a=As(a)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return a=no(r=t.type,t.pendingProps),So(e,t,r,a=no(r.type,a),n);case 15:return To(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:no(r,a),Ho(e,t),t.tag=1,Pa(r)?(e=!0,La(t)):e=!1,js(t,n),io(t,r,a),lo(t,r,a,n),Co(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return No(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=qc(i);o.call(e)}}Hc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=qc(i);s.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=i,e[pa]=i.current,Hr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pa]=l.current,Hr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,a,r);return qc(i)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Il)&&(Vl=Xe()+500,Ha()))}break;case 13:uc(function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},kt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Tt=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(s(90));G(r),$(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ce=uc;var eu={usingClientEntryPoint:!1,Events:[xa,wa,ka,Ee,_e,cc]},tu={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,i,o),e[pa]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153(e,t,n){var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!T.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+I(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(E(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(o=e[c],c);l+=C(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,a,u=s+I(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",function(e){return t.call(n,e,a++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!T.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43(e,t,n){e.exports=n(202)},579(e,t,n){e.exports=n(153)},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,P(k);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function k(e,n){p=!1,g&&(g=!1,y(E),E=-1),m=!0;var s=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,N=null,E=-1,_=5,I=-1;function C(){return!(t.unstable_now()-I<_)}function j(){if(null!==N){var e=t.unstable_now();I=e;var n=!0;try{n=N(!0,e)}finally{n?S():(T=!1,N=null)}}else T=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=j,S=function(){D.postMessage(null)}}else S=function(){v(j,0)};function P(e){N=e,T||(T=!0,S())}function R(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,R(w,s-i))):(e.sortIndex=o,n(c,e),p||m||(p=!0,P(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){e.exports=n(234)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),a=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],h=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:h="",children:f}=n,m=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,d);return(0,r.createElement)("svg",c(c({ref:a},u),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat((p=e,p.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),h].join(" ")},m),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(f)?f:[f]]);var p});return n.displayName="".concat(e),n},f=h("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),m=h("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),p=h("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),g=h("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),v=h("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),y=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),b=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=h("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),w=h("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),k=h("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),S=h("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),T=h("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),N=h("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),E=h("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_=h("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),I=h("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),C=h("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),j=h("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),A=h("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),D=h("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),P=h("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),R=h("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),O=h("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),M=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},L={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const t=e[a],s=a+1<e.length,i=s?e[a+1]:0,o=a+2<e.length,l=o?e[a+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(M(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const t=n[e.charAt(a++)],s=a<e.length?n[e.charAt(a)]:0;++a;const i=a<e.length?n[e.charAt(a)]:64;++a;const o=a<e.length?n[e.charAt(a)]:64;if(++a,null==t||null==s||null==i||null==o)throw new F;const l=t<<2|s>>4;if(r.push(l),64!==i){const e=s<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class F extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z=function(e){return function(e){const t=M(e);return L.encodeByteArray(t,!0)}(e).replace(/\./g,"")},U=function(e){try{return L.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const B=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,V=()=>{try{return B()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyD4zEy3kb0I6kGiCRAWG2JX_0KtIZy9aNk",REACT_APP_FIREBASE_APP_ID:"1:840070881737:web:8b6b629964fa8fdd13c818",REACT_APP_FIREBASE_AUTH_DOMAIN:"absensi-f26de.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-XB6F06RTJJ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"840070881737",REACT_APP_FIREBASE_PROJECT_ID:"absensi-f26de",REACT_APP_FIREBASE_STORAGE_BUCKET:"absensi-f26de.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&U(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},H=e=>{var t,n;return null===(n=null===(t=V())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},q=()=>{var e;return null===(e=V())||void 0===e?void 0:e.config},K=e=>{var t;return null===(t=V())||void 0===t?void 0:t["_".concat(e)]};class W{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function G(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Q(){return!function(){var e;const t=null===(e=V())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"===typeof indexedDB}catch(e){return!1}}class J extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,J.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X.prototype.create)}}class X{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace($,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new J(n,s,t)}}const $=/\{\$([^}]+)}/g;function Z(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],s=t[a];if(ee(n)&&ee(s)){if(!Z(n,s))return!1}else if(n!==s)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function ee(e){return null!==e&&"object"===typeof e}function te(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ne(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function re(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=se),void 0===r.error&&(r.error=se),void 0===r.complete&&(r.complete=se);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function se(){}function ie(e){return e&&e._delegate?e._delegate:e}class oe{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const le="[DEFAULT]";class ce{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new W;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(a)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(a=t,a===le?void 0:a),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var a;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ce(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const de=[];var he;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(he||(he={}));const fe={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},me=he.INFO,pe={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ge=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ve{constructor(e){this.name=e,this._logLevel=me,this._logHandler=ge,this._userLogHandler=null,de.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?fe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...t),this._logHandler(this,he.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...t),this._logHandler(this,he.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,he.INFO,...t),this._logHandler(this,he.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,he.WARN,...t),this._logHandler(this,he.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,he.ERROR,...t),this._logHandler(this,he.ERROR,...t)}}let ye,be;const xe=new WeakMap,we=new WeakMap,ke=new WeakMap,Se=new WeakMap,Te=new WeakMap;let Ne={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return we.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ke.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ee(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ce(this),n),Ie(xe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(e.apply(Ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const s=e.call(Ce(this),t,...r);return ke.set(s,t.sort?t.sort():[t]),Ie(s)}}function _e(e){return"function"===typeof e?Ee(e):(e instanceof IDBTransaction&&function(e){if(we.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)});we.set(e,t)}(e),t=e,(ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ne):e);var t}function Ie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(Ie(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&xe.set(t,e)}).catch(()=>{}),Te.set(t,e),t}(e);if(Se.has(e))return Se.get(e);const t=_e(e);return t!==e&&(Se.set(e,t),Te.set(t,e)),t}const Ce=e=>Te.get(e);const je=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],De=new Map;function Pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(De.get(t))return De.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=Ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!je.includes(n))return;const s=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let s=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),a&&t.done]))[0]};return De.set(t,s),s}Ne=(e=>c(c({},e),{},{get:(t,n,r)=>Pe(t,n)||e.get(t,n,r),has:(t,n)=>!!Pe(t,n)||e.has(t,n)}))(Ne);class Re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Oe="@firebase/app",Me="0.10.13",Le=new ve("@firebase/app"),Fe="@firebase/app-compat",ze="@firebase/analytics-compat",Ue="@firebase/analytics",Be="@firebase/app-check-compat",Ve="@firebase/app-check",He="@firebase/auth",qe="@firebase/auth-compat",Ke="@firebase/database",We="@firebase/data-connect",Ge="@firebase/database-compat",Qe="@firebase/functions",Ye="@firebase/functions-compat",Je="@firebase/installations",Xe="@firebase/installations-compat",$e="@firebase/messaging",Ze="@firebase/messaging-compat",et="@firebase/performance",tt="@firebase/performance-compat",nt="@firebase/remote-config",rt="@firebase/remote-config-compat",at="@firebase/storage",st="@firebase/storage-compat",it="@firebase/firestore",ot="@firebase/vertexai-preview",lt="@firebase/firestore-compat",ct="firebase",ut="[DEFAULT]",dt={[Oe]:"fire-core",[Fe]:"fire-core-compat",[Ue]:"fire-analytics",[ze]:"fire-analytics-compat",[Ve]:"fire-app-check",[Be]:"fire-app-check-compat",[He]:"fire-auth",[qe]:"fire-auth-compat",[Ke]:"fire-rtdb",[We]:"fire-data-connect",[Ge]:"fire-rtdb-compat",[Qe]:"fire-fn",[Ye]:"fire-fn-compat",[Je]:"fire-iid",[Xe]:"fire-iid-compat",[$e]:"fire-fcm",[Ze]:"fire-fcm-compat",[et]:"fire-perf",[tt]:"fire-perf-compat",[nt]:"fire-rc",[rt]:"fire-rc-compat",[at]:"fire-gcs",[st]:"fire-gcs-compat",[it]:"fire-fst",[lt]:"fire-fst-compat",[ot]:"fire-vertex","fire-js":"fire-js",[ct]:"fire-js-all"},ht=new Map,ft=new Map,mt=new Map;function pt(e,t){try{e.container.addComponent(t)}catch(n){Le.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function gt(e){const t=e.name;if(mt.has(t))return Le.debug("There were multiple attempts to register component ".concat(t,".")),!1;mt.set(t,e);for(const n of ht.values())pt(n,e);for(const n of ft.values())pt(n,e);return!0}function vt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yt(e){return void 0!==e.settings}const bt=new X("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bt.create("app-deleted",{appName:this._name})}}const wt="10.14.1";function kt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ut,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw bt.create("bad-app-name",{appName:String(a)});if(n||(n=q()),!n)throw bt.create("no-options");const s=ht.get(a);if(s){if(Z(n,s.options)&&Z(r,s.config))return s;throw bt.create("duplicate-app",{appName:a})}const i=new ue(a);for(const l of mt.values())i.addComponent(l);const o=new xt(n,r,i);return ht.set(a,o),o}function St(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;const t=ht.get(e);if(!t&&e===ut&&q())return kt();if(!t)throw bt.create("no-app",{appName:e});return t}function Tt(e,t,n){var r;let a=null!==(r=dt[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));const s=a.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const e=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),s&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Le.warn(e.join(" "))}gt(new oe("".concat(a,"-version"),()=>({library:a,version:t}),"VERSION"))}const Nt="firebase-heartbeat-store";let Et=null;function _t(){return Et||(Et=function(e,t){let{blocked:n,upgrade:r,blocking:a,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=Ie(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Ie(i.result),e.oldVersion,e.newVersion,Ie(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Nt)}catch(n){console.warn(n)}}}).catch(e=>{throw bt.create("idb-open",{originalErrorMessage:e.message})})),Et}async function It(e,t){try{const n=(await _t()).transaction(Nt,"readwrite"),r=n.objectStore(Nt);await r.put(t,Ct(e)),await n.done}catch(n){if(n instanceof J)Le.warn(n.message);else{const e=bt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Le.warn(e.message)}}}function Ct(e){return"".concat(e.name,"!").concat(e.options.appId)}class jt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=At();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){Le.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=At(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const a of e){const e=n.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),Pt(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),a=z(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Le.warn(t),""}}}function At(){return(new Date).toISOString().substring(0,10)}class Dt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Y()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await _t()).transaction(Nt),n=await t.objectStore(Nt).get(Ct(e));return await t.done,n}catch(t){if(t instanceof J)Le.warn(t.message);else{const e=bt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Le.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return It(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return It(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Pt(e){return z(JSON.stringify({version:2,heartbeats:e})).length}var Rt;Rt="",gt(new oe("platform-logger",e=>new Re(e),"PRIVATE")),gt(new oe("heartbeat",e=>new jt(e),"PRIVATE")),Tt(Oe,Me,Rt),Tt(Oe,Me,"esm2017"),Tt("fire-js","");Tt("firebase","10.14.1","app");var Ot,Mt,Lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ft={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var a=0;16>a;++a)r[a]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(a=0;16>a;++a)r[a]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],a=e.g[2];var s=e.g[3],i=t+(s^n&(a^s))+r[0]+3614090360&4294967295;i=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=n+(i<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^n&(a^s))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=s+(a^t&(n^a))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=a+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^a&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^s&(n^a))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(a^s&(n^a))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=s+(n^a&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=a+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(s^t&(a^s))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^a^s)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^a^s)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=s+(t^n^a)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=a+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(a^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(a^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(a^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(a^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=a+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(s^(a|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((s=(t=n+((i=t+(a^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=s+(n^(t|~a))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((a=s+((i=a+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(a+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+a&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,a=e.length-1;0<=a;a--){var s=0|e[a];r&&s==t||(n[a]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,a=this.B,s=this.h,i=0;i<t;){if(0==s)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(a[s++]=e.charCodeAt(i++),s==this.blockSize){n(this,a),s=0;break}}else for(;i<t;)if(a[s++]=e[i++],s==this.blockSize){n(this,a),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function s(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(i(-e));for(var t=[],n=1,a=0;e>=n;a++)t[a]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],a=0;a<t;a++)n[a]=~e.g[a];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var a=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(a=a.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,a.j(t)),new p(a,t)}for(a=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=i(n)).j(t);d(c)||0<c.l(e);)c=(s=i(n-=r)).j(t);u(s)&&(s=l),a=a.add(s),e=f(e,c)}return new p(a,e)}function v(e){for(var t=e.g.length+1,n=[],a=0;a<t;a++)n[a]=e.i(a)<<1|e.i(a-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var a=e.g.length-n,s=[],i=0;i<a;i++)s[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var a=g(n,t).g,s=((0<(n=f(n,a.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=a))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0,s=0;s<=t;s++){var i=a+(65535&this.i(s))+(65535&e.i(s)),o=(i>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);a=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var s=0;s<e.g.length;s++){var l=this.i(a)>>>16,f=65535&this.i(a),p=e.i(s)>>>16,g=65535&e.i(s);n[2*a+2*s]+=f*g,m(n,2*a+2*s),n[2*a+2*s+1]+=l*g,m(n,2*a+2*s+1),n[2*a+2*s+1]+=f*p,m(n,2*a+2*s+1),n[2*a+2*s+2]+=l*p,m(n,2*a+2*s+2)}for(a=0;a<t;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=t;a<2*t;a++)n[a]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)&e.i(a);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)|e.i(a);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)^e.i(a);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Mt=Ft.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),a=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=i(Math.pow(n,l)),a=a.j(l).add(i(c))):a=(a=a.j(r)).add(i(c))}return a},Ot=Ft.Integer=r}).apply("undefined"!==typeof Lt?Lt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var zt,Ut,Bt,Vt,Ht,qt,Kt,Wt,Gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Qt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Gt&&Gt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var a=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var i=e[s];if(!(i in a))break e;a=a[i]}(r=r(s=a[e=e[e.length-1]]))!=s&&null!=r&&t(a,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,function(e,t){return t})}});var r=r||{},a=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let a=0;a<r;a++)e[n+a]=t[a]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let a=1;a<arguments.length;a++){for(n in r=arguments[a],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){a.setTimeout(()=>{throw e},0)}function T(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,I=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=a.Promise.resolve(void 0);_=()=>{e.then(A)}};var A=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){S(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var a=!0;break e}catch(s){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,P);var M={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],s=Array.prototype.indexOf.call(a,t,void 0);(r=0<=s)&&Array.prototype.splice.call(a,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var a=0;a<e.length;++a){var s=e[a];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return a}return-1}B.prototype.add=function(e,t,n,r,a){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var i=H(e,t,r,a);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,a)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),K={};function W(e,t,n,r,a){if(r&&r.once)return Q(e,t,n,r,a);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,a);return null}return n=te(n),e&&e[L]?e.K(t,n,i(r)?!!r.capture:!!r,a):G(e,t,n,!1,r,a)}function G(e,t,n,r,a,s){if(!t)throw Error("Invalid event type");var o=i(a)?!!a.capture:!!a,l=Z(e);if(l||(e[q]=l=new B(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,a){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,a);return null}return n=te(n),e&&e[L]?e.L(t,n,i(r)?!!r.capture:!!r,a):G(e,t,n,!0,r,a)}function Y(e,t,n,r,a){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,a);else r=i(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,a))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,a)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var a=t;w(t=new P(r,e),a)}if(a=!0,n)for(var s=n.length-1;0<=s;s--){var i=t.g=n[s];a=ae(i,r,!0,t)&&a}if(a=ae(i=t.g=e,r,!0,t)&&a,a=ae(i,r,!1,t)&&a,n)for(s=0;s<n.length;s++)a=ae(i=t.g=n[s],r,!1,t)&&a}function ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,s=0;s<t.length;++s){var i=t[s];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&V(e.i,i),a=!1!==o.call(l,r)&&a}}return a&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function ie(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,D),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}d(le,D);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&J(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=a.JSON.stringify,he=a.JSON.parse,fe=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var xe={},we=null;function ke(){return we=we||new ne}function Se(e){P.call(this,xe.La,e)}function Te(e){const t=ke();re(t,new Se(t))}function Ne(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function Ee(e){const t=ke();re(t,new Ne(t,e))}function _e(e,t){P.call(this,xe.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var s=a[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var i=1;i<a.length;i++)a[i]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(Se,P),xe.STAT_EVENT="statevent",d(Ne,P),xe.Ma="timingevent",d(_e,P),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Le={},Fe={};function ze(e,t,n){e.L=1,e.v=dt(it(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var a="readystatechange";Array.isArray(a)||(a&&(ce[0]=a.toString()),a=ce);for(var s=0;s<a.length;s++){var i=W(n,a[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,a,s){e.info(function(){if(e.g)if(s)for(var i="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=s;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+i})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function Ke(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||xn(e.j,e)}function Ge(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}gn(n),Ee(18)}}else n.za=a[1],0<n.za-n.T&&37500>a[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else kn(n,11)}else if((e.K||n.g==e)&&bn(n),!m(t))for(a=n.Da.g.parse(t),t=0;t<a.length;t++){let c=a[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const a=c[4];null!=a&&(n.Aa=a,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=Tn(r,r.J?r.ia:null,r.W),i.K){tt(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(Ke(o),He(o)),r.g=i}else pn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||kn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?kn(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Te()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||an(this.g)))){this.J||4!=h||7==t||Te(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=an(this.g);e="";var s=r.length,i=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,a,s,i){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+s+" "+i})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Ge(this),We(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ve(this,o),e==Fe){4==h&&(this.s=4,Ee(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),vn(d),d.M=!0,Ee(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),We(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?xn(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=k(e[r]);const a=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[a]||[];t[a]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ge(this),We(this)}}}catch(Yt){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Te(),Ee(17)),Ge(this),this.s=2,We(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var at=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(at))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function it(e){return new st(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var pt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var s=e[n].substring(0,r);a=e[n].substring(r+1)}else s=e[n];t(s,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){kt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return kt(e),t=Et(e,t),e.g.has(t)}function Nt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),h(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,function(e,n){let a=e;i(e)&&(a=de(e)),t.push(r+n+"="+encodeURIComponent(a))})}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){kt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const a=e[r];for(let e=0;e<a.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Tt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var a=s;""!==i[r]&&(a+="="+encodeURIComponent(String(i[r]))),e.push(a)}}return this.i=e.join("&")},d(jt,me),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(pt={},function(){return pt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Rt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ne);var Ft=/^https?$/i,Jt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var i=String(e.D).match(at)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),s=!Ft.test(i?i.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,a=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=a}catch(n){}}}function nn(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function an(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch($t){return null}}function sn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sn("baseRetryDelayMs",5e3,e),this.cb=sn("retryDelaySeedMs",1e4,e),this.Wa=sn("forwardChannelMaxRetries",2,e),this.wa=sn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=it(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),fn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(it(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}Sn(e)}function cn(e){e.g&&(vn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(a.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&a.clearTimeout(e.s),e.s=null)}function dn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||j(),I||(_(),I=!0),C.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),fn(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=mn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function fn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function mn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let i=0;i<n;i++){let n=a[i].g;const o=a[i].map;if(n-=t,0>n)t=Math.max(0,a[i].g-100),s=!1;else try{Ct(o,e,"req"+n+"_")}catch(Yt){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||j(),I||(_(),I=!0),C.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function vn(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function yn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(it(t)),n.m=null,n.P=!0,Ue(n,e)}function bn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function xn(e,t){var n=null;if(e.g==t){bn(e),vn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var a=e.B;re(r=ke(),new _e(r,n)),dn(e)}else pn(e);else if(3==(a=t.s)||0==a&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:kn(e,5);break;case 4:kn(e,10);break;case 3:kn(e,6);break;default:kn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function kn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ce;if(a.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),Sn(e),un(e)}function Sn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function Tn(e,t,n){var r=n instanceof st?it(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=a.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new st(null);r&&ot(i,r),t&&(i.g=t),s&&lt(i,s),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),fn(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new jt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function En(){}function _n(){}function In(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Cn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function jn(){be.call(this),this.status=1}function An(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Xt(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){Xt(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Tn(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const a=new Oe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(a.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=mn(this,a,t),ut(n=it(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,a),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),a.T=!0,ze(a,n,null)):ze(a,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Xe(this.h)||hn(this))},e.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),cn(this),yn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},_n.prototype.g=function(e,t){return new In(e,t)},d(In,ne),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ln(this.g)},In.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&dn(t)},In.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,In.aa.N.call(this)},d(Cn,ye),d(jn,be),d(An,En),An.prototype.ua=function(){re(this.g,"a")},An.prototype.ta=function(e){re(this.g,new Cn(e))},An.prototype.sa=function(e){re(this.g,new jn)},An.prototype.ra=function(){re(this.g,"b")},_n.prototype.createWebChannel=_n.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Wt=Qt.createWebChannelTransport=function(){return new _n},Kt=Qt.getStatEventTarget=function(){return ke()},qt=Qt.Event=xe,Ht=Qt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Vt=Qt.ErrorCode=De,Pe.COMPLETE="complete",Bt=Qt.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ut=Qt.WebChannel=ge,Qt.FetchXmlHttpFactory=jt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,zt=Qt.XhrIo=Lt}).apply("undefined"!==typeof Gt?Gt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Yt="@firebase/firestore";class Jt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");let Xt="10.14.0";const $t=new ve("@firebase/firestore");function Zt(){return $t.logLevel}function en(e){if($t.logLevel<=he.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(rn);$t.debug("Firestore (".concat(Xt,"): ").concat(e),...a)}}function tn(e){if($t.logLevel<=he.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(rn);$t.error("Firestore (".concat(Xt,"): ").concat(e),...a)}}function nn(e){if($t.logLevel<=he.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(rn);$t.warn("Firestore (".concat(Xt,"): ").concat(e),...a)}}function rn(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Xt,") INTERNAL ASSERTION FAILED: ")+e;throw tn(t),new Error(t)}function sn(e,t){e||an()}function on(e,t){return e}const ln={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class cn extends J{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class un{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class hn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}}class fn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mn{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){sn(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let a=new un;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new un,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=a;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},i=e=>{en("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>i(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(en("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new un)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(en("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(sn("string"==typeof t.accessToken),new dn(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return sn(null===e||"string"==typeof e),new Jt(e)}}class pn{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gn{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new pn(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){sn(void 0===this.o);const n=e=>{null!=e.error&&en("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,en("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{en("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):en("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(sn("string"==typeof e.token),this.R=e.token,new vn(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class xn{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=bn(40);for(let a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%62))}return n}}function wn(e,t){return e<t?-1:e>t?1:0}function kn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new cn(ln.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new cn(ln.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new cn(ln.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new cn(ln.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Sn(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wn(this.nanoseconds,e.nanoseconds):wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tn(e)}static min(){return new Tn(new Sn(0,0))}static max(){return new Tn(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Nn{constructor(e,t,n){void 0===t?t=0:t>e.length&&an(),void 0===n?n=e.length-t:n>e.length-t&&an(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Nn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),a=t.get(r);if(n<a)return-1;if(n>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Nn{construct(e,t,n){return new En(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n){if(a.indexOf("//")>=0)throw new cn(ln.INVALID_ARGUMENT,"Invalid segment (".concat(a,"). Paths must not contain // in them."));e.push(...a.split("/").filter(e=>e.length>0))}return new En(e)}static emptyPath(){return new En([])}}const _n=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Nn{construct(e,t,n){return new In(e,t,n)}static isValidIdentifier(e){return _n.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(0===n.length)throw new cn(ln.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new cn(ln.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new cn(ln.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(a(),r++)}if(a(),s)throw new cn(ln.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class Cn{constructor(e){this.path=e}static fromPath(e){return new Cn(En.fromString(e))}static fromName(e){return new Cn(En.fromString(e).popFirst(5))}static empty(){return new Cn(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cn(new En(e.slice()))}}class jn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}jn.UNKNOWN_ID=-1;function An(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Tn.fromTimestamp(1e9===r?new Sn(n+1,0):new Sn(n,r));return new Pn(a,Cn.empty(),t)}function Dn(e){return new Pn(e.readTime,e.key,-1)}class Pn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Pn(Tn.min(),Cn.empty(),-1)}static max(){return new Pn(Tn.max(),Cn.empty(),-1)}}function Rn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Cn.comparator(e.documentKey,t.documentKey),0!==n?n:wn(e.largestBatchId,t.largestBatchId))}const On="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ln(e){if(e.code!==ln.FAILED_PRECONDITION||e.message!==On)throw e;en("LocalStore","Unexpectedly lost primary lease")}class Fn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fn?t:Fn.resolve(t)}catch(e){return Fn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fn.reject(t)}static resolve(e){return new Fn((t,n)=>{t(e)})}static reject(e){return new Fn((t,n)=>{n(e)})}static waitFor(e){return new Fn((t,n)=>{let r=0,a=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++a,s&&a===r&&t()},e=>n(e))}),s=!0,a===r&&t()})}static or(e){let t=Fn.resolve(!1);for(const n of e)t=t.next(e=>e?Fn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Fn((n,r)=>{const a=e.length,s=new Array(a);let i=0;for(let o=0;o<a;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++i,i===a&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Fn((n,r)=>{const a=()=>{!0===e()?t().next(()=>{a()},r):n()};a()})}}function zn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Un(e){return"IndexedDbTransactionError"===e.name}class Bn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Vn(e){return null==e}function Hn(e){return 0===e&&1/e==-1/0}function qn(e){return"number"==typeof e&&Number.isInteger(e)&&!Hn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Bn.oe=-1;const Kn=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gn=Wn,Qn=[...Gn,"indexConfiguration","indexState","indexEntries"];function Yn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $n{constructor(e,t){this.comparator=e,this.root=t||er.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,er.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zn(this.root,e,this.comparator,!0)}}class Zn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class er{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=null!=n?n:er.RED,this.left=null!=r?r:er.EMPTY,this.right=null!=a?a:er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new er(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return er.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw an();if(this.right.isRed())throw an();const e=this.left.check();if(e!==this.right.check())throw an();return e+(this.isRed()?0:1)}}er.EMPTY=null,er.RED=!0,er.BLACK=!1,er.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(e,t,n,r,a){return this}insert(e,t,n){return new er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tr{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nr(this.data.getIterator())}getIteratorFrom(e){return new nr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof tr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tr(this.comparator);return t.data=e,t}}class nr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new rr([])}unionWith(e){let t=new tr(In.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ar extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ar("Invalid base64 string: "+e):e}}(e);return new sr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const ir=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(e){if(sn(!!e),"string"==typeof e){let t=0;const n=ir.exec(e);if(sn(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lr(e.seconds),nanos:lr(e.nanos)}}function lr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function cr(e){return"string"==typeof e?sr.fromBase64String(e):sr.fromUint8Array(e)}function ur(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dr(e){const t=e.mapValue.fields.__previous_value__;return ur(t)?dr(t):t}function hr(e){const t=or(e.mapValue.fields.__local_write_time__.timestampValue);return new Sn(t.seconds,t.nanos)}class fr{constructor(e,t,n,r,a,s,i,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l}}class mr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mr&&e.projectId===this.projectId&&e.database===this.database}}const pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ur(e)?4:Ar(e)?9007199254740991:Cr(e)?10:11:an()}function vr(e,t){if(e===t)return!0;const n=gr(e);if(n!==gr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hr(e).isEqual(hr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=or(e.timestampValue),r=or(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return cr(e.bytesValue).isEqual(cr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lr(e.geoPointValue.latitude)===lr(t.geoPointValue.latitude)&&lr(e.geoPointValue.longitude)===lr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lr(e.integerValue)===lr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lr(e.doubleValue),r=lr(t.doubleValue);return n===r?Hn(n)===Hn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kn(e.arrayValue.values||[],t.arrayValue.values||[],vr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Yn(n)!==Yn(r))return!1;for(const a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!vr(n[a],r[a])))return!1;return!0}(e,t);default:return an()}}function yr(e,t){return void 0!==(e.values||[]).find(e=>vr(e,t))}function br(e,t){if(e===t)return 0;const n=gr(e),r=gr(t);if(n!==r)return wn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lr(e.integerValue||e.doubleValue),r=lr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xr(e.timestampValue,t.timestampValue);case 4:return xr(hr(e),hr(t));case 5:return wn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=cr(e),r=cr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let a=0;a<n.length&&a<r.length;a++){const e=wn(n[a],r[a]);if(0!==e)return e}return wn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=wn(lr(e.latitude),lr(t.latitude));return 0!==n?n:wn(lr(e.longitude),lr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return wr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,a,s;const i=e.fields||{},o=t.fields||{},l=null===(n=i.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=wn((null===(a=null==l?void 0:l.values)||void 0===a?void 0:a.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:wr(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===pr.mapValue&&t===pr.mapValue)return 0;if(e===pr.mapValue)return 1;if(t===pr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),a=t.fields||{},s=Object.keys(a);r.sort(),s.sort();for(let i=0;i<r.length&&i<s.length;++i){const e=wn(r[i],s[i]);if(0!==e)return e;const t=br(n[r[i]],a[s[i]]);if(0!==t)return t}return wn(r.length,s.length)}(e.mapValue,t.mapValue);default:throw an()}}function xr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wn(e,t);const n=or(e),r=or(t),a=wn(n.seconds,r.seconds);return 0!==a?a:wn(n.nanos,r.nanos)}function wr(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const e=br(n[a],r[a]);if(e)return e}return wn(n.length,r.length)}function kr(e){return Sr(e)}function Sr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=or(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return cr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Cn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Sr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const a of t)r?r=!1:n+=",",n+="".concat(a,":").concat(Sr(e.fields[a]));return n+"}"}(e.mapValue):an()}function Tr(e){return!!e&&"integerValue"in e}function Nr(e){return!!e&&"arrayValue"in e}function Er(e){return!!e&&"nullValue"in e}function _r(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ir(e){return!!e&&"mapValue"in e}function Cr(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Jn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=jr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ar(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Dr{constructor(e){this.value=e}static empty(){return new Dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ir(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jr(t)}setAll(e){let t=In.emptyPath(),n={},r=[];e.forEach((e,a)=>{if(!t.isImmediateParentOf(a)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=a.popLast()}e?n[a.lastSegment()]=jr(e):r.push(a.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());Ir(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ir(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Jn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Dr(jr(this.value))}}function Pr(e){const t=[];return Jn(e.fields,(e,n)=>{const r=new In([e]);if(Ir(n)){const e=Pr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new rr(t)}class Rr{constructor(e,t,n,r,a,s,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=s,this.documentState=i}static newInvalidDocument(e){return new Rr(e,0,Tn.min(),Tn.min(),Tn.min(),Dr.empty(),0)}static newFoundDocument(e,t,n,r){return new Rr(e,1,t,Tn.min(),n,r,0)}static newNoDocument(e,t){return new Rr(e,2,t,Tn.min(),Tn.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new Rr(e,3,t,Tn.min(),Tn.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Or{constructor(e,t){this.position=e,this.inclusive=t}}function Mr(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(r=s.field.isKeyField()?Cn.comparator(Cn.fromName(i.referenceValue),n.key):br(i,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Lr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vr(e.position[n],t.position[n]))return!1;return!0}class Fr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function zr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ur{}class Br extends Ur{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Yr(e,t,n):"array-contains"===t?new Zr(e,n):"in"===t?new ea(e,n):"not-in"===t?new ta(e,n):"array-contains-any"===t?new na(e,n):new Br(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Jr(e,n):new Xr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(br(t,this.value)):null!==t&&gr(this.value)===gr(t)&&this.matchesComparison(br(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends Ur{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Vr(e,t)}matches(e){return Hr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hr(e){return"and"===e.op}function qr(e){return Kr(e)&&Hr(e)}function Kr(e){for(const t of e.filters)if(t instanceof Vr)return!1;return!0}function Wr(e){if(e instanceof Br)return e.field.canonicalString()+e.op.toString()+kr(e.value);if(qr(e))return e.filters.map(e=>Wr(e)).join(",");{const t=e.filters.map(e=>Wr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Gr(e,t){return e instanceof Br?function(e,t){return t instanceof Br&&e.op===t.op&&e.field.isEqual(t.field)&&vr(e.value,t.value)}(e,t):e instanceof Vr?function(e,t){return t instanceof Vr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Gr(n,t.filters[r]),!0)}(e,t):void an()}function Qr(e){return e instanceof Br?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(kr(e.value))}(e):e instanceof Vr?function(e){return e.op.toString()+" {"+e.getFilters().map(Qr).join(" ,")+"}"}(e):"Filter"}class Yr extends Br{constructor(e,t,n){super(e,t,n),this.key=Cn.fromName(n.referenceValue)}matches(e){const t=Cn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Jr extends Br{constructor(e,t){super(e,"in",t),this.keys=$r("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xr extends Br{constructor(e,t){super(e,"not-in",t),this.keys=$r("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $r(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Cn.fromName(e.referenceValue))}class Zr extends Br{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nr(t)&&yr(t.arrayValue,this.value)}}class ea extends Br{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yr(this.value.arrayValue,t)}}class ta extends Br{constructor(e,t){super(e,"not-in",t)}matches(e){if(yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yr(this.value.arrayValue,t)}}class na extends Br{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>yr(this.value.arrayValue,e))}}class ra{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=s,this.endAt=i,this.ue=null}}function aa(e){return new ra(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function sa(e){const t=on(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Wr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Vn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>kr(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>kr(e)).join(",")),t.ue=e}return t.ue}function ia(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lr(e.startAt,t.startAt)&&Lr(e.endAt,t.endAt)}function oa(e){return Cn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class la{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=s,this.startAt=i,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ca(e,t,n,r,a,s,i,o){return new la(e,t,n,r,a,s,i,o)}function ua(e){return new la(e)}function da(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ha(e){return null!==e.collectionGroup}function fa(e){const t=on(e);if(null===t.ce){t.ce=[];const e=new Set;for(const a of t.explicitOrderBy)t.ce.push(a),e.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new tr(In.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Fr(r,n))}),e.has(In.keyField().canonicalString())||t.ce.push(new Fr(In.keyField(),n))}return t.ce}function ma(e){const t=on(e);return t.le||(t.le=pa(t,fa(e))),t.le}function pa(e,t){if("F"===e.limitType)return aa(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Fr(e.field,t)});const n=e.endAt?new Or(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Or(e.startAt.position,e.startAt.inclusive):null;return aa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ga(e,t,n){return new la(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function va(e,t){return ia(ma(e),ma(t))&&e.limitType===t.limitType}function ya(e){return"".concat(sa(ma(e)),"|lt:").concat(e.limitType)}function ba(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Qr(e)).join(", "),"]")),Vn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>kr(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>kr(e)).join(",")),"Target(".concat(t,")")}(ma(e)),"; limitType=").concat(e.limitType,")")}function xa(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Cn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of fa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Mr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,fa(e),t))&&!(e.endAt&&!function(e,t,n){const r=Mr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,fa(e),t))}(e,t)}function wa(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ka(e){return(t,n)=>{let r=!1;for(const a of fa(e)){const e=Sa(a,t,n);if(0!==e)return e;r=r||a.field.isKeyField()}return 0}}function Sa(e,t,n){const r=e.field.isKeyField()?Cn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?br(r,a):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,a]of n)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jn(this.inner,(t,n)=>{for(const[r,a]of n)e(r,a)})}isEmpty(){return Xn(this.inner)}size(){return this.innerSize}}const Na=new $n(Cn.comparator);function Ea(){return Na}const _a=new $n(Cn.comparator);function Ia(){let e=_a;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.insert(a.key,a);return e}function Ca(e){let t=_a;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ja(){return Da()}function Aa(){return Da()}function Da(){return new Ta(e=>e.toString(),(e,t)=>e.isEqual(t))}const Pa=new $n(Cn.comparator),Ra=new tr(Cn.comparator);function Oa(){let e=Ra;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.add(a);return e}const Ma=new tr(wn);function La(){return Ma}function Fa(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hn(t)?"-0":t}}function za(e){return{integerValue:""+e}}function Ua(e,t){return qn(t)?za(t):Fa(e,t)}class Ba{constructor(){this._=void 0}}function Va(e,t,n){return e instanceof Ka?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ur(t)&&(t=dr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wa?Ga(e,t):e instanceof Qa?Ya(e,t):function(e,t){const n=qa(e,t),r=Xa(n)+Xa(e.Pe);return Tr(n)&&Tr(e.Pe)?za(r):Fa(e.serializer,r)}(e,t)}function Ha(e,t,n){return e instanceof Wa?Ga(e,t):e instanceof Qa?Ya(e,t):n}function qa(e,t){return e instanceof Ja?function(e){return Tr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ka extends Ba{}class Wa extends Ba{constructor(e){super(),this.elements=e}}function Ga(e,t){const n=$a(t);for(const r of e.elements)n.some(e=>vr(e,r))||n.push(r);return{arrayValue:{values:n}}}class Qa extends Ba{constructor(e){super(),this.elements=e}}function Ya(e,t){let n=$a(t);for(const r of e.elements)n=n.filter(e=>!vr(e,r));return{arrayValue:{values:n}}}class Ja extends Ba{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Xa(e){return lr(e.integerValue||e.doubleValue)}function $a(e){return Nr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Za{constructor(e,t){this.version=e,this.transformResults=t}}class es{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ts(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ns{}function rs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new fs(e.key,es.none()):new ls(e.key,e.data,es.none());{const n=e.data,r=Dr.empty();let a=new tr(In.comparator);for(let e of t.fields)if(!a.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),a=a.add(e)}return new cs(e.key,r,new rr(a.toArray()),es.none())}}function as(e,t,n){e instanceof ls?function(e,t,n){const r=e.value.clone(),a=ds(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cs?function(e,t,n){if(!ts(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ds(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(us(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ss(e,t,n,r){return e instanceof ls?function(e,t,n,r){if(!ts(e.precondition,t))return n;const a=e.value.clone(),s=hs(e.fieldTransforms,r,t);return a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof cs?function(e,t,n,r){if(!ts(e.precondition,t))return n;const a=hs(e.fieldTransforms,r,t),s=t.data;return s.setAll(us(e)),s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ts(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function is(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),a=qa(r.transform,e||null);null!=a&&(null===n&&(n=Dr.empty()),n.set(r.field,a))}return n||null}function os(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wa&&t instanceof Wa||e instanceof Qa&&t instanceof Qa?kn(e.elements,t.elements,vr):e instanceof Ja&&t instanceof Ja?vr(e.Pe,t.Pe):e instanceof Ka&&t instanceof Ka}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ls extends ns{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class cs extends ns{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function us(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ds(e,t,n){const r=new Map;sn(e.length===n.length);for(let a=0;a<n.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);r.set(s.field,Ha(i,o,n[a]))}return r}function hs(e,t,n){const r=new Map;for(const a of e){const e=a.transform,s=n.data.field(a.field);r.set(a.field,Va(e,s,t))}return r}class fs extends ns{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ms extends ns{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ps{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&as(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ss(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ss(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Aa();return this.mutations.forEach(r=>{const a=e.get(r.key),s=a.overlayedDocument;let i=this.applyToLocalView(s,a.mutatedFields);i=t.has(r.key)?null:i;const o=rs(s,i);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Tn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oa())}isEqual(e){return this.batchId===e.batchId&&kn(this.mutations,e.mutations,(e,t)=>os(e,t))&&kn(this.baseMutations,e.baseMutations,(e,t)=>os(e,t))}}class gs{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){sn(e.mutations.length===n.length);let r=Pa;const a=e.mutations;for(let s=0;s<a.length;s++)r=r.insert(a[s].key,n[s].version);return new gs(e,t,n,r)}}class vs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ys{constructor(e,t){this.count=e,this.unchangedNames=t}}var bs,xs;function ws(e){switch(e){default:return an();case ln.CANCELLED:case ln.UNKNOWN:case ln.DEADLINE_EXCEEDED:case ln.RESOURCE_EXHAUSTED:case ln.INTERNAL:case ln.UNAVAILABLE:case ln.UNAUTHENTICATED:return!1;case ln.INVALID_ARGUMENT:case ln.NOT_FOUND:case ln.ALREADY_EXISTS:case ln.PERMISSION_DENIED:case ln.FAILED_PRECONDITION:case ln.ABORTED:case ln.OUT_OF_RANGE:case ln.UNIMPLEMENTED:case ln.DATA_LOSS:return!0}}function ks(e){if(void 0===e)return tn("GRPC error has no .code"),ln.UNKNOWN;switch(e){case bs.OK:return ln.OK;case bs.CANCELLED:return ln.CANCELLED;case bs.UNKNOWN:return ln.UNKNOWN;case bs.DEADLINE_EXCEEDED:return ln.DEADLINE_EXCEEDED;case bs.RESOURCE_EXHAUSTED:return ln.RESOURCE_EXHAUSTED;case bs.INTERNAL:return ln.INTERNAL;case bs.UNAVAILABLE:return ln.UNAVAILABLE;case bs.UNAUTHENTICATED:return ln.UNAUTHENTICATED;case bs.INVALID_ARGUMENT:return ln.INVALID_ARGUMENT;case bs.NOT_FOUND:return ln.NOT_FOUND;case bs.ALREADY_EXISTS:return ln.ALREADY_EXISTS;case bs.PERMISSION_DENIED:return ln.PERMISSION_DENIED;case bs.FAILED_PRECONDITION:return ln.FAILED_PRECONDITION;case bs.ABORTED:return ln.ABORTED;case bs.OUT_OF_RANGE:return ln.OUT_OF_RANGE;case bs.UNIMPLEMENTED:return ln.UNIMPLEMENTED;case bs.DATA_LOSS:return ln.DATA_LOSS;default:return an()}}(xs=bs||(bs={}))[xs.OK=0]="OK",xs[xs.CANCELLED=1]="CANCELLED",xs[xs.UNKNOWN=2]="UNKNOWN",xs[xs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xs[xs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xs[xs.NOT_FOUND=5]="NOT_FOUND",xs[xs.ALREADY_EXISTS=6]="ALREADY_EXISTS",xs[xs.PERMISSION_DENIED=7]="PERMISSION_DENIED",xs[xs.UNAUTHENTICATED=16]="UNAUTHENTICATED",xs[xs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xs[xs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xs[xs.ABORTED=10]="ABORTED",xs[xs.OUT_OF_RANGE=11]="OUT_OF_RANGE",xs[xs.UNIMPLEMENTED=12]="UNIMPLEMENTED",xs[xs.INTERNAL=13]="INTERNAL",xs[xs.UNAVAILABLE=14]="UNAVAILABLE",xs[xs.DATA_LOSS=15]="DATA_LOSS";let Ss=null;function Ts(){return new TextEncoder}const Ns=new Ot([4294967295,4294967295],0);function Es(e){const t=Ts().encode(e),n=new Mt;return n.update(t),new Uint8Array(n.digest())}function _s(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ot([n,r],0),new Ot([a,s],0)]}class Is{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Cs("Invalid padding: ".concat(t));if(n<0)throw new Cs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Cs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Cs("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Ot.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Ot.fromNumber(n)));return 1===r.compare(Ns)&&(r=new Ot([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Es(e),[n,r]=_s(t);for(let a=0;a<this.hashCount;a++){const e=this.Ee(n,r,a);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Is(a,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=Es(e),[n,r]=_s(t);for(let a=0;a<this.hashCount;a++){const e=this.Ee(n,r,a);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class js{constructor(e,t,n,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,As.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new js(Tn.min(),r,new $n(wn),Ea(),Oa())}}class As{constructor(e,t,n,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new As(n,t,Oa(),Oa(),Oa())}}class Ds{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Ps{constructor(e,t){this.targetId=e,this.me=t}}class Rs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Os{constructor(){this.fe=0,this.ge=Fs(),this.pe=sr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oa(),t=Oa(),n=Oa();return this.ge.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:an()}}),new As(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Fs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,sn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ms{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ea(),this.qe=Ls(),this.Qe=new $n(wn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:an()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const a=r.target;if(oa(a))if(0===n){const e=new Cn(a.path);this.Ue(t,e,Rr.newNoDocument(e,Tn.min()))}else sn(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),a=n?this.Xe(n,e,r):1;if(0!==a){this.je(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ss||Ss.et(function(e,t,n,r,a){var s,i,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===a,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(i=null==h?void 0:h.bits)||void 0===i?void 0:i.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,a))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:a=0}=t;let s,i;try{s=cr(n).toUint8Array()}catch(e){if(e instanceof ar)return nn("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Is(s,r,a)}catch(e){return nn(e instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.Ie?null:i}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const a=this.Le.tt(),s="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const a=this.Je(r);if(a){if(n.current&&oa(a.target)){const t=new Cn(a.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Rr.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Oa();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new js(e,t,this.Qe,this.ke,n);return this.ke=Ea(),this.qe=Ls(),this.Qe=new $n(wn),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Os,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tr(wn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||en("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Os),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ls(){return new $n(Cn.comparator)}function Fs(){return new $n(Cn.comparator)}const zs={asc:"ASCENDING",desc:"DESCENDING"},Us={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bs={and:"AND",or:"OR"};class Vs{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hs(e,t){return e.useProto3Json||Vn(t)?t:{value:t}}function qs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ks(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ws(e,t){return qs(e,t.toTimestamp())}function Gs(e){return sn(!!e),Tn.fromTimestamp(function(e){const t=or(e);return new Sn(t.seconds,t.nanos)}(e))}function Qs(e,t){return Ys(e,t).canonicalString()}function Ys(e,t){const n=function(e){return new En(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Js(e){const t=En.fromString(e);return sn(gi(t)),t}function Xs(e,t){return Qs(e.databaseId,t.path)}function $s(e,t){const n=Js(t);if(n.get(1)!==e.databaseId.projectId)throw new cn(ln.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cn(ln.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Cn(ni(n))}function Zs(e,t){return Qs(e.databaseId,t)}function ei(e){const t=Js(e);return 4===t.length?En.emptyPath():ni(t)}function ti(e){return new En(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ni(e){return sn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ri(e,t,n){return{name:Xs(e,t),fields:n.value.mapValue.fields}}function ai(e,t){let n;if(t instanceof ls)n={update:ri(e,t.key,t.value)};else if(t instanceof fs)n={delete:Xs(e,t.key)};else if(t instanceof cs)n={update:ri(e,t.key,t.data),updateMask:pi(t.fieldMask)};else{if(!(t instanceof ms))return an();n={verify:Xs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ka)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wa)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qa)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ja)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw an()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ws(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:an()}(e,t.precondition)),n}function si(e,t){return{documents:[Zs(e,t.path)]}}function ii(e,t){const n={structuredQuery:{}},r=t.path;let a;null!==t.collectionGroup?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zs(e,a);const s=function(e){if(0!==e.length)return mi(Vr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:hi(e.field),direction:ci(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Hs(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:a}}function oi(e){let t=ei(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){sn(1===r);const e=n.from[0];e.allDescendants?a=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=li(e);return t instanceof Vr&&qr(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map(e=>function(e){return new Fr(fi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Vn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Or(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Or(n,t)}(n.endAt)),ca(t,a,i,s,o,"F",l,c)}function li(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fi(e.unaryFilter.field);return Br.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=fi(e.unaryFilter.field);return Br.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fi(e.unaryFilter.field);return Br.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fi(e.unaryFilter.field);return Br.create(a,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):void 0!==e.fieldFilter?function(e){return Br.create(fi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Vr.create(e.compositeFilter.filters.map(e=>li(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return an()}}(e.compositeFilter.op))}(e):an()}function ci(e){return zs[e]}function ui(e){return Us[e]}function di(e){return Bs[e]}function hi(e){return{fieldPath:e.canonicalString()}}function fi(e){return In.fromServerFormat(e.fieldPath)}function mi(e){return e instanceof Br?function(e){if("=="===e.op){if(_r(e.value))return{unaryFilter:{field:hi(e.field),op:"IS_NAN"}};if(Er(e.value))return{unaryFilter:{field:hi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_r(e.value))return{unaryFilter:{field:hi(e.field),op:"IS_NOT_NAN"}};if(Er(e.value))return{unaryFilter:{field:hi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hi(e.field),op:ui(e.op),value:e.value}}}(e):e instanceof Vr?function(e){const t=e.getFilters().map(e=>mi(e));return 1===t.length?t[0]:{compositeFilter:{op:di(e.op),filters:t}}}(e):an()}function pi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class vi{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tn.min(),i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:sr.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yi{constructor(e){this.ct=e}}function bi(e){const t=oi({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ga(t,t.limit,"L"):t}class xi{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(lr(e.integerValue));else if("doubleValue"in e){const n=lr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Hn(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=or(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(cr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ar(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Cr(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):an()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const a=e.fields||{};this.dt(t,53);const s="value",i=(null===(r=null===(n=a[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(lr(i)),this.Vt(s,t),this.Tt(a[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Cn.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}xi.vt=new xi;class wi{constructor(){this.un=new ki}addToCollectionParentIndex(e,t){return this.un.add(t),Fn.resolve()}getCollectionParents(e,t){return Fn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Fn.resolve()}deleteFieldIndex(e,t){return Fn.resolve()}deleteAllFieldIndexes(e){return Fn.resolve()}createTargetIndexes(e,t){return Fn.resolve()}getDocumentsMatchingTarget(e,t){return Fn.resolve(null)}getIndexType(e,t){return Fn.resolve(0)}getFieldIndexes(e,t){return Fn.resolve([])}getNextCollectionGroupToUpdate(e){return Fn.resolve(null)}getMinOffset(e,t){return Fn.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,t){return Fn.resolve(Pn.min())}updateCollectionGroup(e,t,n){return Fn.resolve()}updateIndexEntries(e,t){return Fn.resolve()}}class ki{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tr(En.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new tr(En.comparator)).toArray()}}new Uint8Array(0);class Si{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class Ti{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ti(0)}static kn(){return new Ti(-1)}}class Ni{constructor(){this.changes=new Ta(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ei{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _i{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ss(n.mutation,e,rr.empty(),Sn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Oa()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa();const r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ia();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ja();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Oa()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let a=Ea();const s=Da(),i=Da();return t.forEach((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof cs)?a=a.insert(t.key,t):void 0!==i?(s.set(t.key,i.mutation.getFieldMask()),ss(i.mutation,t,i.mutation.getFieldMask(),Sn.now())):s.set(t.key,rr.empty())}),this.recalculateAndSaveOverlays(e,a).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return i.set(e,new Ei(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),i))}recalculateAndSaveOverlays(e,t){const n=Da();let r=new $n((e,t)=>e-t),a=Oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const a of e)a.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let i=n.get(e)||rr.empty();i=a.applyToLocalView(s,i),n.set(e,i);const o=(r.get(a.batchId)||Oa()).add(e);r=r.insert(a.batchId,o)})}).next(()=>{const s=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Aa();l.forEach(e=>{if(!a.has(e)){const r=rs(t.get(e),n.get(e));null!==r&&c.set(e,r),a=a.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Fn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Cn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ha(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Fn.resolve(ja());let i=-1,o=a;return s.next(t=>Fn.forEach(t,(t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),a.get(t)?Fn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,a)).next(()=>this.computeViews(e,o,t,Oa())).next(e=>({batchId:i,changes:Ca(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cn(t)).next(e=>{let t=Ia();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let s=Ia();return this.indexManager.getCollectionParents(e,a).next(i=>Fn.forEach(i,i=>{const o=function(e,t){return new la(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(a));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r))).next(e=>{a.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Rr.newInvalidDocument(r)))});let n=Ia();return e.forEach((e,r)=>{const s=a.get(e);void 0!==s&&ss(s.mutation,r,rr.empty(),Sn.now()),xa(t,r)&&(n=n.insert(e,r))}),n})}}class Ii{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Fn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Gs(e.createTime)}}(t)),Fn.resolve()}getNamedQuery(e,t){return Fn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:bi(e.bundledQuery),readTime:Gs(e.readTime)}}(t)),Fn.resolve()}}class Ci{constructor(){this.overlays=new $n(Cn.comparator),this.Ir=new Map}getOverlay(e,t){return Fn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ja();return Fn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Fn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Fn.resolve()}getOverlaysForCollection(e,t,n){const r=ja(),a=t.length+1,s=new Cn(t.child("")),i=this.overlays.getIteratorFrom(s);for(;i.hasNext();){const e=i.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===a&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new $n((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=a.get(e.largestBatchId);null===t&&(t=ja(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=ja(),o=a.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>i.set(e,t)),!(i.size()>=r)););return Fn.resolve(i)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new vs(t,n));let a=this.Ir.get(t);void 0===a&&(a=Oa(),this.Ir.set(t,a)),this.Ir.set(t,a.add(n.key))}}class ji{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return Fn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Fn.resolve()}}class Ai{constructor(){this.Tr=new tr(Di.Er),this.dr=new tr(Di.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Di(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Di(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Cn(new En([])),n=new Di(t,e),r=new Di(t,e+1),a=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),a.push(e.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Cn(new En([])),n=new Di(t,e),r=new Di(t,e+1);let a=Oa();return this.dr.forEachInRange([n,r],e=>{a=a.add(e.key)}),a}containsKey(e){const t=new Di(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Di{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Cn.comparator(e.key,t.key)||wn(e.wr,t.wr)}static Ar(e,t){return wn(e.wr,t.wr)||Cn.comparator(e.key,t.key)}}class Pi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tr(Di.Er)}checkEmpty(e){return Fn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ps(a,t,n,r);this.mutationQueue.push(s);for(const i of r)this.br=this.br.add(new Di(i.key,a)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return Fn.resolve(s)}lookupMutationBatch(e,t){return Fn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),a=r<0?0:r;return Fn.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Fn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Fn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Di(t,0),r=new Di(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);a.push(t)}),Fn.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new tr(wn);return t.forEach(e=>{const t=new Di(e,0),r=new Di(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Fn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;Cn.isDocumentKey(a)||(a=a.child(""));const s=new Di(new Cn(a),0);let i=new tr(wn);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.wr)),!0)},s),Fn.resolve(this.Cr(i))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){sn(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Fn.forEach(t.mutations,r=>{const a=new Di(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Di(t,0),r=this.br.firstAfterOrEqual(n);return Fn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ri{constructor(e){this.Mr=e,this.docs=new $n(Cn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fn.resolve(n?n.document.mutableCopy():Rr.newInvalidDocument(t))}getEntries(e,t){let n=Ea();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Rr.newInvalidDocument(e))}),Fn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=Ea();const s=t.path,i=new Cn(s.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Rn(Dn(i),n)<=0||(r.has(i.key)||xa(t,i))&&(a=a.insert(i.key,i.mutableCopy()))}return Fn.resolve(a)}getAllFromCollectionGroup(e,t,n,r){an()}Or(e,t){return Fn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Oi(this)}getSize(e){return Fn.resolve(this.size)}}class Oi extends Ni{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Fn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Mi{constructor(e){this.persistence=e,this.Nr=new Ta(e=>sa(e),ia),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ai,this.targetCount=0,this.kr=Ti.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Fn.resolve()}getLastRemoteSnapshotVersion(e){return Fn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Fn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Fn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ti(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Fn.resolve()}updateTargetData(e,t){return this.Kn(t),Fn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Fn.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.Nr.forEach((s,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)}),Fn.waitFor(a).next(()=>r)}getTargetCount(e){return Fn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Fn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Fn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(t=>{a.push(r.markPotentiallyOrphaned(e,t))}),Fn.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Fn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Fn.resolve(n)}containsKey(e,t){return Fn.resolve(this.Br.containsKey(t))}}class Li{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Bn(0),this.Kr=!1,this.Kr=!0,this.$r=new ji,this.referenceDelegate=e(this),this.Ur=new Mi(this),this.indexManager=new wi,this.remoteDocumentCache=function(e){return new Ri(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new yi(t),this.Gr=new Ii(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ci,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Pi(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){en("MemoryPersistence","Starting transaction:",e);const r=new Fi(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Fn.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Fi extends Mn{constructor(e){super(),this.currentSequenceNumber=e}}class zi{constructor(e){this.persistence=e,this.Jr=new Ai,this.Yr=null}static Zr(e){return new zi(e)}get Xr(){if(this.Yr)return this.Yr;throw an()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Fn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Fn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Fn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fn.forEach(this.Xr,n=>{const r=Cn.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Tn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Fn.or([()=>Fn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ui{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Oa(),r=Oa();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Ui(e,t.fromCache,n,r)}}class Bi{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vi{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Q()?8:zn(G())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.Yi(e,t).next(e=>{a.result=e}).next(()=>{if(!a.result)return this.Zi(e,t,r,n).next(e=>{a.result=e})}).next(()=>{if(a.result)return;const n=new Bi;return this.Xi(e,t,n).next(r=>{if(a.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>a.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Zt()<=he.DEBUG&&en("QueryEngine","SDK will not create cache indexes for query:",ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Fn.resolve()):(Zt()<=he.DEBUG&&en("QueryEngine","Query:",ba(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Zt()<=he.DEBUG&&en("QueryEngine","The SDK decides to create cache indexes for query:",ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(t))):Fn.resolve())}Yi(e,t){if(da(t))return Fn.resolve(null);let n=ma(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ga(t,null,"F"),n=ma(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const a=Oa(...r);return this.Ji.getDocuments(e,a).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,a,n.readTime)?this.Yi(e,ga(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return da(t)||r.isEqual(Tn.min())?Fn.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const s=this.ts(t,a);return this.ns(t,s,n,r)?Fn.resolve(null):(Zt()<=he.DEBUG&&en("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ba(t)),this.rs(e,s,t,An(r,-1)).next(e=>e))})}ts(e,t){let n=new tr(ka(e));return t.forEach((t,r)=>{xa(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Xi(e,t,n){return Zt()<=he.DEBUG&&en("QueryEngine","Using full collection scan to execute query:",ba(t)),this.Ji.getDocumentsMatchingQuery(e,t,Pn.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Hi{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new $n(wn),this._s=new Ta(e=>sa(e),ia),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _i(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function qi(e,t,n,r){return new Hi(e,t,n,r)}async function Ki(e,t){const n=on(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(a=>(r=a,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const a=[],s=[];let i=Oa();for(const e of r){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next(e=>({hs:e,removedBatchIds:a,addedBatchIds:s}))})})}function Wi(e){const t=on(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Gi(e,t,n){let r=Oa(),a=Oa();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ea();return n.forEach((n,s)=>{const i=e.get(n);s.isFoundDocument()!==i.isFoundDocument()&&(a=a.add(n)),s.isNoDocument()&&s.version.isEqual(Tn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!i.isValidDocument()||s.version.compareTo(i.version)>0||0===s.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):en("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",s.version)}),{Ps:r,Is:a}})}function Qi(e,t){const n=on(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Yi(e,t){const n=on(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(a=>a?(r=a,Fn.resolve(r)):n.Ur.allocateTargetId(e).next(a=>(r=new vi(t,a,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Ji(e,t,n){const r=on(e),a=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,a))}catch(e){if(!Un(e))throw e;en("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(a.target)}function Xi(e,t,n){const r=on(e);let a=Tn.min(),s=Oa();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=on(e),a=r._s.get(n);return void 0!==a?Fn.resolve(r.os.get(a)):r.Ur.getTargetData(t,n)}(r,e,ma(t)).next(t=>{if(t)return a=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?a:Tn.min(),n?s:Oa())).next(e=>($i(r,wa(t),e),{documents:e,Ts:s})))}function $i(e,t,n){let r=e.us.get(t)||Tn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Zi{constructor(){this.activeTargetIds=La()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eo{constructor(){this.so=new Zi,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zi,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class to{_o(e){}shutdown(){}}class no{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){en("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){en("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ro=null;function ao(){return null===ro?ro=268435456+Math.round(2147483648*Math.random()):ro++,"0x"+ro.toString(16)}const so={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class io{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const oo="WebChannelConnection";class lo extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,a){const s=ao(),i=this.xo(e,t.toUriEncodedString());en("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),i,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,a),this.No(e,i,o,n).then(t=>(en("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw nn("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",i,"request:",n),t})}Lo(e,t,n,r,a,s){return this.Mo(e,t,n,r,a)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=so[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const a=ao();return new Promise((s,i)=>{const o=new zt;o.setWithCredentials(!0),o.listenOnce(Bt.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Vt.NO_ERROR:const t=o.getResponseJson();en(oo,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(t)),s(t);break;case Vt.TIMEOUT:en(oo,"RPC '".concat(e,"' ").concat(a," timed out")),i(new cn(ln.DEADLINE_EXCEEDED,"Request time out"));break;case Vt.HTTP_ERROR:const n=o.getStatus();if(en(oo,"RPC '".concat(e,"' ").concat(a," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ln).indexOf(t)>=0?t:ln.UNKNOWN}(t.status);i(new cn(e,t.message))}else i(new cn(ln.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new cn(ln.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{en(oo,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);en(oo,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=ao(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Wt(),i=Kt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=a.join("");en(oo,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new io({Io:t=>{h?en(oo,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(en(oo,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),en(oo,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,Ut.EventType.OPEN,()=>{h||(en(oo,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),m(u,Ut.EventType.CLOSE,()=>{h||(h=!0,en(oo,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),m(u,Ut.EventType.ERROR,t=>{h||(h=!0,nn(oo,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new cn(ln.UNAVAILABLE,"The operation could not be completed")))}),m(u,Ut.EventType.MESSAGE,t=>{var n;if(!h){const a=t.data[0];sn(!!a);const s=a,i=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(i){en(oo,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=bs[e];if(void 0!==t)return ks(t)}(t),a=i.message;void 0===n&&(n=ln.INTERNAL,a="Unknown error status: "+t+" with message "+i.message),h=!0,f.So(new cn(n,a)),u.close()}else en(oo,"RPC '".concat(e,"' stream ").concat(r," received:"),a),f.bo(a)}}),m(i,qt.STAT_EVENT,t=>{t.stat===Ht.PROXY?en(oo,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ht.NOPROXY&&en(oo,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function co(){return"undefined"!=typeof document?document:null}function uo(e){return new Vs(e,!0)}class ho{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&en("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class fo{constructor(e,t,n,r,a,s,i,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ho(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ln.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ln.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new cn(ln.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return en("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(en("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mo extends fo{constructor(e,t,n,r,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(sn(void 0===t||"string"==typeof t),sr.fromBase64String(t||"")):(sn(void 0===t||t instanceof Buffer||t instanceof Uint8Array),sr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?ln.UNKNOWN:ks(e.code);return new cn(t,e.message||"")}(i);n=new Rs(r,a,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=$s(e,r.document.name),s=Gs(r.document.updateTime),i=r.document.createTime?Gs(r.document.createTime):Tn.min(),o=new Dr({mapValue:{fields:r.document.fields}}),l=Rr.newFoundDocument(a,s,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ds(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=$s(e,r.document),s=r.readTime?Gs(r.readTime):Tn.min(),i=Rr.newNoDocument(a,s),o=r.removedTargetIds||[];n=new Ds([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=$s(e,r.document),s=r.removedTargetIds||[];n=new Ds([],s,a,null)}else{if(!("filter"in t))return an();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:a}=e,s=new ys(r,a),i=e.targetId;n=new Ps(i,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tn.min():t.readTime?Gs(t.readTime):Tn.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ti(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=oa(r)?{documents:si(e,r)}:{query:ii(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ks(e,t.resumeToken);const r=Hs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Tn.min())>0){n.readTime=qs(e,t.snapshotVersion.toTimestamp());const r=Hs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ti(this.serializer),t.removeTarget=e,this.a_(t)}}class po extends fo{constructor(e,t,n,r,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return sn(!!e.streamToken),this.lastStreamToken=e.streamToken,sn(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){sn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(sn(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Gs(e.updateTime):Gs(t);return n.isEqual(Tn.min())&&(n=Gs(t)),new Za(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Gs(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ti(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ai(this.serializer,e))};this.a_(t)}}class go extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new cn(ln.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[s,i]=a;return this.connection.Mo(e,Ys(t,n),r,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ln.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cn(ln.UNKNOWN,e.toString())})}Lo(e,t,n,r,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Lo(e,Ys(t,n),r,i,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ln.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new cn(ln.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(tn(t),this.D_=!1):en("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class yo{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(e=>{n.enqueueAndForget(async()=>{_o(this)&&(en("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=on(e);t.L_.add(4),await xo(t),t.q_.set("Unknown"),t.L_.delete(4),await bo(t)}(this))})}),this.q_=new vo(n,r)}}async function bo(e){if(_o(e))for(const t of e.B_)await t(!0)}async function xo(e){for(const t of e.B_)await t(!1)}function wo(e,t){const n=on(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Eo(n)?No(n):Wo(n).r_()&&So(n,t))}function ko(e,t){const n=on(e),r=Wo(n);n.N_.delete(t),r.r_()&&To(n,t),0===n.N_.size&&(r.r_()?r.o_():_o(n)&&n.q_.set("Unknown"))}function So(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wo(e).A_(t)}function To(e,t){e.Q_.xe(t),Wo(e).R_(t)}function No(e){e.Q_=new Ms({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Wo(e).start(),e.q_.v_()}function Eo(e){return _o(e)&&!Wo(e).n_()&&e.N_.size>0}function _o(e){return 0===on(e).L_.size}function Io(e){e.Q_=void 0}async function Co(e){e.q_.set("Online")}async function jo(e){e.N_.forEach((t,n)=>{So(e,t)})}async function Ao(e,t){Io(e),Eo(e)?(e.q_.M_(t),No(e)):e.q_.set("Unknown")}async function Do(e,t,n){if(e.q_.set("Online"),t instanceof Rs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){en("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Po(e,n)}else if(t instanceof Ds?e.Q_.Ke(t):t instanceof Ps?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Tn.min()))try{const t=await Wi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const a=e.N_.get(r);a&&e.N_.set(r,a.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(sr.EMPTY_BYTE_STRING,r.snapshotVersion)),To(e,t);const a=new vi(r.target,t,n,r.sequenceNumber);So(e,a)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){en("RemoteStore","Failed to raise snapshot:",t),await Po(e,t)}}async function Po(e,t,n){if(!Un(t))throw t;e.L_.add(1),await xo(e),e.q_.set("Offline"),n||(n=()=>Wi(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{en("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await bo(e)})}function Ro(e,t){return t().catch(n=>Po(e,n,t))}async function Oo(e){const t=on(e),n=Go(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Mo(t);)try{const e=await Qi(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Lo(t,e)}catch(e){await Po(t,e)}Fo(t)&&zo(t)}function Mo(e){return _o(e)&&e.O_.length<10}function Lo(e,t){e.O_.push(t);const n=Go(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Fo(e){return _o(e)&&!Go(e).n_()&&e.O_.length>0}function zo(e){Go(e).start()}async function Uo(e){Go(e).p_()}async function Bo(e){const t=Go(e);for(const n of e.O_)t.m_(n.mutations)}async function Vo(e,t,n){const r=e.O_.shift(),a=gs.from(r,t,n);await Ro(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Oo(e)}async function Ho(e,t){t&&Go(e).V_&&await async function(e,t){if(function(e){return ws(e)&&e!==ln.ABORTED}(t.code)){const n=e.O_.shift();Go(e).s_(),await Ro(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Oo(e)}}(e,t),Fo(e)&&zo(e)}async function qo(e,t){const n=on(e);n.asyncQueue.verifyOperationInProgress(),en("RemoteStore","RemoteStore received new credentials");const r=_o(n);n.L_.add(3),await xo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await bo(n)}async function Ko(e,t){const n=on(e);t?(n.L_.delete(2),await bo(n)):t||(n.L_.add(2),await xo(n),n.q_.set("Unknown"))}function Wo(e){return e.K_||(e.K_=function(e,t,n){const r=on(e);return r.w_(),new mo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Co.bind(null,e),Ro:jo.bind(null,e),mo:Ao.bind(null,e),d_:Do.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Eo(e)?No(e):e.q_.set("Unknown")):(await e.K_.stop(),Io(e))})),e.K_}function Go(e){return e.U_||(e.U_=function(e,t,n){const r=on(e);return r.w_(),new po(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Uo.bind(null,e),mo:Ho.bind(null,e),f_:Bo.bind(null,e),g_:Vo.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Oo(e)):(await e.U_.stop(),e.O_.length>0&&(en("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Qo{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const s=Date.now()+n,i=new Qo(e,t,s,r,a);return i.start(n),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cn(ln.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yo(e,t){if(tn("AsyncQueue","".concat(t,": ").concat(e)),Un(e))return new cn(ln.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Jo{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Cn.comparator(t.key,n.key):(e,t)=>Cn.comparator(e.key,t.key),this.keyedMap=Ia(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Jo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Xo{constructor(){this.W_=new $n(Cn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):an():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class $o{constructor(e,t,n,r,a,s,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,a){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new $o(e,t,Jo.emptySet(t),s,n,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&va(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Zo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class el{constructor(){this.queries=tl(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=on(e),r=n.queries;n.queries=tl(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new cn(ln.ABORTED,"Firestore shutting down"))}}function tl(){return new Ta(e=>ya(e),va)}async function nl(e,t){const n=on(e);let r=3;const a=t.query;let s=n.queries.get(a);s?!s.H_()&&t.J_()&&(r=2):(s=new Zo,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(a,!0);break;case 1:s.z_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(e){const n=Yo(e,"Initialization of query '".concat(ba(t.query),"' failed"));return void t.onError(n)}n.queries.set(a,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&il(n)}async function rl(e,t){const n=on(e),r=t.query;let a=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?a=t.J_()?0:1:!s.H_()&&t.J_()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function al(e,t){const n=on(e);let r=!1;for(const a of t){const e=a.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(a)&&(r=!0);t.z_=a}}r&&il(n)}function sl(e,t,n){const r=on(e),a=r.queries.get(t);if(a)for(const s of a.j_)s.onError(n);r.queries.delete(t)}function il(e){e.Y_.forEach(e=>{e.next()})}var ol,ll;(ll=ol||(ol={})).ea="default",ll.Cache="cache";class cl{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new $o(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ol.Cache}}class ul{constructor(e){this.key=e}}class dl{constructor(e){this.key=e}}class hl{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oa(),this.mutatedKeys=Oa(),this.Aa=ka(e),this.Ra=new Jo(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Xo,r=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,s=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=xa(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(i=!0)),f&&(u?(s=s.add(u),a=h?a.add(e):a.delete(e)):(s=s.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),a=a.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:i,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const i=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new $o(this.query,e.Ra,a,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:i}:{wa:i}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oa(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new dl(e))}),this.da.forEach(n=>{e.has(n)||t.push(new ul(n))}),t}ba(e){this.Ta=e.Ts,this.da=Oa();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return $o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class fl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ml{constructor(e){this.key=e,this.va=!1}}class pl{constructor(e,t,n,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ta(e=>ya(e),va),this.Ma=new Map,this.xa=new Set,this.Oa=new $n(Cn.comparator),this.Na=new Map,this.La=new Ai,this.Ba={},this.ka=new Map,this.qa=Ti.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function gl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ll(e);let a;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await yl(r,t,n,!0),a}async function vl(e,t){const n=Ll(e);await yl(n,t,!0,!1)}async function yl(e,t,n,r){const a=await Yi(e.localStore,ma(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await bl(e,t,s,"current"===i,a.resumeToken)),e.isPrimaryClient&&n&&wo(e.remoteStore,a),o}async function bl(e,t,n,r,a){e.Ka=(t,n,r)=>async function(e,t,n,r){let a=t.view.ma(n);a.ns&&(a=await Xi(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,a)}));const s=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(a,e.isPrimaryClient,s,i);return Al(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await Xi(e.localStore,t,!0),i=new hl(t,s.Ts),o=i.ma(s.documents),l=As.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,a),c=i.applyChanges(o,e.isPrimaryClient,l);Al(e,n,c.wa);const u=new fl(t,n,i);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function xl(e,t,n){const r=on(e),a=r.Fa.get(t),s=r.Ma.get(a.targetId);if(s.length>1)return r.Ma.set(a.targetId,s.filter(e=>!va(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Ji(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&ko(r.remoteStore,a.targetId),Cl(r,a.targetId)}).catch(Ln)):(Cl(r,a.targetId),await Ji(r.localStore,a.targetId,!0))}async function wl(e,t){const n=on(e),r=n.Fa.get(t),a=n.Ma.get(r.targetId);n.isPrimaryClient&&1===a.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ko(n.remoteStore,r.targetId))}async function kl(e,t){const n=on(e);try{const e=await function(e,t){const n=on(e),r=t.snapshotVersion;let a=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});a=n.os;const i=[];t.targetChanges.forEach((s,o)=>{const l=a.get(o);if(!l)return;i.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(sr.EMPTY_BYTE_STRING,Tn.min()).withLastLimboFreeSnapshotVersion(Tn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),a=a.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&i.push(n.Ur.updateTargetData(e,c))});let o=Ea(),l=Oa();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),i.push(Gi(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Tn.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));i.push(t)}return Fn.waitFor(i).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=a,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(sn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?sn(r.va):e.removedDocuments.size>0&&(sn(r.va),r.va=!1))}),await Rl(n,e,t)}catch(e){await Ln(e)}}function Sl(e,t,n){const r=on(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const a=r.view.Z_(t);a.snapshot&&e.push(a.snapshot)}),function(e,t){const n=on(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const a of n.j_)a.Z_(t)&&(r=!0)}),r&&il(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tl(e,t,n){const r=on(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Na.get(t),s=a&&a.key;if(s){let e=new $n(Cn.comparator);e=e.insert(s,Rr.newNoDocument(s,Tn.min()));const n=Oa().add(s),a=new js(Tn.min(),new Map,new $n(wn),e,n);await kl(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(t),Pl(r)}else await Ji(r.localStore,t,!1).then(()=>Cl(r,t,n)).catch(Ln)}async function Nl(e,t){const n=on(e),r=t.batch.batchId;try{const e=await function(e,t){const n=on(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const a=n.batch,s=a.keys();let i=Fn.resolve();return s.forEach(e=>{i=i.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);sn(null!==s),t.version.compareTo(s)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),i.next(()=>e.mutationQueue.removeMutationBatch(t,a))}(n,e,t,a).next(()=>a.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Oa();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Il(n,r,null),_l(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rl(n,e)}catch(e){await Ln(e)}}async function El(e,t,n){const r=on(e);try{const e=await function(e,t){const n=on(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(sn(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Il(r,t,n),_l(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rl(r,e)}catch(n){await Ln(n)}}function _l(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Il(e,t,n){const r=on(e);let a=r.Ba[r.currentUser.toKey()];if(a){const e=a.get(t);e&&(n?e.reject(n):e.resolve(),a=a.remove(t)),r.Ba[r.currentUser.toKey()]=a}}function Cl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||jl(e,t)})}function jl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(ko(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Pl(e))}function Al(e,t,n){for(const r of n)r instanceof ul?(e.La.addReference(r.key,t),Dl(e,r)):r instanceof dl?(en("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||jl(e,r.key)):an()}function Dl(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(en("SyncEngine","New document in limbo: "+n),e.xa.add(r),Pl(e))}function Pl(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Cn(En.fromString(t)),r=e.qa.next();e.Na.set(r,new ml(n)),e.Oa=e.Oa.insert(n,r),wo(e.remoteStore,new vi(ma(ua(n.path)),r,"TargetPurposeLimboResolution",Bn.oe))}}async function Rl(e,t,n){const r=on(e),a=[],s=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{i.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const a=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,a?"current":"not-current")}if(e){a.push(e);const t=Ui.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(i),r.Ca.d_(a),await async function(e,t){const n=on(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Fn.forEach(t,t=>Fn.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Fn.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Un(e))throw e;en("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,a=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,a)}}}(r.localStore,s))}async function Ol(e,t){const n=on(e);if(!n.currentUser.isEqual(t)){en("SyncEngine","User change. New user:",t.toKey());const e=await Ki(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new cn(ln.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Rl(n,e.hs)}}function Ml(e,t){const n=on(e),r=n.Na.get(t);if(r&&r.va)return Oa().add(r.key);{let e=Oa();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Ll(e){const t=on(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ml.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tl.bind(null,t),t.Ca.d_=al.bind(null,t.eventManager),t.Ca.$a=sl.bind(null,t.eventManager),t}function Fl(e){const t=on(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Nl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=El.bind(null,t),t}class zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uo(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return qi(this.persistence,new Vi,e.initialUser,this.serializer)}Ga(e){return new Li(zi.Zr,this.serializer)}Wa(e){return new eo}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zl.provider={build:()=>new zl};class Ul{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Sl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ol.bind(null,this.syncEngine),await Ko(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new el}createDatastore(e){const t=uo(e.databaseInfo.databaseId),n=function(e){return new lo(e)}(e.databaseInfo);return function(e,t,n,r){return new go(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,a){return new yo(e,t,n,r,a)}(this.localStore,this.datastore,e.asyncQueue,e=>Sl(this.syncEngine,e,0),no.D()?new no:new to)}createSyncEngine(e,t){return function(e,t,n,r,a,s,i){const o=new pl(e,t,n,r,a,s);return i&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=on(e);en("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await xo(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ul.provider={build:()=>new Ul};class Bl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Vl{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new cn(ln.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=on(e),r={documents:t.map(e=>Xs(n.serializer,e))},a=await n.Lo("BatchGetDocuments",n.serializer.databaseId,En.emptyPath(),r,t.length),s=new Map;a.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){sn(!!t.found),t.found.name,t.found.updateTime;const n=$s(e,t.found.name),r=Gs(t.found.updateTime),a=t.found.createTime?Gs(t.found.createTime):Tn.min(),s=new Dr({mapValue:{fields:t.found.fields}});return Rr.newFoundDocument(n,r,a,s)}(e,t):"missing"in t?function(e,t){sn(!!t.missing),sn(!!t.readTime);const n=$s(e,t.missing),r=Gs(t.readTime);return Rr.newNoDocument(n,r)}(e,t):an()}(n.serializer,e);s.set(t.key.toString(),t)});const i=[];return t.forEach(e=>{const t=s.get(e.toString());sn(!!t),i.push(t)}),i}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new fs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=Cn.fromPath(t);this.mutations.push(new ms(n,this.precondition(n)))}),await async function(e,t){const n=on(e),r={writes:t.map(e=>ai(n.serializer,e))};await n.Mo("Commit",n.serializer.databaseId,En.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw an();t=Tn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new cn(ln.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tn.min())?es.exists(!1):es.updateTime(t):es.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tn.min()))throw new cn(ln.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return es.updateTime(t)}return es.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Hl{constructor(e,t,n,r,a){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=a,this._u=n.maxAttempts,this.t_=new ho(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Vl(this.datastore),t=this.cu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.lu(e)}))}).catch(e=>{this.lu(e)})})}cu(e){try{const t=this.updateFunction(e);return!Vn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ws(t)}return!1}}class ql{constructor(e,t,n,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Jt.UNAUTHENTICATED,this.clientId=xn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async e=>{en("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(en("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Yo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Kl(e,t){e.asyncQueue.verifyOperationInProgress(),en("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ki(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Wl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Gl(e);en("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>qo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>qo(t.remoteStore,n)),e._onlineComponents=t}async function Gl(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){en("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ln.FAILED_PRECONDITION||e.code===ln.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;nn("Error using user provided cache. Falling back to memory cache: "+n),await Kl(e,new zl)}}else en("FirestoreClient","Using default OfflineComponentProvider"),await Kl(e,new zl);return e._offlineComponents}async function Ql(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(en("FirestoreClient","Using user provided OnlineComponentProvider"),await Wl(e,e._uninitializedComponentsProvider._online)):(en("FirestoreClient","Using default OnlineComponentProvider"),await Wl(e,new Ul))),e._onlineComponents}function Yl(e){return Ql(e).then(e=>e.syncEngine)}function Jl(e){return Ql(e).then(e=>e.datastore)}async function Xl(e){const t=await Ql(e),n=t.eventManager;return n.onListen=gl.bind(null,t.syncEngine),n.onUnlisten=xl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wl.bind(null,t.syncEngine),n}function $l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new un;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,a){const s=new Bl({next:o=>{s.Za(),t.enqueueAndForget(()=>rl(e,i));const l=o.docs.has(n);!l&&o.fromCache?a.reject(new cn(ln.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?a.reject(new cn(ln.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(o)},error:e=>a.reject(e)}),i=new cl(ua(n.path),s,{includeMetadataChanges:!0,_a:!0});return nl(e,i)}(await Xl(e),e.asyncQueue,t,n,r)),r.promise}function Zl(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ec=new Map;function tc(e,t,n){if(!n)throw new cn(ln.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function nc(e){if(!Cn.isDocumentKey(e))throw new cn(ln.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function rc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":an()}function ac(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cn(ln.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rc(e);throw new cn(ln.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class sc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new cn(ln.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new cn(ln.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new cn(ln.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zl(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new cn(ln.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new cn(ln.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new cn(ln.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new cn(ln.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new cn(ln.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hn;switch(e.type){case"firstParty":return new gn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new cn(ln.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ec.get(e);t&&(en("ComponentProvider","Removing Datastore"),ec.delete(e),t.terminate())}(this),Promise.resolve()}}function oc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var a;const s=(e=ac(e,ic))._getSettings(),i="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==i&&nn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Jt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[z(JSON.stringify({alg:"none",type:"JWT"})),z(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(a=e._app)||void 0===a?void 0:a.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new cn(ln.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Jt(s)}e._authCredentials=new fn(new dn(t,n))}}class lc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lc(this.firestore,e,this._query)}}class cc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cc(this.firestore,e,this._key)}}class uc extends lc{constructor(e,t,n){super(e,t,ua(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cc(this.firestore,null,new Cn(e))}withConverter(e){return new uc(this.firestore,e,this._path)}}function dc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=ie(e),1===arguments.length&&(t=xn.newId()),tc("doc","path",t),e instanceof ic){const n=En.fromString(t,...r);return nc(n),new cc(e,null,new Cn(n))}{if(!(e instanceof cc||e instanceof uc))throw new cn(ln.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(En.fromString(t,...r));return nc(n),new cc(e.firestore,e instanceof uc?e.converter:null,new Cn(n))}}class hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ho(this,"async_queue_retry"),this.Vu=()=>{const e=co();e&&en("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=co();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=co();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new un;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Un(e))throw e;en("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw tn("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Qo.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&an()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function fc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class mc extends ic{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new hc,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hc(e),this._firestoreClient=void 0,await e}}}function pc(e){if(e._terminated)throw new cn(ln.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gc(e),e._firestoreClient}function gc(e){var t,n,r;const a=e._freezeSettings(),s=function(e,t,n,r){return new fr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Zl(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||(null===(n=a.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new ql(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(sr.fromBase64String(e))}catch(e){throw new cn(ln.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new vc(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new cn(ln.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._methodName=e}}class xc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new cn(ln.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new cn(ln.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wn(this._lat,e._lat)||wn(this._long,e._long)}}class wc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const kc=/^__.*__$/;class Sc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}}class Tc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class Ec{constructor(e,t,n,r,a,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ec(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Nc(this.Cu)&&kc.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _c{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uo(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ec({Cu:e,methodName:t,qu:n,path:In.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ic(e){const t=e._freezeSettings(),n=uo(e._databaseId);return new _c(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cc(e,t,n,r,a){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=e.Qu(s.merge||s.mergeFields?2:0,t,n,a);Mc("Data must be an object, but it was:",i,r);const o=Rc(r,i);let l,c;if(s.merge)l=new rr(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const a=Lc(t,r,n);if(!i.contains(a))throw new cn(ln.INVALID_ARGUMENT,"Field '".concat(a,"' is specified in your field mask but missing from your input data."));Bc(e,a)||e.push(a)}l=new rr(e),c=i.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=i.fieldTransforms;return new Sc(new Dr(o),l,c)}class jc extends bc{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function Ac(e,t,n,r){const a=e.Qu(1,t,n);Mc("Data must be an object, but it was:",a,r);const s=[],i=Dr.empty();Jn(r,(e,r)=>{const o=zc(t,e,n);r=ie(r);const l=a.Nu(o);if(r instanceof jc)s.push(o);else{const e=Pc(r,l);null!=e&&(s.push(o),i.set(o,e))}});const o=new rr(s);return new Tc(i,o,a.fieldTransforms)}function Dc(e,t,n,r,a,s){const i=e.Qu(1,t,n),o=[Lc(t,r,n)],l=[a];if(s.length%2!=0)throw new cn(ln.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(Lc(t,s[h])),l.push(s[h+1]);const c=[],u=Dr.empty();for(let h=o.length-1;h>=0;--h)if(!Bc(c,o[h])){const e=o[h];let t=l[h];t=ie(t);const n=i.Nu(e);if(t instanceof jc)c.push(e);else{const r=Pc(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new rr(c);return new Tc(u,d,i.fieldTransforms)}function Pc(e,t){if(Oc(e=ie(e)))return Mc("Unsupported field value:",t,e),Rc(e,t);if(e instanceof bc)return function(e,t){if(!Nc(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const a of e){let e=Pc(a,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ie(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ua(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Sn.fromDate(e);return{timestampValue:qs(t.serializer,n)}}if(e instanceof Sn){const n=new Sn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qs(t.serializer,n)}}if(e instanceof xc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vc)return{bytesValue:Ks(t.serializer,e._byteString)};if(e instanceof cc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Qs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof wc)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Fa(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(rc(e)))}(e,t)}function Rc(e,t){const n={};return Xn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jn(e,(e,r)=>{const a=Pc(r,t.Mu(e));null!=a&&(n[e]=a)}),{mapValue:{fields:n}}}function Oc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sn||e instanceof xc||e instanceof vc||e instanceof cc||e instanceof bc||e instanceof wc)}function Mc(e,t,n){if(!Oc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=rc(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Lc(e,t,n){if((t=ie(t))instanceof yc)return t._internalPath;if("string"==typeof t)return zc(e,t);throw Uc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fc=new RegExp("[~\\*/\\[\\]]");function zc(e,t,n){if(t.search(Fc)>=0)throw Uc("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new yc(...t.split("."))._internalPath}catch(r){throw Uc("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Uc(e,t,n,r,a){const s=r&&!r.isEmpty(),i=void 0!==a;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(a)),l+=")"),new cn(ln.INVALID_ARGUMENT,o+e+l)}function Bc(e,t){return e.some(e=>e.isEqual(t))}class Vc{constructor(e,t,n,r,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hc extends Vc{data(){return super.data()}}function qc(e,t){return"string"==typeof t?zc(e,t):t instanceof yc?t._internalPath:t._delegate._internalPath}function Kc(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cn(ln.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw an()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Jn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const a=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>lr(e.doubleValue));return new wc(a)}convertGeoPoint(e){return new xc(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hr(e));default:return null}}convertTimestamp(e){const t=or(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=En.fromString(e);sn(gi(n));const r=new mr(n.get(1),n.get(3)),a=new Cn(n.popFirst(5));return r.isEqual(t)||tn("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}function Gc(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qc extends Wc{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cc(this.firestore,null,t)}}class Yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jc extends Vc{constructor(e,t,n,r,a,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(qc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Xc extends Jc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class $c{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Yc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Xc(this._firestore,this._userDataWriter,n.key,n,new Yc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new cn(ln.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Xc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Yc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Xc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Yc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let a=-1,s=-1;return 0!==t.type&&(a=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Zc(t.type),doc:r,oldIndex:a,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Zc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}function eu(e){e=ac(e,cc);const t=ac(e.firestore,mc);return $l(pc(t),e._key).then(n=>su(t,e,n))}class tu extends Wc{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cc(this.firestore,null,t)}}function nu(e,t,n){e=ac(e,cc);const r=ac(e.firestore,mc),a=Gc(e.converter,t,n);return au(r,[Cc(Ic(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,es.none())])}function ru(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,s,i;e=ie(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||fc(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(fc(n[l])){const e=n[l];n[l]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,d,h;if(e instanceof cc)d=ac(e.firestore,mc),h=ua(e._key.path),u={next:t=>{n[l]&&n[l](su(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ac(e,lc);d=ac(t.firestore,mc),h=t._query;const r=new tu(d);u={next:e=>{n[l]&&n[l](new $c(d,r,t,e))},error:n[l+1],complete:n[l+2]},Kc(e._query)}return function(e,t,n,r){const a=new Bl(r),s=new cl(t,a,n);return e.asyncQueue.enqueueAndForget(async()=>nl(await Xl(e),s)),()=>{a.Za(),e.asyncQueue.enqueueAndForget(async()=>rl(await Xl(e),s))}}(pc(d),h,c,u)}function au(e,t){return function(e,t){const n=new un;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Fl(e);try{const e=await function(e,t){const n=on(e),r=Sn.now(),a=t.reduce((e,t)=>e.add(t.key),Oa());let s,i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ea(),l=Oa();return n.cs.getEntries(e,a).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(a=>{s=a;const i=[];for(const e of t){const t=is(e,s.get(e.key).overlayedDocument);null!=t&&i.push(new cs(e.key,t,Pr(t.value.mapValue),es.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)}).next(t=>{i=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:i.batchId,changes:Ca(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new $n(wn)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Rl(r,e.changes),await Oo(r.remoteStore)}catch(e){const t=Yo(e,"Failed to persist write");n.reject(t)}}(await Yl(e),t,n)),n.promise}(pc(e),t)}function su(e,t,n){const r=n.docs.get(t._key),a=new tu(e);return new Jc(e,a,t._key,r,new Yc(n.hasPendingWrites,n.fromCache),t.converter)}const iu={maxAttempts:5};function ou(e,t){if((e=ie(e)).firestore!==t)throw new cn(ln.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class lu extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ic(e)}get(e){const t=ou(e,this._firestore),n=new Qc(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return an();const r=e[0];if(r.isFoundDocument())return new Vc(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Vc(this._firestore,n,t._key,null,t.converter);throw an()})}set(e,t,n){const r=ou(e,this._firestore),a=Gc(r.converter,t,n),s=Cc(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=ou(e,this._firestore);let a;for(var s=arguments.length,i=new Array(s>3?s-3:0),o=3;o<s;o++)i[o-3]=arguments[o];return a="string"==typeof(t=ie(t))||t instanceof yc?Dc(this._dataReader,"Transaction.update",r._key,t,n,i):Ac(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,a),this}delete(e){const t=ou(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ou(e,this._firestore),n=new tu(this._firestore);return super.get(e).then(e=>new Jc(this._firestore,n,t._key,e._document,new Yc(!1,!1),t.converter))}}function cu(e,t,n){e=ac(e,mc);const r=Object.assign(Object.assign({},iu),n);return function(e){if(e.maxAttempts<1)throw new cn(ln.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new un;return e.asyncQueue.enqueueAndForget(async()=>{const a=await Jl(e);new Hl(e.asyncQueue,a,n,t,r).au()}),r.promise}(pc(e),n=>t(new lu(e,n)),r)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xt=e}(wt),gt(new oe("firestore",(e,n)=>{let{instanceIdentifier:r,options:a}=n;const s=e.getProvider("app").getImmediate(),i=new mc(new mn(e.getProvider("auth-internal")),new yn(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cn(ln.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mr(e.options.projectId,t)}(s,r),s);return a=Object.assign({useFetchStreams:t},a),i._setSettings(a),i},"PUBLIC").setMultipleInstances(!0)),Tt(Yt,"4.7.3",e),Tt(Yt,"4.7.3","esm2017")}();function uu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function du(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hu=du,fu=new X("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mu=new ve("@firebase/auth");function pu(e){if(mu.logLevel<=he.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mu.error("Auth (".concat(wt,"): ").concat(e),...n)}}function gu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw xu(e,...n)}function vu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xu(e,...n)}function yu(e,t,n){const r=Object.assign(Object.assign({},hu()),{[t]:n});return new X("auth","Firebase",r).create(t,{appName:e.name})}function bu(e){return yu(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return fu.create(e,...n)}function wu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw xu(t,...r)}}function ku(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pu(t),new Error(t)}function Su(e,t){e||ku(t)}function Tu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Nu(){return"http:"===Eu()||"https:"===Eu()}function Eu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function _u(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Nu()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Su(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(G())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return _u()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cu(e,t){Su(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ju{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ku("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ku("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ku("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Au={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Du=new Iu(3e4,6e4);function Pu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ru(e,t,n,r){return Ou(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let a={},s={};r&&("GET"===t?s=r:a={body:JSON.stringify(r)});const i=te(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},a);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),ju.fetch()(Lu(e,e.config.apiHost,n,i),l)})}async function Ou(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Au),t);try{const t=new zu(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Uu(e,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const t=a.ok?s.errorMessage:s.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Uu(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Uu(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Uu(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw yu(e,o,i);gu(e,o)}}catch(a){if(a instanceof J)throw a;gu(e,"network-request-failed",{message:String(a)})}}async function Mu(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ru(e,t,n,r,a);return"mfaPendingCredential"in s&&gu(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Lu(e,t,n,r){const a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Cu(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}function Fu(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zu{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(vu(this.auth,"network-request-failed")),Du.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uu(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=vu(e,t,r);return a.customData._tokenResponse=n,a}function Bu(e){return void 0!==e&&void 0!==e.enterprise}class Vu{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fu(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Hu(e,t){return Ru(e,"GET","/v2/recaptchaConfig",Pu(e,t))}async function qu(e,t){return Ru(e,"POST","/v1/accounts:lookup",t)}function Ku(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Wu(e){return 1e3*Number(e)}function Gu(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return pu("JWT malformed, contained fewer than 3 sections"),null;try{const e=U(n);return e?JSON.parse(e):(pu("Failed to decode base64 JWT payload"),null)}catch(a){return pu("Caught error parsing JWT payload as JSON",null===a||void 0===a?void 0:a.toString()),null}}function Qu(e){const t=Gu(e);return wu(t,"internal-error"),wu("undefined"!==typeof t.exp,"internal-error"),wu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Yu(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof J&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ju{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Xu{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $u(e){var t;const n=e.auth,r=await e.getIdToken(),a=await Yu(e,qu(n,{idToken:r}));wu(null===a||void 0===a?void 0:a.users.length,n,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const i=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Zu(s.providerUserInfo):[],o=(l=e.providerData,c=i,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Xu(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Zu(e){return e.map(e=>{var{providerId:t}=e,n=uu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wu(e.idToken,"internal-error"),wu("undefined"!==typeof e.idToken,"internal-error"),wu("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Qu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){wu(0!==e.length,"internal-error");const t=Qu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(wu(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await async function(e,t){const n=await Ou(e,{},async()=>{const n=te({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,s=Lu(e,r,"/v1/token","key=".concat(a)),i=await e._getAdditionalHeaders();return i["Content-Type"]="application/x-www-form-urlencoded",ju.fetch()(s,{method:"POST",headers:i,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,s=new ed;return n&&(wu("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(wu("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),a&&(wu("number"===typeof a,"internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ed,this.toJSON())}_performRefresh(){return ku("not implemented")}}function td(e,t){wu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class nd{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,a=uu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ju(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xu(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Yu(this,this.stsTokenManager.getToken(this.auth,e));return wu(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ie(e),r=await n.getIdToken(t),a=Gu(r);wu(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const s="object"===typeof a.firebase?a.firebase:void 0,i=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:a,token:r,authTime:Ku(Wu(a.auth_time)),issuedAtTime:Ku(Wu(a.iat)),expirationTime:Ku(Wu(a.exp)),signInProvider:i||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ie(e);await $u(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(wu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){wu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $u(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yt(this.auth.app))return Promise.reject(bu(this.auth));const e=await this.getIdToken();return await Yu(this,async function(e,t){return Ru(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,a,s,i,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(i=t.tenantId)&&void 0!==i?i:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;wu(y&&k,e,"internal-error");const S=ed.fromJSON(this.name,k);wu("string"===typeof y,e,"internal-error"),td(u,e.name),td(d,e.name),wu("boolean"===typeof b,e,"internal-error"),wu("boolean"===typeof x,e,"internal-error"),td(h,e.name),td(f,e.name),td(m,e.name),td(p,e.name),td(g,e.name),td(v,e.name);const T=new nd({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(T.providerData=w.map(e=>Object.assign({},e))),p&&(T._redirectEventId=p),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ed;r.updateFromServerResponse(t);const a=new nd({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $u(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];wu(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?Zu(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),i=new ed;i.updateFromIdToken(n);const o=new nd({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Xu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length)};return Object.assign(o,l),o}}const rd=new Map;function ad(e){Su(e instanceof Function,"Expected a class definition");let t=rd.get(e);return t?(Su(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rd.set(e,t),t)}class sd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sd.type="NONE";const id=sd;function od(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ld{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=od(this.userKey,r.apiKey,a),this.fullPersistenceKey=od("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nd._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ld(ad(id),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let a=r[0]||ad(id);const s=od(n,e.config.apiKey,e.name);let i=null;for(const c of t)try{const t=await c._get(s);if(t){const n=nd._fromJSON(e,t);c!==a&&(i=n),a=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&o.length?(a=o[0],i&&await a._set(s,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(s)}catch(l){}})),new ld(a,e,n)):new ld(a,e,n)}}function cd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ud(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pd(t))return"Blackberry";if(gd(t))return"Webos";if(dd(t))return"Safari";if((t.includes("chrome/")||hd(t))&&!t.includes("edge/"))return"Chrome";if(md(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ud(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/firefox\//i.test(e)}function dd(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:G()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/crios\//i.test(e)}function fd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/iemobile/i.test(e)}function md(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/android/i.test(e)}function pd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/blackberry/i.test(e)}function gd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/webos/i.test(e)}function vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function yd(){return function(){const e=G();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function bd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return vd(e)||md(e)||gd(e)||pd(e)||/windows phone/i.test(e)||fd(e)}function xd(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cd(G());break;case"Worker":t="".concat(cd(G()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(wt,"/").concat(r)}class wd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(a){r(a)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class kd{constructor(e){var t,n,r,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,a,s,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(a=o.containsUppercaseLetter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Sd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nd(this),this.idTokenSubscription=new Nd(this),this.beforeStateQueue=new wd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ad(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ld.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qu(this,{idToken:e}),n=await nd._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==s||!(null===i||void 0===i?void 0:i.user)||(r=i.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return wu(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yt(this.app))return Promise.reject(bu(this));const t=e?ie(e):null;return t&&wu(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&wu(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yt(this.app)?Promise.reject(bu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yt(this.app)?Promise.reject(bu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ad(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ru(e,"GET","/v2/passwordPolicy",Pu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new kd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new X("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ru(e,"POST","/v2/accounts:revokeToken",Pu(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ad(e)||this._popupRedirectResolver;wu(t,this,"argument-error"),this.redirectPersistenceManager=await ld.create(this,[ad(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let s=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(wu(i,this,"internal-error"),i.then(()=>{s||a(this.currentUser)}),"function"===typeof t){const a=e.addObserver(t,n,r);return()=>{s=!0,a()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wu(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(mu.logLevel<=he.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mu.warn("Auth (".concat(wt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Td(e){return ie(e)}class Nd{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ae(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return wu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _d(e){return Ed.loadJS(e)}function Id(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Cd{constructor(e){this.type="recaptcha-enterprise",this.auth=Td(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const a=window.grecaptcha;Bu(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Hu(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Vu(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(a=>{if(!t&&Bu(window.grecaptcha))n(a,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ed.recaptchaEnterpriseScript;0!==t.length&&(t+=a),_d(t).then(()=>{n(a,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function jd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=new Cd(e);let s;try{s=await a.verify(n)}catch(o){s=await a.verify(n,!0)}const i=Object.assign({},t);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Ad(e,t,n,r){var a;if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await jd(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch(async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await jd(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)})}function Dd(e,t,n){const r=Td(e);wu(r._canInitEmulator,r,"emulator-config-failed"),wu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Pd(t),{host:i,port:o}=function(e){const t=Pd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:Rd(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Rd(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(i).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Rd(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Od{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ku("not implemented")}_getIdTokenResponse(e){return ku("not implemented")}_linkToIdToken(e,t){return ku("not implemented")}_getReauthenticationResolver(e){return ku("not implemented")}}async function Md(e,t){return Ru(e,"POST","/v1/accounts:signUp",t)}async function Ld(e,t){return Mu(e,"POST","/v1/accounts:signInWithPassword",Pu(e,t))}class Fd extends Od{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fd(e,t,"password")}static _fromEmailAndCode(e,t){return new Fd(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ad(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ld);case"emailLink":return async function(e,t){return Mu(e,"POST","/v1/accounts:signInWithEmailLink",Pu(e,t))}(e,{email:this._email,oobCode:this._password});default:gu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ad(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Md);case"emailLink":return async function(e,t){return Mu(e,"POST","/v1/accounts:signInWithEmailLink",Pu(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:gu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zd(e,t){return Mu(e,"POST","/v1/accounts:signInWithIdp",Pu(e,t))}class Ud extends Od{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ud(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,a=uu(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ud(n,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return zd(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zd(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=te(t)}return e}}const Bd={USER_NOT_FOUND:"user-not-found"};class Vd extends Od{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vd({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vd({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mu(e,"POST","/v1/accounts:signInWithPhoneNumber",Pu(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mu(e,"POST","/v1/accounts:signInWithPhoneNumber",Pu(e,t));if(n.temporaryProof)throw Uu(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mu(e,"POST","/v1/accounts:signInWithPhoneNumber",Pu(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Bd)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new Vd({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class Hd{constructor(e){var t,n,r,a,s,i;const o=ne(re(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);wu(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(a=o.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=ne(re(e)).link,n=t?ne(re(t)).deep_link_id:null,r=ne(re(e)).deep_link_id;return(r?ne(re(r)).link:null)||r||n||t||e}(e);try{return new Hd(t)}catch(n){return null}}}class qd{constructor(){this.providerId=qd.PROVIDER_ID}static credential(e,t){return Fd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hd.parseLink(t);return wu(n,"argument-error"),Fd._fromEmailAndCode(e,n.code,n.tenantId)}}qd.PROVIDER_ID="password",qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Kd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wd extends Kd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gd extends Wd{constructor(){super("facebook.com")}static credential(e){return Ud._fromParams({providerId:Gd.PROVIDER_ID,signInMethod:Gd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gd.credentialFromTaggedObject(e)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gd.credential(t.oauthAccessToken)}catch(n){return null}}}Gd.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gd.PROVIDER_ID="facebook.com";class Qd extends Wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ud._fromParams({providerId:Qd.PROVIDER_ID,signInMethod:Qd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qd.credentialFromTaggedObject(e)}static credentialFromError(e){return Qd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qd.credential(n,r)}catch(a){return null}}}Qd.GOOGLE_SIGN_IN_METHOD="google.com",Qd.PROVIDER_ID="google.com";class Yd extends Wd{constructor(){super("github.com")}static credential(e){return Ud._fromParams({providerId:Yd.PROVIDER_ID,signInMethod:Yd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yd.credentialFromTaggedObject(e)}static credentialFromError(e){return Yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Yd.credential(t.oauthAccessToken)}catch(n){return null}}}Yd.GITHUB_SIGN_IN_METHOD="github.com",Yd.PROVIDER_ID="github.com";class Jd extends Wd{constructor(){super("twitter.com")}static credential(e,t){return Ud._fromParams({providerId:Jd.PROVIDER_ID,signInMethod:Jd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Jd.credentialFromTaggedObject(e)}static credentialFromError(e){return Jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jd.credential(n,r)}catch(a){return null}}}Jd.TWITTER_SIGN_IN_METHOD="twitter.com",Jd.PROVIDER_ID="twitter.com";class Xd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await nd._fromIdTokenResponse(e,n,r),s=$d(n);return new Xd({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=$d(n);return new Xd({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function $d(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Zd extends J{constructor(e,t,n,r){var a;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Zd(e,t,n,r)}}function eh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Zd._fromErrorAndOperation(e,n,t,r);throw n})}async function th(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Yu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xd._forOperation(e,"link",r)}async function nh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(yt(r.app))return Promise.reject(bu(r));const a="reauthenticate";try{const s=await Yu(e,eh(r,a,t,e),n);wu(s.idToken,r,"internal-error");const i=Gu(s.idToken);wu(i,r,"internal-error");const{sub:o}=i;return wu(e.uid===o,r,"user-mismatch"),Xd._forOperation(e,a,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&gu(r,"user-mismatch"),s}}async function rh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yt(e.app))return Promise.reject(bu(e));const r="signIn",a=await eh(e,r,t),s=await Xd._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(s.user),s}async function ah(e,t){return rh(Td(e),t)}async function sh(e){const t=Td(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function ih(e,t,n){return yt(e.app)?Promise.reject(bu(e)):ah(ie(e),qd.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&sh(e),t})}new WeakMap;const oh="__sak";class lh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oh,"1"),this.storage.removeItem(oh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ch extends lh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},a=this.storage.getItem(n);yd()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ch.type="LOCAL";const uh=ch;class dh extends lh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dh.type="SESSION";const hh=dh;class fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new fh(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(s).map(async e=>e(t.origin,a)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function mh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}fh.receivers=[];class ph{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise((i,o)=>{const l=mh("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),i(t.data.response);break;default:clearTimeout(c),clearTimeout(a),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function gh(){return window}function vh(){return"undefined"!==typeof gh().WorkerGlobalScope&&"function"===typeof gh().importScripts}const yh="firebaseLocalStorageDb",bh="firebaseLocalStorage",xh="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kh(e,t){return e.transaction([bh],t?"readwrite":"readonly").objectStore(bh)}function Sh(){const e=indexedDB.open(yh,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(bh,{keyPath:xh})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(bh)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(yh);return new wh(e).toPromise()}(),t(await Sh()))})})}async function Th(e,t,n){const r=kh(e,!0).put({[xh]:t,value:n});return new wh(r).toPromise()}function Nh(e,t){const n=kh(e,!0).delete(t);return new wh(n).toPromise()}class Eh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Sh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(vh()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ph(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sh();return await Th(e,oh,"1"),await Nh(e,oh),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Th(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=kh(e,!1).get(t),r=await new wh(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=kh(e,!1).getAll();return new wh(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Eh.type="LOCAL";const _h=Eh;Id("rcb"),new Iu(3e4,6e4);const Ih="recaptcha";async function Ch(e,t,n){var r;const a=await n.verify();try{let s;if(wu("string"===typeof a,e,"argument-error"),wu(n.type===Ih,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){wu("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ru(e,"POST","/v2/accounts/mfaEnrollment:start",Pu(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:a}});return n.phoneSessionInfo.sessionInfo}{wu("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;wu(n,e,"missing-multi-factor-info");const i=await function(e,t){return Ru(e,"POST","/v2/accounts/mfaSignIn:start",Pu(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:a}});return i.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ru(e,"POST","/v1/accounts:sendVerificationCode",Pu(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:a});return t}}finally{n._reset()}}class jh{constructor(e){this.providerId=jh.PROVIDER_ID,this.auth=Td(e)}verifyPhoneNumber(e,t){return Ch(this.auth,e,ie(t))}static credential(e,t){return Vd._fromVerification(e,t)}static credentialFromResult(e){const t=e;return jh.credentialFromTaggedObject(t)}static credentialFromError(e){return jh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vd._fromTokenResponse(n,r):null}}function Ah(e,t){return t?ad(t):(wu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jh.PROVIDER_ID="phone",jh.PHONE_SIGN_IN_METHOD="phone";class Dh extends Od{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ph(e){return rh(e.auth,new Dh(e),e.bypassAuthState)}function Rh(e){const{auth:t,user:n}=e;return wu(n,t,"internal-error"),nh(n,new Dh(e),e.bypassAuthState)}async function Oh(e){const{auth:t,user:n}=e;return wu(n,t,"internal-error"),th(n,new Dh(e),e.bypassAuthState)}class Mh{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:s,type:i}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ph;case"linkViaPopup":case"linkViaRedirect":return Oh;case"reauthViaPopup":case"reauthViaRedirect":return Rh;default:gu(this.auth,"internal-error")}}resolve(e){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lh=new Iu(2e3,1e4);class Fh extends Mh{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,Fh.currentPopupAction&&Fh.currentPopupAction.cancel(),Fh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wu(e,this.auth,"internal-error"),e}async onExecution(){Su(1===this.filter.length,"Popup operations only handle one event");const e=mh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(vu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vu(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Lh.get())};e()}}Fh.currentPopupAction=null;const zh=new Map;class Uh extends Mh{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=zh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Hh(t),r=Vh(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}zh.set(this.auth._key(),e)}return this.bypassAuthState||zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Bh(e,t){zh.set(e._key(),t)}function Vh(e){return ad(e._redirectPersistence)}function Hh(e){return od("pendingRedirect",e.config.apiKey,e.name)}async function qh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yt(e.app))return Promise.reject(bu(e));const r=Td(e),a=Ah(r,t),s=new Uh(r,a,n),i=await s.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class Kh{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Gh(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wh(e))}saveEventToCache(e){this.cachedEventUids.add(Wh(e)),this.lastProcessedEventTime=Date.now()}}function Wh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Gh(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Qh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yh=/^https?/;async function Jh(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ru(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Xh(r))return}catch(n){}gu(e,"unauthorized-domain")}function Xh(e){const t=Tu(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!Yh.test(n))return!1;if(Qh.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const $h=new Iu(3e4,6e4);function Zh(){const e=gh().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ef(e){return new Promise((t,n)=>{var r,a,s;function i(){Zh(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Zh(),n(vu(e,"network-request-failed"))},timeout:$h.get()})}if(null===(a=null===(r=gh().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=gh().gapi)||void 0===s?void 0:s.load)){const t=Id("iframefcb");return gh()[t]=()=>{gapi.load?i():n(vu(e,"network-request-failed"))},_d("".concat(Ed.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw tf=null,e})}let tf=null;const nf=new Iu(5e3,15e3),rf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},af=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sf(e){const t=e.config;wu(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cu(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:wt},a=af.get(e.config.apiHost);a&&(r.eid=a);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(te(r).slice(1))}async function of(e){const t=await function(e){return tf=tf||ef(e),tf}(e),n=gh().gapi;return wu(n,e,"internal-error"),t.open({where:document.body,url:sf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rf,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=vu(e,"network-request-failed"),s=gh().setTimeout(()=>{r(a)},nf.get());function i(){gh().clearTimeout(s),n(t)}t.ping(i).then(i,()=>{r(a)})}))}const lf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function uf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},lf),{width:r.toString(),height:a.toString(),top:s,left:i}),c=G().toLowerCase();n&&(o=hd(c)?"_blank":n),ud(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return vd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:G())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new cf(null);const d=window.open(t||"",o,u);wu(d,e,"popup-blocked");try{d.focus()}catch(h){}return new cf(d)}const df="__/auth/handler",hf="emulator/auth/handler",ff=encodeURIComponent("fac");async function mf(e,t,n,r,a,s){wu(e.config.authDomain,e,"auth-domain-config-required"),wu(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:wt,eventId:a};if(t instanceof Kd){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))i[e]=t}if(t instanceof Wd){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ff,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(df);return Cu(t,hf)}(e),"?").concat(te(o).slice(1)).concat(c)}const pf="webStorageSupport";const gf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hh,this._completeRedirectFn=qh,this._overrideRedirectResult=Bh}async _openPopup(e,t,n,r){var a;Su(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return uf(e,await mf(e,t,n,Tu(),r),mh())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){gh().location.href=e}(await mf(e,t,n,Tu(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Su(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await of(e),n=new Kh(e);return t.register("authEvent",t=>{wu(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pf,{type:pf},n=>{var r;const a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[pf];void 0!==a&&t(!!a),gu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Jh(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bd()||dd()||vd()}};var vf="@firebase/auth",yf="1.7.9";class bf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){wu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xf=K("authIdTokenMaxAge")||300;let wf=null;var kf;Ed={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=vu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},kf="Browser",gt(new oe("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;wu(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:kf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xd(kf)},c=new Sd(r,a,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ad);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),gt(new oe("auth-internal",e=>(e=>new bf(e))(Td(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Tt(vf,yf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(kf)),Tt(vf,yf,"esm2017");const Sf=kt({apiKey:"AIzaSyD4zEy3kb0I6kGiCRAWG2JX_0KtIZy9aNk",authDomain:"absensi-f26de.firebaseapp.com",projectId:"absensi-f26de",storageBucket:"absensi-f26de.firebasestorage.app",messagingSenderId:"840070881737",appId:"1:840070881737:web:8b6b629964fa8fdd13c818",measurementId:"G-XB6F06RTJJ"}),Tf=function(e,t){const n="string"==typeof e?e:t||"(default)",r=vt("object"==typeof e?e:St(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=H(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&oc(r,...e)}return r}(Sf),Nf=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St();const t=vt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Z(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;gu(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:gf,persistence:[_h,uh,hh]}),r=K("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>xf)return;const r=null===t||void 0===t?void 0:t.token;wf!==r&&(wf=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){ie(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){ie(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var a;const s=H("auth");return s&&Dd(n,"http://".concat(s)),n}(Sf),Ef=e=>{if(null===e||void 0===e)return null;if(Array.isArray(e))return e.map(e=>Ef(e)).filter(e=>void 0!==e);if("object"===typeof e&&null!==e){const t={};for(const[n,r]of Object.entries(e)){const e=Ef(r);void 0!==e&&(t[n]=e)}return t}return e},_f={async saveEmployees(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","employees"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Employees saved to Firestore")}catch(t){throw console.error("\u274c Error saving employees:",t),t}},async updateEmployeeTransaction(e){try{if(!e||!e.id)throw new Error("Invalid employee data for update");const t=Ef(e),n=dc(Tf,"attendance","employees");await cu(Tf,async r=>{const a=await r.get(n);if(!a.exists())throw new Error("Document does not exist!");const s=a.data().data||[],i=s.findIndex(t=>t.id===e.id);let o;-1===i?o=[...s,t]:(o=[...s],o[i]=t),r.set(n,{data:o,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Employee ".concat(e.name," updated transactionally"))}catch(t){throw console.error("\u274c Error updating employee transactionally:",t),t}},async getEmployees(){try{const e=await eu(dc(Tf,"attendance","employees"));return e.exists()?e.data():null}catch(e){throw console.error("\u274c Error getting employees:",e),e}},async saveAttentions(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","attentions"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Attentions saved to Firestore")}catch(t){throw console.error("\u274c Error saving attentions:",t),t}},async saveYearlyAttendance(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","yearlyAttendance"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Yearly attendance saved to Firestore")}catch(t){throw console.error("\u274c Error saving yearly attendance:",t),t}},async saveProductivityData(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","productivityData"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Productivity data saved to Firestore")}catch(t){throw console.error("\u274c Error saving productivity data:",t),t}},async saveCurrentPeriod(e,t){try{await nu(dc(Tf,"attendance","currentPeriod"),{currentMonth:e,currentYear:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Current period saved to Firestore")}catch(n){throw console.error("\u274c Error saving current period:",n),n}},onEmployeesChange:e=>ru(dc(Tf,"attendance","employees"),t=>{t.exists()&&(console.log("\ud83d\udd04 Employees updated from Firestore"),e(t.data().data))},e=>{console.error("\u274c Error listening to employees:",e)}),onAttentionsChange:e=>ru(dc(Tf,"attendance","attentions"),t=>{t.exists()&&(console.log("\ud83d\udd04 Attentions updated from Firestore"),e(t.data().data))},e=>{console.error("\u274c Error listening to attentions:",e)}),onYearlyAttendanceChange:e=>ru(dc(Tf,"attendance","yearlyAttendance"),t=>{t.exists()&&(console.log("\ud83d\udd04 Yearly attendance updated from Firestore"),e(t.data().data))},e=>{console.error("\u274c Error listening to yearly attendance:",e)}),onProductivityDataChange:e=>ru(dc(Tf,"attendance","productivityData"),t=>{t.exists()&&(console.log("\ud83d\udd04 Productivity data updated from Firestore"),e(t.data().data))},e=>{console.error("\u274c Error listening to productivity data:",e)}),onCurrentPeriodChange:e=>ru(dc(Tf,"attendance","currentPeriod"),t=>{if(t.exists()){console.log("\ud83d\udd04 Current period updated from Firestore");const n=t.data();e(n.currentMonth,n.currentYear)}},e=>{console.error("\u274c Error listening to current period:",e)}),async saveShiftSchedule(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","shiftSchedule"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Shift schedule saved to Firestore")}catch(t){throw console.error("\u274c Error saving shift schedule:",t),t}},onShiftScheduleChange:e=>ru(dc(Tf,"attendance","shiftSchedule"),t=>{t.exists()&&(console.log("\ud83d\udd04 Shift schedule updated from Firestore"),e(t.data().data))}),async saveOrders(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","orders"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Orders saved to Firestore")}catch(t){throw console.error("\u274c Error saving orders:",t),t}},onOrdersChange:e=>ru(dc(Tf,"attendance","orders"),t=>{t.exists()&&(console.log("\ud83d\udd04 Orders updated from Firestore"),e(t.data().data))}),async saveMbakTasks(e){try{const t=Ef(e);await nu(dc(Tf,"attendance","mbakData"),{data:t,lastUpdated:(new Date).toISOString()}),console.log("\u2705 Mbak tasks saved to Firestore")}catch(t){throw console.error("\u274c Error saving mbak tasks:",t),t}},onMbakTasksChange:e=>ru(dc(Tf,"attendance","mbakData"),t=>{t.exists()&&(console.log("\ud83d\udd04 Mbak tasks updated from Firestore"),e(t.data().data))}),async loadInitialData(){try{var e,t,n,r,a;console.log("\ud83d\udce5 Loading initial data from Firebase...");const[s,i,o,l,c,u,d,h]=await Promise.all([eu(dc(Tf,"attendance","employees")),eu(dc(Tf,"attendance","yearlyAttendance")),eu(dc(Tf,"attendance","productivityData")),eu(dc(Tf,"attendance","attentions")),eu(dc(Tf,"attendance","currentPeriod")),eu(dc(Tf,"attendance","shiftSchedule")),eu(dc(Tf,"attendance","orders")),eu(dc(Tf,"attendance","mbakData"))]),f={employees:s.exists()?s.data().data:null,yearlyAttendance:i.exists()?i.data().data:null,productivityData:o.exists()?o.data().data:null,attentions:l.exists()?l.data().data:null,currentPeriod:c.exists()?{currentMonth:c.data().currentMonth,currentYear:c.data().currentYear}:null,shiftSchedule:u.exists()?u.data().data:null,orders:d.exists()?d.data().data:null,mbakTasks:h.exists()?h.data().data:[]};return console.log("\u2705 Initial data loaded:",{employees:(null===(e=f.employees)||void 0===e?void 0:e.length)||0,hasAttendance:!!f.yearlyAttendance,productivity:(null===(t=f.productivityData)||void 0===t?void 0:t.length)||0,attentions:(null===(n=f.attentions)||void 0===n?void 0:n.length)||0,shiftSchedule:!!f.shiftSchedule,orders:(null===(r=f.orders)||void 0===r?void 0:r.length)||0,mbakTasks:(null===(a=f.mbakTasks)||void 0===a?void 0:a.length)||0}),f}catch(s){return console.error("\u274c Error loading initial data:",s),null}},async addOrderTransaction(e){try{const t=Ef(e),n=dc(Tf,"attendance","orders");await cu(Tf,async e=>{const r=await e.get(n),a=r.exists()&&r.data().data||[];e.set(n,{data:[t,...a],lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Order added via transaction")}catch(t){throw console.error("\u274c Error adding order (transaction):",t),t}},async updateOrderTransaction(e,t){try{const n=Ef(t),r=dc(Tf,"attendance","orders");await cu(Tf,async t=>{const a=await t.get(r);if(!a.exists())throw new Error("Orders document does not exist!");const s=(a.data().data||[]).map(t=>t.id===e?c(c(c({},t),n),{},{updatedAt:(new Date).toISOString()}):t);t.set(r,{data:s,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Order updated via transaction:",e)}catch(n){throw console.error("\u274c Error updating order (transaction):",n),n}},async deleteOrderTransaction(e){try{const t=dc(Tf,"attendance","orders");await cu(Tf,async n=>{const r=await n.get(t);if(!r.exists())return;const a=(r.data().data||[]).filter(t=>t.id!==e);n.set(t,{data:a,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Order deleted via transaction:",e)}catch(t){throw console.error("\u274c Error deleting order (transaction):",t),t}},async addAttentionTransaction(e){try{const t=Ef(e),n=dc(Tf,"attendance","attentions");await cu(Tf,async e=>{const r=await e.get(n),a=r.exists()&&r.data().data||[];e.set(n,{data:[t,...a],lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Attention added via transaction")}catch(t){throw console.error("\u274c Error adding attention (transaction):",t),t}},async updateAttentionTransaction(e,t){try{const n=Ef(t),r=dc(Tf,"attendance","attentions");await cu(Tf,async t=>{const a=await t.get(r);if(!a.exists())throw new Error("Attentions document does not exist!");const s=(a.data().data||[]).map(t=>t.id===e?c(c(c({},t),n),{},{updatedAt:(new Date).toISOString()}):t);t.set(r,{data:s,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Attention updated via transaction:",e)}catch(n){throw console.error("\u274c Error updating attention (transaction):",n),n}},async deleteAttentionTransaction(e){try{const t=dc(Tf,"attendance","attentions");await cu(Tf,async n=>{const r=await n.get(t);if(!r.exists())return;const a=(r.data().data||[]).filter(t=>t.id!==e);n.set(t,{data:a,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Attention deleted via transaction:",e)}catch(t){throw console.error("\u274c Error deleting attention (transaction):",t),t}},async addMbakTaskTransaction(e){try{const t=Ef(e),n=dc(Tf,"attendance","mbakData");await cu(Tf,async e=>{const r=await e.get(n),a=r.exists()&&r.data().data||[];e.set(n,{data:[t,...a],lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Mbak task added via transaction")}catch(t){throw console.error("\u274c Error adding mbak task (transaction):",t),t}},async updateMbakTaskTransaction(e,t){try{const n=Ef(t),r=dc(Tf,"attendance","mbakData");await cu(Tf,async t=>{const a=await t.get(r);if(!a.exists())throw new Error("Mbak tasks document does not exist!");const s=(a.data().data||[]).map(t=>t.id===e?c(c(c({},t),n),{},{updatedAt:(new Date).toISOString()}):t);t.set(r,{data:s,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Mbak task updated via transaction:",e)}catch(n){throw console.error("\u274c Error updating mbak task (transaction):",n),n}},async deleteMbakTaskTransaction(e){try{const t=dc(Tf,"attendance","mbakData");await cu(Tf,async n=>{const r=await n.get(t);if(!r.exists())return;const a=(r.data().data||[]).filter(t=>t.id!==e);n.set(t,{data:a,lastUpdated:(new Date).toISOString()})}),console.log("\u2705 Mbak task deleted via transaction:",e)}catch(t){throw console.error("\u274c Error deleting mbak task (transaction):",t),t}}},If={async unlockApp(e,t){try{const n=await ih(Nf,e,t);return console.log("\u2705 App unlocked:",n.user.email),{success:!0,user:n.user}}catch(n){return console.error("\u274c Unlock error:",n.message),{success:!1,error:n.message}}},async loginAdmin(e,t){try{const n=await ih(Nf,e,t);return console.log("\u2705 Admin logged in:",n.user.email),{success:!0,user:n.user}}catch(n){return console.error("\u274c Login error:",n.message),{success:!1,error:n.message}}},async logoutAdmin(){try{return await function(e){return ie(e).signOut()}(Nf),console.log("\u2705 Admin logged out"),{success:!0}}catch(e){return console.error("\u274c Logout error:",e.message),{success:!1,error:e.message}}},onAuthStateChange:e=>function(e,t,n,r){return ie(e).onAuthStateChanged(t,n,r)}(Nf,t=>{e(t)}),getCurrentUser:()=>Nf.currentUser},Cf=[{id:1,name:"Desta",baseSalary:8e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!0,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,izinTime:null,izinHistory:[],completedTasksHistory:[],isBackup:!0},{id:2,name:"Ariel",baseSalary:7e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]},{id:3,name:"Robert",baseSalary:65e5,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]}],jf=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],Af={PENDING:"pending",PROCESS:"process",COMPLETED:"completed"},Df={wa:{label:"WhatsApp",color:"from-blue-600 to-blue-500",icon:"MessageSquare"},tele:{label:"Telegram",color:"from-blue-600 to-blue-500",icon:"MessageSquare"},shopee_media:{label:"Shopee Media Booster",color:"from-blue-700 to-blue-500",icon:"ShoppingCart"},shopee_acc:{label:"Shopee AccStorageCom",color:"from-blue-700 to-blue-500",icon:"ShoppingCart"},shopee_blackpacket:{label:"Shopee BlackPacket",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_blackvault:{label:"Shopee Black Vault",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_digitalfix:{label:"Shopee Digital Fix",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_hiddenreach:{label:"Shopee HiddenReach",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_quickauth:{label:"Shopee QuickAuth",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_shadowboost:{label:"Shopee ShadowBoost",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"},shopee_underground:{label:"Shopee Underground",color:"from-orange-600 to-orange-400",icon:"ShoppingCart"}},Pf={low:{label:"Low",color:"bg-slate-800/60 text-slate-200 border border-white/10",icon:"\u25cf"},medium:{label:"Medium",color:"bg-blue-900/35 text-blue-200 border border-blue-500/20",icon:"\u25cf\u25cf"},high:{label:"High",color:"bg-blue-800/45 text-blue-100 border border-blue-400/25",icon:"\u25cf\u25cf\u25cf"},urgent:{label:"Urgent",color:"bg-blue-700/55 text-white border border-blue-300/30",icon:"\ud83d\udd25"}},Rf={pending:{label:"Pending",color:"bg-slate-800/60 text-slate-200 border-slate-700"},process:{label:"Diproses",color:"bg-blue-900/35 text-blue-200 border-blue-500/25"},completed:{label:"Selesai",color:"bg-blue-800/35 text-blue-100 border-blue-400/25"}},Of={pagi:{start:9,end:17,maxCheckIn:10,name:"Shift Pagi",emoji:"\ud83c\udf05",color:"from-blue-600 to-blue-500"},malam:{start:17,end:1,maxCheckIn:18,name:"Shift Malam",emoji:"\ud83c\udf19",color:"from-blue-700 to-blue-500"}},Mf={dark:{name:"Midnight",icon:"Moon",bg:"from-slate-950 via-slate-900 to-blue-950",card:"bg-slate-900/60 text-white backdrop-blur-md !border-0",nav:"bg-slate-950/60 backdrop-blur-md",navActive:"bg-gradient-to-r from-blue-700 to-blue-500 text-white shadow-lg",navInactive:"text-slate-200 hover:bg-white/5",badge:"bg-slate-800/60 !border-0",text:"text-white",subtext:"text-slate-300",input:"bg-slate-950/40 text-white",header:"from-blue-700 to-slate-900",accent:"bg-gradient-to-r from-blue-700 to-blue-500",accentHover:"hover:from-blue-600 hover:to-blue-500",accentHex:"#3b82f6",accentText:"text-blue-300",accentTextStrong:"text-blue-200",accentTextHover:"hover:text-blue-300",accentSoftBg:"bg-blue-950/40",accentSoftBorder:"border-transparent",accentDot:"bg-blue-500",accentDotMuted:"bg-blue-400",accentDotSoft:"bg-blue-300",primary:"bg-blue-600",primaryHover:"hover:bg-blue-700",primarySoftBg:"bg-blue-950/40",primarySoftHover:"hover:bg-blue-900/40",primarySoftText:"text-blue-200",primarySoftBorder:"border-transparent",focusBorder:"focus:border-blue-500/40",focusRing:"focus:ring-blue-500/30",ringAccent:"ring-0",accentFill:"fill-blue-300",borderColor:"border-white/10",muted:"bg-slate-800/50",mutedText:"text-slate-400",progressTrack:"bg-white/10",shadow:"shadow-xl"},neo:{name:"Neo-Brutal",icon:"Palette",bg:"from-yellow-200 via-fuchsia-200 to-cyan-200",card:"bg-white text-slate-900 border-2 border-black",nav:"bg-white",navActive:"bg-black text-white border-2 border-black",navInactive:"text-slate-900 hover:bg-black/5 border-2 border-transparent",badge:"bg-white text-slate-900 border-2 border-black",text:"text-slate-900",subtext:"text-slate-700",input:"bg-white text-slate-900",header:"from-black via-fuchsia-600 to-cyan-500",accent:"bg-fuchsia-600",accentHover:"hover:bg-fuchsia-500",accentHex:"#c026d3",accentText:"text-fuchsia-700",accentTextStrong:"text-fuchsia-800",accentTextHover:"hover:text-fuchsia-800",accentSoftBg:"bg-fuchsia-100",accentSoftBorder:"border-black",accentDot:"bg-fuchsia-600",accentDotMuted:"bg-fuchsia-500",accentDotSoft:"bg-fuchsia-400",primary:"bg-black",primaryHover:"hover:bg-slate-900",primarySoftBg:"bg-white",primarySoftHover:"hover:bg-black/5",primarySoftText:"text-slate-900",primarySoftBorder:"border-black",focusBorder:"focus:border-black",focusRing:"focus:ring-black",ringAccent:"ring-black",accentFill:"fill-fuchsia-600",borderColor:"border-black",muted:"bg-slate-200",mutedText:"text-slate-500",progressTrack:"bg-black/10",shadow:"shadow-[4px_4px_0_0_rgba(0,0,0,1)]"},light:{name:"Carbon",icon:"Sun",bg:"from-slate-950 via-slate-900 to-slate-800",card:"bg-slate-900/55 text-white backdrop-blur-md !border-0",nav:"bg-slate-950/60 backdrop-blur-md",navActive:"bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg",navInactive:"text-slate-200 hover:bg-white/5",badge:"bg-slate-800/55 !border-0",text:"text-white",subtext:"text-slate-300",input:"bg-slate-950/40 text-white",header:"from-blue-600 to-slate-900",accent:"bg-gradient-to-r from-blue-600 to-blue-500",accentHover:"hover:from-blue-500 hover:to-blue-400",accentHex:"#3b82f6",accentText:"text-blue-300",accentTextStrong:"text-blue-200",accentTextHover:"hover:text-blue-300",accentSoftBg:"bg-blue-950/35",accentSoftBorder:"border-transparent",accentDot:"bg-blue-500",accentDotMuted:"bg-blue-400",accentDotSoft:"bg-blue-300",primary:"bg-blue-600",primaryHover:"hover:bg-blue-700",primarySoftBg:"bg-blue-950/35",primarySoftHover:"hover:bg-blue-900/35",primarySoftText:"text-blue-200",primarySoftBorder:"border-transparent",focusBorder:"focus:border-blue-500/40",focusRing:"focus:ring-blue-500/30",accentFill:"fill-blue-300",borderColor:"border-white/10",muted:"bg-slate-800/50",mutedText:"text-slate-400",progressTrack:"bg-white/10",shadow:"shadow-xl"},classic:{name:"Original",icon:"Palette",bg:"from-slate-950 via-slate-900 to-emerald-950",card:"bg-slate-900/60 text-white backdrop-blur-md !border-0",nav:"bg-slate-950/60 backdrop-blur-md",navActive:"bg-gradient-to-r from-emerald-600 to-teal-500 text-white shadow-lg",navInactive:"text-slate-200 hover:bg-white/5",badge:"bg-slate-800/60 !border-0",text:"text-white",subtext:"text-slate-300",input:"bg-slate-950/40 text-white",header:"from-emerald-600 to-slate-900",accent:"bg-gradient-to-r from-emerald-600 to-teal-500",accentHover:"hover:from-emerald-500 hover:to-teal-400",accentHex:"#10b981",accentText:"text-emerald-300",accentTextStrong:"text-emerald-200",accentTextHover:"hover:text-emerald-300",accentSoftBg:"bg-emerald-950/40",accentSoftBorder:"border-transparent",accentDot:"bg-emerald-500",accentDotMuted:"bg-emerald-400",accentDotSoft:"bg-emerald-300",primary:"bg-emerald-600",primaryHover:"hover:bg-emerald-700",primarySoftBg:"bg-emerald-950/40",primarySoftHover:"hover:bg-emerald-900/35",primarySoftText:"text-emerald-200",primarySoftBorder:"border-transparent",focusBorder:"focus:border-emerald-500/40",focusRing:"focus:ring-emerald-500/30",accentFill:"fill-emerald-300",borderColor:"border-white/10",muted:"bg-slate-800/50",mutedText:"text-slate-400",progressTrack:"bg-white/10",shadow:"shadow-xl"},ocean:{hidden:!0,name:"Navy",icon:"Palette",bg:"from-slate-950 via-blue-950 to-slate-900",card:"bg-slate-900/55 text-white backdrop-blur-md !border-0",nav:"bg-slate-950/60 backdrop-blur-md",navActive:"bg-gradient-to-r from-blue-700 to-blue-500 text-white shadow-lg",navInactive:"text-slate-200 hover:bg-white/5",badge:"bg-blue-950/25 !border-0",text:"text-white",subtext:"text-slate-300",input:"bg-slate-950/40 text-white",header:"from-blue-700 to-slate-900",accent:"bg-gradient-to-r from-blue-700 to-blue-500",accentHover:"hover:from-blue-600 hover:to-blue-500",accentHex:"#3b82f6",accentText:"text-blue-300",accentTextStrong:"text-blue-200",accentTextHover:"hover:text-blue-300",accentSoftBg:"bg-blue-950/40",accentSoftBorder:"border-transparent",accentDot:"bg-blue-500",accentDotMuted:"bg-blue-400",accentDotSoft:"bg-blue-300",primary:"bg-blue-600",primaryHover:"hover:bg-blue-700",primarySoftBg:"bg-blue-950/40",primarySoftHover:"hover:bg-blue-900/40",primarySoftText:"text-blue-200",primarySoftBorder:"border-transparent",focusBorder:"focus:border-blue-500/40",focusRing:"focus:ring-blue-500/30",accentFill:"fill-blue-300",borderColor:"border-white/10",muted:"bg-slate-800/50",mutedText:"text-slate-400",progressTrack:"bg-white/10",shadow:"shadow-xl"},sunset:{hidden:!0,name:"Obsidian",icon:"Palette",bg:"from-black via-slate-950 to-blue-950",card:"bg-slate-900/60 text-white backdrop-blur-md !border-0",nav:"bg-slate-950/60 backdrop-blur-md",navActive:"bg-gradient-to-r from-blue-700 to-blue-500 text-white shadow-lg",navInactive:"text-slate-200 hover:bg-white/5",badge:"bg-slate-800/60 !border-0",text:"text-white",subtext:"text-slate-300",input:"bg-slate-950/40 text-white",header:"from-blue-700 to-slate-900",accent:"bg-gradient-to-r from-blue-700 to-blue-500",accentHover:"hover:from-blue-600 hover:to-blue-500",accentHex:"#3b82f6",accentText:"text-blue-300",accentTextStrong:"text-blue-200",accentTextHover:"hover:text-blue-300",accentSoftBg:"bg-blue-950/40",accentSoftBorder:"border-transparent",accentDot:"bg-blue-500",accentDotMuted:"bg-blue-400",accentDotSoft:"bg-blue-300",primary:"bg-blue-600",primaryHover:"hover:bg-blue-700",primarySoftBg:"bg-blue-950/40",primarySoftHover:"hover:bg-blue-900/40",primarySoftText:"text-blue-200",primarySoftBorder:"border-transparent",focusBorder:"focus:border-blue-500/40",focusRing:"focus:ring-blue-500/30",accentFill:"fill-blue-300",borderColor:"border-white/10",muted:"bg-slate-800/50",mutedText:"text-slate-400",progressTrack:"bg-white/10",shadow:"shadow-xl"}},Lf={SHIFT_SCHEDULE_WEEK:"shiftScheduleWeek",THEME:"theme",LAST_ACTIVE_PAGE:"lastActivePage"},Ff=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{current:!1},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=null===a||void 0===a?void 0:a.startSaveOperation,i=null===a||void 0===a?void 0:a.endSaveOperation,[o,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({username:"",platform:"wa",description:"",quantity:1,status:Af.PENDING,priority:"medium",dueDate:""}),[m,p]=(0,r.useState)("all"),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)("all"),x=(0,r.useCallback)(e=>{l(e),d(!0)},[]),w=(0,r.useCallback)(async()=>{var r;if(!u)return console.warn("\u26a0\ufe0f Orders not loaded yet - please wait"),null===e||void 0===e||e("\u26a0\ufe0f Mohon tunggu data dimuat terlebih dahulu...","warning"),!1;if(!h.username.trim()||!h.description.trim())return null===e||void 0===e||e("\u26a0\ufe0f Username dan deskripsi harus diisi!","warning"),!1;const a=c(c({id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))},h),{},{createdAt:(new Date).toISOString(),createdBy:(null===(r=t.find(e=>e.isAdmin))||void 0===r?void 0:r.name)||"Admin",updatedAt:(new Date).toISOString(),completedAt:null,notes:[]}),d=[a,...o];if(l(d),n.current)console.log("\u23ed\ufe0f Skipped save - syncing from Firebase");else{s&&s("Orders: Tambah");try{await _f.addOrderTransaction(a),console.log("\ud83d\udcbe ORDER ADDED VIA TRANSACTION:",{count:d.length,timestamp:(new Date).toISOString(),latestOrder:{id:a.id,username:a.username,status:a.status}})}catch(m){console.error("\u274c Error saving order:",m),null===e||void 0===e||e("\u26a0\ufe0f Gagal menyimpan order ke database!","error")}finally{i&&i("Orders: Tambah")}}return f({username:"",platform:"wa",description:"",quantity:1,status:Af.PENDING,priority:"medium",dueDate:""}),null===e||void 0===e||e("\u2705 Order dari ".concat(a.username," berhasil ditambahkan!"),"success"),!0},[h,t,e,o,u,n]),k=(0,r.useCallback)(async(t,r)=>{if(!u)return void console.warn("\u26a0\ufe0f Orders not loaded yet - cannot update");const a=o.map(e=>e.id===t?c(c(c({},e),r),{},{updatedAt:(new Date).toISOString()}):e);if(l(a),n.current)console.log("\u23ed\ufe0f Skipped save - syncing from Firebase");else{s&&s("Orders: Update");try{await _f.updateOrderTransaction(t,r),console.log("\ud83d\udcbe ORDER UPDATED VIA TRANSACTION:",{count:a.length,updatedOrderId:t,timestamp:(new Date).toISOString()})}catch(d){console.error("\u274c Error updating order:",d),null===e||void 0===e||e("\u26a0\ufe0f Gagal update order ke database!","error")}finally{i&&i("Orders: Update")}}null===e||void 0===e||e("\u2705 Order berhasil diupdate!","success")},[e,o,u,n]),S=(0,r.useCallback)(async function(r,a){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!u)return void console.warn("\u26a0\ufe0f Orders not loaded yet - cannot update status");const h=o.map(e=>{if(e.id===r){const r={status:a,updatedAt:(new Date).toISOString()};if(a===Af.COMPLETED&&(r.completedAt=(new Date).toISOString()),"process"===a&&d.trim()){var n;const a={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:d,createdAt:(new Date).toISOString(),createdBy:(null===(n=t.find(e=>e.isAdmin))||void 0===n?void 0:n.name)||"Admin"};r.notes=[...e.notes||[],a]}return c(c({},e),r)}return e});if(l(h),n.current)console.log("\u23ed\ufe0f Skipped save - syncing from Firebase");else{s&&s("Orders: Status");try{var f,m;const e=c(c({status:a,updatedAt:(new Date).toISOString()},a===Af.COMPLETED?{completedAt:(new Date).toISOString()}:{}),"process"===a&&d.trim()?{notes:[...(null===(f=o.find(e=>e.id===r))||void 0===f?void 0:f.notes)||[],{id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:d,createdAt:(new Date).toISOString(),createdBy:(null===(m=t.find(e=>e.isAdmin))||void 0===m?void 0:m.name)||"Admin"}]}:{});await _f.updateOrderTransaction(r,e),console.log("\ud83d\udcbe ORDER STATUS UPDATED VIA TRANSACTION:",{count:h.length,orderId:r,newStatus:a,timestamp:(new Date).toISOString()})}catch(y){console.error("\u274c Error updating order status:",y),null===e||void 0===e||e("\u26a0\ufe0f Gagal update status ke database!","error")}finally{i&&i("Orders: Status")}}const p="pending"===a?"Pending":"process"===a?"Sedang Diproses":"Selesai";if("process"===a){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.value=800,t.type="sine",n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(b){console.log("\ud83d\udd07 Sound notification not supported")}const t=o.find(e=>e.id===r);var g;if(null===e||void 0===e||e("\ud83d\ude80 Order dari ".concat((null===t||void 0===t?void 0:t.username)||"customer"," MULAI DIPROSES!"),"info"),console.log("\ud83d\udd14 Attempting browser notification, permission:",Notification.permission),"Notification"in window&&"granted"===Notification.permission)try{var v;console.log("\u2705 Creating browser notification...");const e=new Notification("\ud83d\ude80 ORDER MULAI DIPROSES!",{body:"".concat((null===t||void 0===t?void 0:t.username)||"Customer"," - ").concat((null===t||void 0===t?void 0:t.description)||"Order baru","\nPlatform: ").concat((null===t||void 0===t||null===(v=t.platform)||void 0===v?void 0:v.toUpperCase())||"N/A"),icon:"/logo192.png",badge:"/logo192.png",tag:"order-processing",requireInteraction:!0,silent:!1});console.log("\u2705 Browser notification created"),setTimeout(()=>e.close(),1e4),e.onclick=()=>{window.focus(),e.close()}}catch(b){console.error("\u26a0\ufe0f Browser notification error:",b)}else console.warn("\u26a0\ufe0f Browser notification not available:",{hasNotification:"Notification"in window,permission:null===(g=Notification)||void 0===g?void 0:g.permission})}else null===e||void 0===e||e("\u2705 Order diupdate ke ".concat(p,"!"),"success")},[e,o,t,u,n]),T=(0,r.useCallback)(async t=>{if(u){if(window.confirm("Yakin ingin menghapus order ini?")){const a=o.filter(e=>e.id!==t);if(l(a),n.current)console.log("\u23ed\ufe0f Skipped save - syncing from Firebase");else{s&&s("Orders: Hapus");try{await _f.deleteOrderTransaction(t),console.log("\ud83d\udcbe ORDER DELETED VIA TRANSACTION:",{count:a.length,deletedOrderId:t,timestamp:(new Date).toISOString()})}catch(r){console.error("\u274c Error deleting order:",r),null===e||void 0===e||e("\u26a0\ufe0f Gagal hapus order dari database!","error")}finally{i&&i("Orders: Hapus")}}null===e||void 0===e||e("\u2705 Order berhasil dihapus!","success")}}else console.warn("\u26a0\ufe0f Orders not loaded yet - cannot delete")},[e,o,u,n]),N=(0,r.useCallback)(async(r,a)=>{if(!u)return void console.warn("\u26a0\ufe0f Orders not loaded yet - cannot add note");if(!a.trim())return;const d=o.map(e=>{if(e.id===r){var n;const r={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:a,createdAt:(new Date).toISOString(),createdBy:(null===(n=t.find(e=>e.isAdmin))||void 0===n?void 0:n.name)||"Admin"};return c(c({},e),{},{notes:[...e.notes||[],r],updatedAt:(new Date).toISOString()})}return e});if(l(d),n.current)console.log("\u23ed\ufe0f Skipped save - syncing from Firebase");else{s&&s("Orders: Catatan");try{var h;const e=o.find(e=>e.id===r),n={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:a,createdAt:(new Date).toISOString(),createdBy:(null===(h=t.find(e=>e.isAdmin))||void 0===h?void 0:h.name)||"Admin"};await _f.updateOrderTransaction(r,{notes:[...(null===e||void 0===e?void 0:e.notes)||[],n]}),console.log("\u2705 Note added via transaction")}catch(f){console.error("\u274c Error adding note:",f)}finally{i&&i("Orders: Catatan")}}null===e||void 0===e||e("\u2705 Catatan berhasil ditambahkan!","success")},[t,e,o,u,n]),E=o.filter(e=>{if("all"!==m&&e.status!==m)return!1;if("all"!==y&&e.platform!==y)return!1;if(g.trim()){const t=g.toLowerCase(),n=e.username.toLowerCase().includes(t),r=e.description.toLowerCase().includes(t);if(!n&&!r)return!1}return!0}),_={total:o.length,pending:o.filter(e=>e.status===Af.PENDING).length,process:o.filter(e=>"process"===e.status).length,completed:o.filter(e=>e.status===Af.COMPLETED).length,overdue:o.filter(e=>!(e.status===Af.COMPLETED||!e.dueDate)&&new Date(e.dueDate)<new Date).length};return{orders:o,setOrders:x,isOrdersLoaded:u,orderForm:h,setOrderForm:f,orderFilter:m,setOrderFilter:p,orderSearch:g,setOrderSearch:v,orderPlatformFilter:y,setOrderPlatformFilter:b,filteredOrders:E,stats:_,addOrder:w,updateOrder:k,updateOrderStatus:S,deleteOrder:T,addOrderNote:N}},zf=h("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Uf=h("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Bf=h("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Vf=h("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Hf=h("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),qf=h("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Kf=h("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var Wf=n(579);const Gf=r.memo(e=>{let{currentTheme:t,ordersHook:n,showAddForm:a,setShowAddForm:s,expandedOrder:i,setExpandedOrder:o,newNote:l,setNewNote:u}=e;const{orderForm:d,setOrderForm:h,orderFilter:f,setOrderFilter:m,orderSearch:p,setOrderSearch:g,orderPlatformFilter:y,setOrderPlatformFilter:k,filteredOrders:S,stats:N,addOrder:E,updateOrderStatus:_,deleteOrder:I,addOrderNote:C}=n,[A,D]=(0,r.useState)(!1),[P,O]=(0,r.useState)(""),[M,L]=(0,r.useState)(null),[F,z]=(0,r.useState)(!1);return(0,Wf.jsxs)("div",{className:"space-y-6",children:[(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-4 sm:p-6 mb-6"),children:[(0,Wf.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"".concat(t.accent," border-2 ").concat(t.borderColor," p-2 sm:p-2.5 shadow-lg"),children:(0,Wf.jsx)(zf,{className:"text-white",size:20})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h1",{className:"text-xl sm:text-2xl font-bold ".concat(t.text),children:"ORDERS MANAGEMENT"}),(0,Wf.jsx)("p",{className:"text-[10px] sm:text-xs ".concat(t.subtext),children:"Lacak dan kelola pesanan pelanggan"})]})]}),(0,Wf.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl ".concat(t.accent," ").concat(t.accentHover," text-white transition-all ").concat(t.shadow," font-bold text-sm"),children:[(0,Wf.jsx)(b,{size:18}),"Tambah Order"]})]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(zf,{size:16,className:t.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(t.subtext),children:"Total"})]}),(0,Wf.jsx)("p",{className:"text-2xl font-bold ".concat(t.text),children:N.total})]}),(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 border-white/10"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(j,{size:16,className:t.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(t.subtext),children:"Pending"})]}),(0,Wf.jsx)("p",{className:"text-2xl font-bold ".concat(t.accentTextStrong),children:N.pending})]}),(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(Uf,{size:16,className:t.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(t.subtext),children:"Diproses"})]}),(0,Wf.jsx)("p",{className:"text-2xl font-bold ".concat(t.accentTextStrong),children:N.process})]}),(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(x,{size:16,className:t.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(t.subtext),children:"Selesai"})]}),(0,Wf.jsx)("p",{className:"text-2xl font-bold ".concat(t.accentTextStrong),children:N.completed})]}),N.overdue>0&&(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(Bf,{size:16,className:t.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(t.subtext),children:"Terlambat"})]}),(0,Wf.jsx)("p",{className:"text-2xl font-bold ".concat(t.accentTextStrong),children:N.overdue})]})]})]}),a&&(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:[(0,Wf.jsx)("h2",{className:"text-lg font-bold ".concat(t.text," mb-4"),children:"Tambah Order Baru"}),(0,Wf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Username Buyer"}),(0,Wf.jsx)("input",{type:"text",value:d.username,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{username:e.target.value}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),placeholder:"Masukkan username buyer",autoComplete:"off",className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder)})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Platform"}),(0,Wf.jsx)("select",{value:d.platform,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{platform:e.target.value}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder),children:Object.entries(Df).map(e=>{let[t,n]=e;return(0,Wf.jsx)("option",{value:t,children:n.label},t)})})]}),(0,Wf.jsxs)("div",{className:"md:col-span-2",children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Deskripsi"}),(0,Wf.jsx)("textarea",{value:d.description,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{description:e.target.value}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),placeholder:"Deskripsi orderan...",rows:"3",autoComplete:"off",className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder)})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Quantity"}),(0,Wf.jsx)("input",{type:"number",min:"1",value:d.quantity,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{quantity:parseInt(e.target.value)||1}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),placeholder:"Jumlah",autoComplete:"off",className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder)})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Prioritas"}),(0,Wf.jsxs)("select",{value:d.priority,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{priority:e.target.value}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder),children:[(0,Wf.jsx)("option",{value:"low",children:"Low"}),(0,Wf.jsx)("option",{value:"medium",children:"Medium"}),(0,Wf.jsx)("option",{value:"high",children:"High"}),(0,Wf.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-2"),children:"Due Date (Opsional)"}),(0,Wf.jsx)("input",{type:"date",value:d.dueDate,onChange:e=>{e.stopPropagation(),h(c(c({},d),{},{dueDate:e.target.value}))},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"w-full px-4 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder)})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Wf.jsxs)("button",{type:"button",onClick:()=>{E()&&s(!1)},className:"flex items-center gap-2 px-5 py-2 rounded-lg ".concat(t.accent," ").concat(t.accentHover," text-white transition-all ").concat(t.shadow," font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(x,{size:16}),"Simpan Order"]}),(0,Wf.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-5 py-2 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"})]})]},"add-order-form"),(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-4 sm:p-6 mb-6 relative z-30"),children:(0,Wf.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Wf.jsxs)("div",{className:"flex-1 relative",children:[(0,Wf.jsx)(Vf,{className:"absolute left-3 top-1/2 -translate-y-1/2 ".concat(t.subtext),size:18}),(0,Wf.jsx)("input",{type:"text",placeholder:"Cari order berdasarkan username atau deskripsi...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border-2 ".concat(t.input," focus:outline-none focus:border-blue-500 transition-all text-sm")})]}),(0,Wf.jsxs)("div",{className:"relative",children:[(0,Wf.jsxs)("button",{onClick:()=>z(!F),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl border-2 font-bold text-sm transition-all whitespace-nowrap ".concat("all"!==f||"all"!==y?"".concat(t.accent," text-white border-transparent shadow-md"):"".concat(t.badge," ").concat(t.borderColor," border-opacity-30")),children:[(0,Wf.jsx)(Hf,{size:18}),"Filter",("all"!==f||"all"!==y)&&(0,Wf.jsx)("span",{className:"flex items-center justify-center w-5 h-5 bg-white text-blue-600 rounded-full text-[10px]",children:("all"!==f?1:0)+("all"!==y?1:0)})]}),F&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>z(!1)}),(0,Wf.jsxs)("div",{className:"absolute right-0 mt-2 w-72 sm:w-80 bg-slate-950 border-2 border-slate-700 shadow-[0_0_50px_-12px_rgba(0,0,0,0.5)] rounded-2xl z-50 p-4 animate-in fade-in zoom-in duration-200",children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-white/10",children:[(0,Wf.jsx)("h3",{className:"font-bold ".concat(t.text),children:"Filter Orders"}),(0,Wf.jsx)("button",{onClick:()=>z(!1),className:t.subtext,children:(0,Wf.jsx)(v,{size:18})})]}),(0,Wf.jsxs)("div",{className:"space-y-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:"text-[10px] uppercase tracking-wider font-bold ".concat(t.subtext," mb-2"),children:"Status"}),(0,Wf.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","pending","process","completed"].map(e=>(0,Wf.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1.5 rounded-lg border text-xs font-bold transition-all ".concat(f===e?"".concat(t.accent," text-white border-transparent"):"".concat(t.badge," ").concat(t.borderColor," border-opacity-30")),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:"text-[10px] uppercase tracking-wider font-bold ".concat(t.subtext," mb-2"),children:"Platform"}),(0,Wf.jsx)("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto pr-1 no-scrollbar",children:["all",...Object.keys(Df)].map(e=>(0,Wf.jsx)("button",{onClick:()=>k(e),className:"px-3 py-1.5 rounded-lg border text-xs font-bold transition-all ".concat(y===e?"".concat(t.accent," text-white border-transparent"):"".concat(t.badge," ").concat(t.borderColor," border-opacity-30")),children:"all"===e?"All Platforms":Df[e].label},e))})]}),(0,Wf.jsx)("button",{onClick:()=>{m("all"),k("all"),g(""),z(!1)},className:"w-full py-2 rounded-xl bg-red-500/10 text-red-500 border border-red-500/20 text-xs font-bold hover:bg-red-500/20 transition-all",children:"Reset All Filters"})]})]})]})]})]})}),(0,Wf.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:0===S.length?(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-12 text-center col-span-full"),children:[(0,Wf.jsx)(zf,{size:48,className:"mx-auto text-slate-300 mb-4"}),(0,Wf.jsx)("p",{className:"text-lg font-medium ".concat(t.subtext),children:"Belum ada orderan"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(t.subtext," mt-2"),children:'Klik tombol "Tambah Order" untuk memulai'})]}):S.map(e=>{const n=(e=>Df[e]||Df.wa)(e.platform),r=(e=>Pf[e]||Pf.medium)(e.priority),a=(e=>Rf[e]||Rf.pending)(e.status),s=(e=>!("completed"===e.status||!e.dueDate)&&new Date(e.dueDate)<new Date)(e),c=i===e.id,d="MessageSquare"===n.icon?qf:T;return(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-5 transition-all ").concat(c?"ring-2 ".concat(t.ringAccent):""),children:(0,Wf.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Wf.jsx)("div",{className:"w-12 h-12 ".concat(t.accent," rounded-xl flex items-center justify-center flex-shrink-0"),children:(0,Wf.jsx)(d,{className:"text-white",size:24})}),(0,Wf.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Wf.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-3",children:[(0,Wf.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(t.text," truncate"),children:e.username}),(0,Wf.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(r.color),children:[r.icon," ",r.label]}),"process"===e.status&&(0,Wf.jsxs)("span",{className:"relative px-2 py-0.5 rounded-full text-xs font-medium ".concat(t.accentSoftBg," ").concat(t.accentTextStrong," border ").concat(t.accentSoftBorder),children:["\ud83d\udd14 Sedang Diproses",(0,Wf.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 ".concat(t.accentDot," rounded-full animate-ping")})]}),s&&(0,Wf.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(t.accentSoftBg," ").concat(t.accentTextStrong," border ").concat(t.accentSoftBorder),children:"\u26a0\ufe0f Terlambat"})]}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Wf.jsx)("span",{className:"px-2 py-1 rounded-lg ".concat(t.accent," text-white text-xs font-medium"),children:n.label}),(0,Wf.jsx)("span",{className:"px-3 py-1 rounded-lg border-2 ".concat(a.color," text-xs font-medium"),children:a.label})]})]}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsx)("button",{type:"button",onClick:()=>o(c?null:e.id),className:"p-2 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all hover:scale-[1.03] active:scale-[0.97]"),title:"Detail",children:(0,Wf.jsx)(R,{size:16})}),(0,Wf.jsx)("button",{type:"button",onClick:()=>I(e.id),className:"p-2 rounded-lg ".concat(t.primarySoftBg," ").concat(t.primarySoftText," ").concat(t.primarySoftHover," transition-all border ").concat(t.primarySoftBorder," hover:scale-[1.03] active:scale-[0.97]"),title:"Hapus",children:(0,Wf.jsx)(w,{size:16})})]})]}),(0,Wf.jsx)("p",{className:"text-base font-bold ".concat(t.text," mb-3 line-clamp-2"),children:e.description}),e.quantity&&(0,Wf.jsxs)("p",{className:"text-sm ".concat(t.subtext," mb-2"),children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Jumlah:"})," ",e.quantity," item"]}),(0,Wf.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,Wf.jsxs)("span",{className:t.subtext,children:[(0,Wf.jsx)(j,{size:12,className:"inline mr-1"}),"Dibuat: ",new Date(e.createdAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.dueDate&&(0,Wf.jsxs)("span",{className:s?"".concat(t.accentTextStrong," font-medium"):t.subtext,children:[(0,Wf.jsx)(Bf,{size:12,className:"inline mr-1"}),"Due: ",new Date(e.dueDate).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})]}),e.completedAt&&(0,Wf.jsxs)("span",{className:t.accentTextStrong,children:[(0,Wf.jsx)(x,{size:12,className:"inline mr-1"}),"Selesai: ",new Date(e.completedAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),"completed"!==e.status&&(0,Wf.jsxs)("div",{className:"flex gap-2 mt-3",children:["pending"===e.status&&(0,Wf.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,L(t),O(""),void D(!0);var t},className:"flex items-center gap-1 px-3 py-1.5 rounded-lg ".concat(t.primarySoftBg," ").concat(t.primarySoftText," ").concat(t.primarySoftHover," transition-all text-xs font-medium border ").concat(t.primarySoftBorder," hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(Kf,{size:12}),"Mulai Proses"]}),"process"===e.status&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsxs)("button",{type:"button",onClick:()=>_(e.id,"completed"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg ".concat(t.primary," text-white ").concat(t.primaryHover," transition-all text-xs font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(x,{size:12}),"Selesai"]}),(0,Wf.jsxs)("button",{type:"button",onClick:()=>_(e.id,"pending"),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all text-xs font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(j,{size:12}),"Pending"]})]})]}),c&&(0,Wf.jsxs)("div",{className:"mt-4 pt-4 border-t-2 ".concat(t.borderColor," space-y-3"),children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h4",{className:"text-sm font-bold ".concat(t.text," mb-2"),children:"Deskripsi Lengkap"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(t.text," mb-4 whitespace-pre-wrap break-words"),children:e.description})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h4",{className:"text-sm font-bold ".concat(t.text," mb-2"),children:"Catatan"}),e.notes&&e.notes.length>0?(0,Wf.jsx)("div",{className:"space-y-2 mb-3",children:e.notes.map(e=>{return(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-lg p-3 min-w-0"),children:[(0,Wf.jsx)("p",{className:"text-sm ".concat(t.text," whitespace-pre-wrap break-words"),children:(n=e.text,n?String(n).replace(/^\s*\ud83d\ude80\s*MULAI\s+PROSES\s*:\s*/i,"").replace(/^\s*MULAI\s+PROSES\s*:\s*/i,"").trim():"")}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(t.subtext," mt-1"),children:[e.createdBy," \u2022 ",new Date(e.createdAt).toLocaleString("id-ID")]})]},e.id);var n})}):(0,Wf.jsx)("p",{className:"text-sm ".concat(t.subtext," mb-3"),children:"Belum ada catatan"}),(0,Wf.jsxs)("div",{className:"flex gap-2",children:[(0,Wf.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),placeholder:"Tambah catatan...",className:"flex-1 px-3 py-2 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," text-sm focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder),onKeyPress:t=>{"Enter"===t.key&&l.trim()&&(C(e.id,l),u(""))}}),(0,Wf.jsx)("button",{type:"button",onClick:()=>{l.trim()&&(C(e.id,l),u(""))},className:"px-4 py-2 rounded-lg ".concat(t.primarySoftBg," ").concat(t.primarySoftText," ").concat(t.primarySoftHover," transition-all text-sm font-medium border ").concat(t.primarySoftBorder," hover:scale-[1.02] active:scale-[0.98]"),children:(0,Wf.jsx)(b,{size:16})})]})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h4",{className:"text-sm font-bold ".concat(t.text," mb-2"),children:"Timeline"}),(0,Wf.jsxs)("div",{className:"space-y-2",children:[(0,Wf.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,Wf.jsx)("div",{className:"w-2 h-2 ".concat(t.accentDot," rounded-full mt-1")}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsxs)("p",{className:t.text,children:["Dibuat oleh ",e.createdBy]}),(0,Wf.jsx)("p",{className:t.subtext,children:new Date(e.createdAt).toLocaleString("id-ID")})]})]}),(0,Wf.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,Wf.jsx)("div",{className:"w-2 h-2 ".concat(t.accentDotMuted," rounded-full mt-1")}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:t.text,children:"Terakhir diupdate"}),(0,Wf.jsx)("p",{className:t.subtext,children:new Date(e.updatedAt).toLocaleString("id-ID")})]})]}),e.completedAt&&(0,Wf.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,Wf.jsx)("div",{className:"w-2 h-2 ".concat(t.accentDotSoft," rounded-full mt-1")}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:t.text,children:"Selesai"}),(0,Wf.jsx)("p",{className:t.subtext,children:new Date(e.completedAt).toLocaleString("id-ID")})]})]})]})]})]})]})]})},e.id)})}),A&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>D(!1),children:(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," p-6 max-w-md w-full mx-4"),onClick:e=>e.stopPropagation(),children:[(0,Wf.jsxs)("h3",{className:"text-xl font-bold ".concat(t.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(Kf,{size:24,className:t.accentText}),"Mulai Proses Order"]}),(0,Wf.jsx)("p",{className:"text-sm ".concat(t.subtext," mb-4"),children:"Masukkan catatan untuk memulai proses order ini:"}),(0,Wf.jsx)("textarea",{value:P,onChange:e=>O(e.target.value),placeholder:"Contoh: Sudah konfirmasi dengan customer, mulai pengerjaan...",rows:"4",autoFocus:!0,className:"w-full px-4 py-3 rounded-lg ".concat(t.input," border-2 ").concat(t.borderColor," focus:ring-2 ").concat(t.focusRing," ").concat(t.focusBorder," mb-4")}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[(0,Wf.jsx)("button",{type:"button",onClick:()=>{P.trim()?(_(M,"process",P),D(!1),O(""),L(null)):alert("\u26a0\ufe0f Catatan harus diisi sebelum memulai proses!")},className:"flex-1 px-4 py-2.5 rounded-lg ".concat(t.primary," text-white ").concat(t.primaryHover," transition-all font-medium"),children:"Mulai Proses"}),(0,Wf.jsx)("button",{type:"button",onClick:()=>D(!1),className:"flex-1 px-4 py-2.5 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all font-medium"),children:"Batal"})]})]})})]})});Gf.displayName="OrderanPage";const Qf=h("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Yf=e=>{let{employees:t,currentTheme:n,leaderboardPeriod:r,setLeaderboardPeriod:a,leaderboardTaskType:s,setLeaderboardTaskType:i,expandedLeaderboard:o,setExpandedLeaderboard:l}=e;(new Date).toLocaleDateString("id-ID"),(new Date).toDateString();const c=new Date;c.setDate(c.getDate()-c.getDay()),c.setHours(0,0,0,0);const u=new Date;u.setDate(1),u.setHours(0,0,0,0);const d=t.map(e=>{let t=[];"all"!==s&&"work"!==s||(t=[...e.workTasks,...e.completedTasksHistory||[]]);const n=t;let a=n;const i=(new Date).toDateString();"today"===r?a=n.filter(e=>{if(!e.completed)return!1;if(!e.completedAt)return!1;return new Date(e.completedAt).toDateString()===i}):"week"===r?a=n.filter(e=>{if(!e.completed)return!1;if(!e.completedAt)return!1;return new Date(e.completedAt)>=c}):"month"===r?a=n.filter(e=>{if(!e.completed)return!1;if(!e.completedAt)return!1;return new Date(e.completedAt)>=u}):"total"===r&&(a=n.filter(e=>e.completed));const o=a,l=o.filter(e=>e.duration);let d=0;if(l.length>0){const e=l.reduce((e,t)=>{const n=t.duration;let r=0;if(n.includes("j")){const e=n.split(" ");r=60*parseInt(e[0].replace("j",""))+(e[1]?parseInt(e[1].replace("m","")):0)}else r=parseInt(n.replace("m",""));if(t.pauseHistory&&t.pauseHistory.length>0){const e=t.pauseHistory.reduce((e,t)=>{if(t.duration){return e+parseInt(t.duration.replace("m",""))}return e},0);r=Math.max(0,r-e)}return e+r},0);d=Math.round(e/l.length)}return{name:e.name,id:e.id,count:o.length,avgMin:d,tasks:o.sort((e,t)=>new Date(t.completedAt)-new Date(e.completedAt))}}),h=d.sort((e,t)=>t.count-e.count||e.avgMin-t.avgMin),f=["\ud83e\udd47","\ud83e\udd48","\ud83e\udd49"],m={today:"Hari Ini",week:"Minggu Ini",month:"Bulan Ini",total:"Total Keseluruhan"},p={all:"Semua Task",work:"Task Kerja"};return(0,Wf.jsxs)("div",{className:"space-y-6",children:[(0,Wf.jsxs)("div",{className:"".concat(n.card," rounded-2xl ").concat(n.shadow," border-2 ").concat(n.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"".concat(n.accent," p-3 rounded-xl"),children:(0,Wf.jsx)(N,{className:"text-white",size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h1",{className:"text-2xl font-bold ".concat(n.text),children:"Leaderboard"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(n.subtext),children:"Ranking produktivitas tim"})]})]}),(0,Wf.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Wf.jsx)("div",{className:"flex gap-2",children:["today","week","month","total"].map(e=>(0,Wf.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(r===e?"".concat(n.accent," ").concat(n.accentHover," text-white ").concat(n.shadow," hover:scale-[1.01] active:scale-[0.99]"):"".concat(n.badge," hover:bg-white/5 hover:scale-[1.01] active:scale-[0.99]")),children:m[e]},e))}),(0,Wf.jsx)("div",{className:"flex gap-2",children:["all","work"].map(e=>(0,Wf.jsx)("button",{onClick:()=>i(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(s===e?"".concat(n.accent," ").concat(n.accentHover," text-white ").concat(n.shadow," hover:scale-[1.01] active:scale-[0.99]"):"".concat(n.badge," hover:bg-white/5 hover:scale-[1.01] active:scale-[0.99]")),children:p[e]},e))})]})]}),(0,Wf.jsx)("div",{className:"space-y-4",children:h.map((e,t)=>{const r=o===e.id,a=f[t]||"".concat(t+1,".");return(0,Wf.jsxs)("div",{className:"".concat(n.card," rounded-2xl ").concat(n.shadow," border-2 ").concat(n.borderColor," p-5 transition-all ").concat(r?"ring-2 ".concat(n.ringAccent):""),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,Wf.jsx)("div",{className:"text-3xl font-bold w-12 text-center",children:a}),(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(n.text),children:e.name}),(0,Wf.jsxs)("div",{className:"flex gap-4 mt-1",children:[(0,Wf.jsxs)("span",{className:"text-sm ".concat(n.subtext," flex items-center gap-1"),children:[(0,Wf.jsx)(x,{size:14}),e.count," tasks selesai"]}),e.avgMin>0&&(0,Wf.jsxs)("span",{className:"text-sm ".concat(n.subtext," flex items-center gap-1"),children:[(0,Wf.jsx)(j,{size:14}),"Avg: ",e.avgMin,"m"]})]})]}),(0,Wf.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,Wf.jsx)(Qf,{size:16,className:t<=Math.min(5,Math.ceil(e.count/2))?"".concat(n.accentText," ").concat(n.accentFill):"text-slate-500"},t))})]}),(0,Wf.jsx)("button",{onClick:()=>l(r?null:e.id),className:"ml-4 p-2 rounded-lg ".concat(n.badge," hover:bg-white/5 transition-all hover:scale-[1.03] active:scale-[0.97]"),children:(0,Wf.jsx)(R,{size:18})})]}),r&&e.tasks.length>0&&(0,Wf.jsxs)("div",{className:"mt-4 pt-4 border-t-2 ".concat(n.borderColor),children:[(0,Wf.jsxs)("h4",{className:"text-sm font-bold ".concat(n.text," mb-3"),children:["Riwayat Task (",e.tasks.length,")"]}),(0,Wf.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.tasks.map((e,t)=>(0,Wf.jsx)("div",{className:"".concat(n.badge," rounded-lg p-3"),children:(0,Wf.jsx)("div",{className:"flex items-start justify-between",children:(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("p",{className:"font-medium ".concat(n.text),children:e.task}),(0,Wf.jsxs)("div",{className:"flex gap-3 mt-1 text-xs",children:[(0,Wf.jsxs)("span",{className:n.subtext,children:["\u2705 ",new Date(e.completedAt).toLocaleString("id-ID",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]}),e.duration&&(0,Wf.jsxs)("span",{className:n.subtext,children:["\u23f1\ufe0f ",e.duration]}),e.pauseHistory&&e.pauseHistory.length>0&&(0,Wf.jsxs)("span",{className:n.accentTextStrong,children:["\u23f8\ufe0f ",e.pauseHistory.length," pause"]})]})]})})},t))})]})]},e.id)})}),0===h.length&&(0,Wf.jsxs)("div",{className:"".concat(n.card," rounded-2xl ").concat(n.shadow," border-2 ").concat(n.borderColor," p-12 text-center"),children:[(0,Wf.jsx)(N,{size:48,className:"mx-auto text-slate-300 mb-4"}),(0,Wf.jsx)("p",{className:"text-lg font-medium ".concat(n.subtext),children:"Belum ada data"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(n.subtext," mt-2"),children:"Task yang diselesaikan akan muncul di sini"})]})]})},Jf=h("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Xf=h("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$f=h("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Zf=h("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),em=r.memo(e=>{let{employees:t,currentTheme:n,AttentionSection:a,selectedEmployee:s,setSelectedEmployee:i,newTask:o,setNewTask:l,showCompletedTasks:u,isProcessing:d,statusConfig:h,priorityColors:p,detectShift:v,updateLateHours:y,startBreak:k,endBreak:S,startIzin:T,endIzin:N,endShift:E,pauseAllTasks:_,resumeAllTasks:I,handleDragStart:C,handleDragOver:P,handleDrop:R,calculateElapsedTime:M,deleteTask:L,updateProgress:F,updatePriority:z,startTask:U,pauseTask:B,resumeTask:V,taskBreak:H,resumeFromTaskBreak:q,endTask:K,addTask:W}=e;return(0,r.useMemo)(()=>{const e=(new Date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r=v(),G=t.filter(e=>e.checkedIn).length,Q=(t.filter(e=>"pagi"===e.shift).map(e=>e.name),t.filter(e=>"malam"===e.shift).map(e=>e.name),t.find(e=>e.isAdmin)),Y=("all"===s||(null===Q||void 0===Q||Q.name),"all"===s?Q?t:t.filter(e=>e.checkedIn):t.filter(e=>e.name===s));return(0,Wf.jsxs)("div",{className:"space-y-8",children:[a,(0,Wf.jsx)("div",{className:"".concat(n.card," border-2 ").concat(n.borderColor," ").concat(n.shadow," p-4 sm:p-6"),children:(0,Wf.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h1",{className:"text-xl sm:text-2xl font-bold ".concat(n.text),children:"ABSENSI ENCOREJEUNE"}),(0,Wf.jsxs)("p",{className:"text-xs sm:text-sm ".concat(n.subtext," flex items-center gap-1.5 mt-1"),children:[(0,Wf.jsx)(O,{size:14}),e]}),(0,Wf.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 mt-2",children:[(0,Wf.jsxs)("p",{className:"text-[10px] sm:text-xs ".concat(n.subtext," flex items-center gap-1.5"),children:["pagi"===r?(0,Wf.jsx)(m,{size:12,className:n.accentText}):(0,Wf.jsx)(f,{size:12,className:n.accentText}),"Shift: ",(0,Wf.jsx)("span",{className:"font-semibold",children:"pagi"===r?"\u2600\ufe0f Pagi":"\ud83c\udf19 Malam"})]}),(0,Wf.jsxs)("p",{className:"text-[10px] sm:text-xs ".concat(n.subtext," flex items-center gap-1.5"),children:[(0,Wf.jsx)(Jf,{size:12}),"Check-in: ",(0,Wf.jsxs)("span",{className:"font-semibold",children:[G,"/3"]})]})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1 lg:pb-0",children:[(0,Wf.jsx)("button",{onClick:()=>i("all"),className:"px-3 sm:px-4 py-1.5 sm:py-2 border-2 font-bold transition-all text-xs sm:text-sm whitespace-nowrap ".concat("all"===s?"".concat(n.accent," text-white ").concat(n.shadow," hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0"):"".concat(n.badge," hover:bg-black hover:text-white")," ").concat("all"===s?"".concat(n.borderColor):"border-transparent"),children:"Semua"}),t.map(e=>(0,Wf.jsx)("button",{onClick:()=>i(e.name),className:"px-3 sm:px-4 py-1.5 sm:py-2 border-2 font-bold transition-all text-xs sm:text-sm whitespace-nowrap ".concat(s===e.name?"".concat(n.accent," text-white ").concat(n.shadow," hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0"):"".concat(n.badge," hover:bg-black hover:text-white")," ").concat(s===e.name?"".concat(n.borderColor):"border-transparent"),children:e.name},e.id))]})]})}),(0,Wf.jsxs)("div",{className:"".concat(n.card," border-2 ").concat(n.borderColor," ").concat(n.shadow," p-4 sm:p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-5",children:[(0,Wf.jsx)("div",{className:"".concat(n.accent," border-2 ").concat(n.borderColor," p-2 sm:p-2.5"),children:(0,Wf.jsx)(Xf,{className:"text-white",size:18})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-lg sm:text-xl font-bold ".concat(n.text),children:"PRODUCTIVITY DASHBOARD"}),(0,Wf.jsx)("p",{className:"text-[10px] sm:text-xs ".concat(n.subtext),children:"Real-time task completion tracking"})]})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",children:Y.map(e=>{const t=[...e.workTasks],r=t.filter(e=>e.completed).length,a=t.filter(e=>e.startTime&&!e.endTime).length,s=t.filter(e=>!e.startTime&&!e.completed).length,i=t.length>0?Math.round(r/t.length*100):0;return(0,Wf.jsxs)("div",{className:"".concat(n.badge," border-2 ").concat(n.borderColor," p-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Wf.jsx)("div",{className:"w-8 h-8 ".concat(n.accent," border-2 ").concat(n.borderColor," flex items-center justify-center font-bold text-white text-sm"),children:e.name[0]}),(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("h3",{className:"text-sm font-bold ".concat(n.text),children:e.name}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.subtext),children:[i,"% selesai"]})]})]}),(0,Wf.jsxs)("div",{className:"space-y-2",children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Wf.jsxs)("span",{className:"".concat(n.accentText," flex items-center gap-1"),children:[(0,Wf.jsx)(x,{size:12})," Selesai"]}),(0,Wf.jsx)("span",{className:"font-semibold ".concat(n.accentText),children:r})]}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Wf.jsxs)("span",{className:"".concat(n.accentText," flex items-center gap-1"),children:[(0,Wf.jsx)(Uf,{size:12})," Progress"]}),(0,Wf.jsx)("span",{className:"font-semibold ".concat(n.accentText),children:a})]}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Wf.jsxs)("span",{className:"".concat(n.accentText," flex items-center gap-1"),children:[(0,Wf.jsx)(j,{size:12})," Pending"]}),(0,Wf.jsx)("span",{className:"font-semibold ".concat(n.accentText),children:s})]})]}),(0,Wf.jsx)("div",{className:"mt-3 ".concat(n.progressTrack," border-2 ").concat(n.borderColor," h-2 overflow-hidden"),children:(0,Wf.jsx)("div",{className:"".concat(n.accent," h-full transition-all duration-500"),style:{width:"".concat(i,"%")}})})]},e.id)})})]}),Y.map(e=>{var t,r;return(0,Wf.jsxs)("div",{className:"".concat(n.card," border-2 ").concat(n.borderColor," ").concat(n.shadow," overflow-hidden"),children:[(0,Wf.jsxs)("div",{className:"bg-gradient-to-r ".concat(n.header," p-5"),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"w-12 h-12 border-4 ".concat(n.borderColor," ").concat(n.card," flex items-center justify-center font-bold ").concat(n.text," text-lg"),children:e.name[0]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,Wf.jsx)("h2",{className:"text-lg font-bold text-white",children:e.name}),e.isAdmin&&(0,Wf.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(n.accentSoftBg," ").concat(n.accentTextStrong," border ").concat(n.accentSoftBorder),children:"\ud83d\udc51 Admin"}),e.shift&&(0,Wf.jsx)("span",{className:"px-2 py-0.5 border-2 ".concat(n.borderColor," text-xs font-bold ").concat("pagi"===e.shift?"bg-yellow-200 text-black":"bg-cyan-200 text-black"),children:"pagi"===e.shift?"\u2600\ufe0f Pagi":"\ud83c\udf19 Malam"}),e.overtime&&(0,Wf.jsx)("span",{className:"px-2 py-0.5 border-2 ".concat(n.borderColor," text-xs font-bold bg-fuchsia-100 text-fuchsia-800 animate-pulse"),children:"\u26a1 LEMBUR"}),e.breakTime&&(0,Wf.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(n.accentSoftBg," ").concat(n.accentTextStrong," border ").concat(n.accentSoftBorder),children:"\u2615 Istirahat"})]}),(0,Wf.jsxs)("p",{className:"text-xs text-slate-300 font-bold",children:["EMP-",e.id.toString().padStart(3,"0")]})]})]}),(0,Wf.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:["hadir","telat","lembur","izin","libur","sakit","alpha"].filter(t=>!e.isBackup||["hadir","izin"].includes(t)).map(t=>{var r;return(0,Wf.jsx)("div",{className:"px-3 py-1.5 border-2 ".concat(n.borderColor," text-xs font-bold ").concat(e.status===t?"bg-fuchsia-600 text-white shadow-[2px_2px_0_0_rgba(0,0,0,1)]":"".concat(n.badge," ").concat(n.subtext)," cursor-not-allowed opacity-70"),children:(null===h||void 0===h||null===(r=h[t])||void 0===r?void 0:r.label)||t},t)})})]}),"telat"===e.status&&(0,Wf.jsxs)("div",{className:"mt-3 flex items-center gap-2 ".concat(n.accentSoftBg," border ").concat(n.accentSoftBorder," rounded-lg p-2.5"),children:[(0,Wf.jsx)(Bf,{className:n.accentTextStrong,size:16}),(0,Wf.jsx)("span",{className:"text-xs ".concat(n.accentTextStrong),children:"Terlambat"}),(0,Wf.jsx)("input",{type:"number",min:"0",max:"12",value:e.lateHours,onChange:t=>y(e.id,parseInt(t.target.value)||0),className:"w-16 px-2 py-1 rounded-md ".concat(n.input," border ").concat(n.borderColor," text-xs text-center focus:outline-none ").concat(n.focusBorder)}),(0,Wf.jsx)("span",{className:"text-xs ".concat(n.accentTextStrong),children:"jam"})]}),e.checkedIn&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsxs)("div",{className:"mt-3 flex gap-2",children:[Object.values(e.workTasks||{}).some(e=>e.paused&&!e.completed)?(0,Wf.jsxs)("button",{onClick:()=>I(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 bg-green-500/20 border border-green-500/30 rounded-lg p-2.5 text-green-400 text-xs font-medium transition-all ".concat(d?"opacity-50 cursor-not-allowed":"hover:bg-green-500/30 hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(Kf,{size:16}),"Resume All"]}):(0,Wf.jsxs)("button",{onClick:()=>_(e.id),disabled:d||!(null!==(t=e.workTasks)&&void 0!==t&&t.some(e=>e.startTime&&!e.completed&&!e.paused)),className:"flex-1 flex items-center justify-center gap-2 bg-orange-500/20 border border-orange-500/30 rounded-lg p-2.5 text-orange-400 text-xs font-medium transition-all ".concat(d||null===(r=e.workTasks)||void 0===r||!r.some(e=>e.startTime&&!e.completed&&!e.paused)?"opacity-50 cursor-not-allowed":"hover:bg-orange-500/30 hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(A,{size:16}),"Pause All"]}),e.breakTime||e.hasBreakToday?e.breakTime?(0,Wf.jsxs)("button",{onClick:()=>S(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.primary," text-white border ").concat(n.primarySoftBorder," rounded-lg p-2.5 text-xs font-medium transition-all ").concat(d?"opacity-50 cursor-not-allowed":"".concat(n.primaryHover," hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(x,{size:16}),"Selesai Istirahat"]}):(0,Wf.jsxs)("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.muted," border ").concat(n.borderColor," rounded-lg p-2.5 ").concat(n.mutedText," text-xs font-medium cursor-not-allowed"),children:[(0,Wf.jsx)(D,{size:16}),"Sudah Istirahat"]}):(0,Wf.jsxs)("button",{onClick:()=>k(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.primarySoftBg," border ").concat(n.primarySoftBorder," rounded-lg p-2.5 ").concat(n.primarySoftText," text-xs font-medium transition-all ").concat(d?"opacity-50 cursor-not-allowed":"".concat(n.primarySoftHover," hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(D,{size:16}),"Istirahat"]}),e.izinTime?(0,Wf.jsxs)("button",{onClick:()=>N(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.primary," text-white border ").concat(n.primarySoftBorder," rounded-lg p-2.5 text-xs font-medium transition-all ").concat(d?"opacity-50 cursor-not-allowed":"".concat(n.primaryHover," hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(x,{size:16}),"Selesai Izin"]}):(0,Wf.jsxs)("button",{onClick:()=>T(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.primarySoftBg," border ").concat(n.primarySoftBorder," rounded-lg p-2.5 ").concat(n.primarySoftText," text-xs font-medium transition-all ").concat(d?"opacity-50 cursor-not-allowed":"".concat(n.primarySoftHover," hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(g,{size:16}),"Izin"]}),(0,Wf.jsxs)("button",{onClick:()=>E(e.id),disabled:d,className:"flex-1 flex items-center justify-center gap-2 ".concat(n.primarySoftBg," border ").concat(n.primarySoftBorder," rounded-lg p-2.5 ").concat(n.primarySoftText," text-xs font-medium transition-all ").concat(d?"opacity-50 cursor-not-allowed":"".concat(n.primarySoftHover," hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)($f,{size:16}),"End Shift"]})]}),(e.breakTime||e.izinTime)&&(0,Wf.jsxs)("div",{className:"mt-2 text-xs text-center",children:[e.breakTime&&(0,Wf.jsxs)("span",{className:n.accentTextStrong,children:["\u23f1\ufe0f Istirahat dimulai: ",e.breakTime]}),e.izinTime&&(0,Wf.jsxs)("span",{className:n.accentTextStrong,children:["\u23f1\ufe0f Izin: ",e.izinReason," (Mulai: ",e.izinTime,")"]})]})]})]}),(0,Wf.jsx)("div",{className:"p-5",children:(0,Wf.jsx)("div",{children:(()=>{const t=e.workTasks.filter(e=>u||!e.completed);return(0,Wf.jsxs)("div",{children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Wf.jsx)(x,{className:n.accentText,size:18}),(0,Wf.jsx)("h3",{className:"text-base font-semibold ".concat(n.text),children:"Task Pekerjaan"})]}),(0,Wf.jsx)("div",{className:"space-y-2.5 mb-3",children:t.map(t=>{var r,a;return(0,Wf.jsxs)("div",{className:"rounded-xl border ".concat(p[t.priority].border," ").concat(p[t.priority].bg," p-3 cursor-move hover:shadow-md transition-shadow"),draggable:!0,onDragStart:n=>C(n,e.id,"work",t.id),onDragOver:P,onDrop:n=>R(n,e.id,"work",t.id),children:[(0,Wf.jsxs)("div",{className:"flex items-start justify-between mb-2.5",children:[(0,Wf.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,Wf.jsx)(Zf,{size:14,className:"".concat(n.mutedText," mt-0.5 flex-shrink-0")}),(0,Wf.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Wf.jsx)("p",{className:"text-xs ".concat(t.completed?"".concat(n.subtext," line-through opacity-60"):n.text," break-words font-medium"),children:t.task}),t.createdAt&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.subtext," mt-1"),children:["\ud83d\udcdd ",t.createdAt]}),t.completedAt&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.accentTextStrong," mt-1"),children:["\u2705 ",t.completedAt]}),t.startTime&&!t.endTime&&!t.paused&&!t.isPaused&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.accentTextStrong," mt-1 flex items-center gap-1 font-semibold"),children:[(0,Wf.jsx)(j,{size:10}),"Running: ",M(t.startTime)]}),t.isPaused&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.accentTextStrong," mt-1 flex items-center gap-1 font-semibold"),children:[(0,Wf.jsx)(D,{size:10}),"Break - Progress: ",t.progress,"%"]}),t.paused&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.accentTextStrong," mt-1 flex items-center gap-1 font-semibold"),children:[(0,Wf.jsx)(A,{size:10}),"Paused: ",null===(r=t.pauseHistory)||void 0===r||null===(a=r[t.pauseHistory.length-1])||void 0===a?void 0:a.reason]}),t.duration&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(n.subtext," mt-1 flex items-center gap-1"),children:[(0,Wf.jsx)(j,{size:10}),t.startTime," - ",t.endTime," (",t.duration,")"]})]})]}),(0,Wf.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-2",children:[(0,Wf.jsx)("span",{className:"".concat(p[t.priority].badge," text-white text-xs px-1.5 py-0.5 rounded-full"),children:t.priority}),(0,Wf.jsx)("button",{onClick:()=>L(e.id,"work",t.id),className:"".concat(n.mutedText," ").concat(n.accentTextHover," p-0.5"),children:(0,Wf.jsx)(w,{size:12})})]})]}),(0,Wf.jsxs)("div",{className:"space-y-2",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsx)("input",{type:"range",min:"0",max:"100",value:t.progress,onChange:n=>F(e.id,"work",t.id,n.target.value),className:"flex-1 h-1.5 rounded-lg appearance-none ".concat(n.progressTrack," cursor-pointer"),style:{background:"linear-gradient(to right, ".concat(n.accentHex," ").concat(t.progress,"%, rgba(255,255,255,0.0) ").concat(t.progress,"%)")}}),(0,Wf.jsxs)("span",{className:"text-xs font-medium ".concat(n.subtext," w-9 text-right"),children:[t.progress,"%"]})]}),(0,Wf.jsxs)("div",{className:"flex gap-1.5",children:[(0,Wf.jsxs)("select",{value:t.priority,onChange:n=>z(e.id,"work",t.id,n.target.value),className:"text-xs px-2 py-1 rounded-md border ".concat(n.borderColor," focus:outline-none ").concat(n.focusBorder," ").concat(n.input),children:[(0,Wf.jsx)("option",{value:"urgent",children:"Urgent"}),(0,Wf.jsx)("option",{value:"high",children:"High"}),(0,Wf.jsx)("option",{value:"normal",children:"Normal"}),(0,Wf.jsx)("option",{value:"low",children:"Low"})]}),t.startTime?t.endTime?(0,Wf.jsx)("span",{className:"text-xs ".concat(n.primarySoftText," px-2.5 py-1 ").concat(n.primarySoftBg," border ").concat(n.primarySoftBorder," rounded-md font-medium"),children:"\u2713 Done"}):(0,Wf.jsxs)(Wf.Fragment,{children:[t.paused?(0,Wf.jsxs)("button",{onClick:()=>V(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primary," text-white ").concat(n.primaryHover," font-medium"),children:[(0,Wf.jsx)(Kf,{size:10}),"Resume"]}):(0,Wf.jsxs)("button",{onClick:()=>B(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primarySoftBg," ").concat(n.primarySoftText," ").concat(n.primarySoftHover," font-medium border ").concat(n.primarySoftBorder),children:[(0,Wf.jsx)(A,{size:10}),"Pause"]}),!t.onTaskBreak&&(0,Wf.jsxs)("button",{onClick:()=>H(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primarySoftBg," ").concat(n.primarySoftText," ").concat(n.primarySoftHover," font-medium border ").concat(n.primarySoftBorder),children:[(0,Wf.jsx)(D,{size:10}),"Break"]}),t.onTaskBreak&&(0,Wf.jsxs)("button",{onClick:()=>q(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primary," text-white ").concat(n.primaryHover," font-medium"),children:[(0,Wf.jsx)(Kf,{size:10}),"Lanjutkan"]}),(0,Wf.jsxs)("button",{onClick:()=>K(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primarySoftBg," ").concat(n.primarySoftText," ").concat(n.primarySoftHover," font-medium border ").concat(n.primarySoftBorder),children:[(0,Wf.jsx)($f,{size:10}),"End"]})]}):(0,Wf.jsxs)("button",{onClick:()=>U(e.id,"work",t.id),className:"flex items-center gap-1 text-xs px-2.5 py-1 rounded-md ".concat(n.primary," text-white ").concat(n.primaryHover," font-medium"),children:[(0,Wf.jsx)(Kf,{size:10}),"Start"]})]})]})]},t.id)})}),(0,Wf.jsxs)("div",{className:"flex gap-2",children:[(0,Wf.jsx)("input",{type:"text",placeholder:"Task pekerjaan baru...",value:o["".concat(e.id,"-work")]||"",onChange:t=>l(n=>c(c({},n),{},{["".concat(e.id,"-work")]:t.target.value})),onKeyPress:t=>"Enter"===t.key&&W(e.id,"work"),className:"flex-1 px-3 py-2 rounded-lg border ".concat(n.borderColor," focus:outline-none ").concat(n.focusBorder," ").concat(n.input," text-xs")}),(0,Wf.jsx)("button",{onClick:()=>W(e.id,"work"),className:"".concat(n.primary," text-white px-3 py-2 rounded-lg ").concat(n.primaryHover," transition-colors"),children:(0,Wf.jsx)(b,{size:16})})]})]})})()})})]},e.id)})]})},[t,n,a,s,o,u,d,h,p,v,y,k,S,T,N,E,C,P,R,M,L,F,z,U,B,V,H,q,K,W,i,l])});em.displayName="DashboardPage";const tm=h("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),nm=h("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),rm=r.memo(e=>{let{employees:t,attentions:n,currentTheme:a,selectedDate:s,setSelectedDate:i,statisticsTab:o,setStatisticsTab:l,currentMonth:c,setCurrentMonth:u,currentYear:d,yearlyAttendance:h,statusConfig:f,monthNames:m,calculateMonthlyStats:p}=e;const v=new Date(d,c+1,0).getDate(),y=new Date(d,c,1).getDay(),b=n.filter(e=>!e.completed),w=(0,r.useMemo)(()=>t.map(e=>{const t=[...e.workTasks].filter(e=>{if(!e.completed)return!1;return(e.completedAt?new Date(e.completedAt).toDateString():null)===s}),n=e.completedTasksHistory.filter(e=>(e.shiftDate||(e.completedAt?new Date(e.completedAt).toDateString():null))===s);return{emp:e,completedTasks:[...t,...n]}}),[t,s]),k=e=>{var t;return(null===f||void 0===f||null===(t=f[e])||void 0===t?void 0:t.pillClass)||"bg-slate-900/45 text-slate-200"};return(0,Wf.jsxs)("div",{className:"space-y-8",children:[b.length>0&&(0,Wf.jsxs)("div",{className:"".concat(a.card," rounded-2xl ").concat(a.shadow," border-2 ").concat(a.borderColor," p-5"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2.5 mb-4",children:[(0,Wf.jsx)(g,{className:"text-blue-300",size:20}),(0,Wf.jsx)("h3",{className:"text-lg font-semibold ".concat(a.text),children:"Active Attentions"})]}),(0,Wf.jsx)("div",{className:"space-y-2.5",children:b.map(e=>(0,Wf.jsxs)("div",{className:"".concat(a.badge," border ").concat(a.borderColor," rounded-xl p-3"),children:[(0,Wf.jsx)("p",{className:"text-sm ".concat(a.text," font-medium mb-1.5 break-words"),children:e.text}),e.image&&(0,Wf.jsx)("img",{src:e.image,alt:"Att",className:"max-w-sm rounded-lg border border-white/10 mb-1.5"}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(a.subtext),children:["\ud83d\udcdd ",e.createdAt]})]},e.id))})]}),(0,Wf.jsx)("div",{className:"".concat(a.card," rounded-2xl ").concat(a.shadow," border-2 ").concat(a.borderColor," p-2"),children:(0,Wf.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,Wf.jsxs)("button",{onClick:()=>l("history"),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-medium transition-all text-xs sm:text-sm ".concat("history"===o?"".concat(a.accent," ").concat(a.accentHover," text-white ").concat(a.shadow," hover:scale-[1.01] active:scale-[0.99]"):"".concat(a.badge," hover:bg-white/5 hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(x,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"History Task Selesai"]}),(0,Wf.jsxs)("button",{onClick:()=>l("attendance"),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-medium transition-all text-xs sm:text-sm ".concat("attendance"===o?"".concat(a.accent," ").concat(a.accentHover," text-white ").concat(a.shadow," hover:scale-[1.01] active:scale-[0.99]"):"".concat(a.badge," hover:bg-white/5 hover:scale-[1.01] active:scale-[0.99]")),children:[(0,Wf.jsx)(O,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),"Statistik Kehadiran"]})]})}),"history"===o&&(0,Wf.jsxs)("div",{className:"".concat(a.card," rounded-2xl ").concat(a.shadow," border-2 ").concat(a.borderColor," p-4 sm:p-6"),children:[(0,Wf.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"".concat(a.accent," p-2 sm:p-2.5 rounded-xl flex-shrink-0"),children:(0,Wf.jsx)(x,{className:"text-white w-[18px] h-[18px] sm:w-5 sm:h-5"})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-lg sm:text-xl font-semibold ".concat(a.text),children:"History Task Selesai"}),(0,Wf.jsx)("p",{className:"text-[10px] sm:text-xs ".concat(a.subtext),children:s===(new Date).toDateString()?"Task hari ini":"Task tanggal ".concat(new Date(s).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}))})]})]}),s!==(new Date).toDateString()&&(0,Wf.jsx)("button",{onClick:()=>i((new Date).toDateString()),className:"px-4 py-2 ".concat(a.accent," ").concat(a.accentHover," text-white rounded-lg text-xs font-medium transition-all hover:scale-[1.01] active:scale-[0.99]"),children:"Kembali ke Hari Ini"})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-3 gap-6",children:w.map(e=>{let{emp:t,completedTasks:n}=e;return(0,Wf.jsxs)("div",{className:"".concat(a.card," rounded-xl ").concat(a.shadow," border-2 ").concat(a.borderColor," p-4"),children:[(0,Wf.jsxs)("div",{className:"mb-4 pb-3 border-b",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)("div",{className:"w-10 h-10 ".concat(a.accent," rounded-full flex items-center justify-center font-bold text-white"),children:t.name[0]}),(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("h3",{className:"text-base font-bold ".concat(a.text),children:t.name}),(0,Wf.jsxs)("span",{className:"text-xs ".concat(a.subtext),children:[n.length," task selesai"]})]})]}),t.shifts&&t.shifts.length>0&&(()=>{const e=t.shifts.find(e=>e.date===s);return e?(0,Wf.jsxs)("div",{className:"mt-2 pt-2 border-t ".concat(a.borderColor),children:[(0,Wf.jsx)("div",{className:"flex items-center justify-between text-xs",children:(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsx)("span",{className:"px-2 py-1 rounded-full ".concat(a.accentSoftBg," ").concat(a.accentTextStrong," border ").concat(a.accentSoftBorder),children:"pagi"===e.shift?"\u2600\ufe0f Pagi":"\ud83c\udf19 Malam"}),(0,Wf.jsx)("span",{className:a.subtext,children:"telat"===e.status?"\u26a0\ufe0f Telat ".concat(e.lateHours,"h"):"\u2705 Tepat Waktu"})]})}),(0,Wf.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)(Kf,{size:12,className:a.accentText}),(0,Wf.jsxs)("span",{children:["Mulai: ",(0,Wf.jsx)("strong",{children:e.checkInTime})]})]}),e.endTime&&(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)($f,{size:12,className:a.accentText}),(0,Wf.jsxs)("span",{children:["Selesai: ",(0,Wf.jsx)("strong",{children:e.endTime})]})]}),e.checkInTime&&e.endTime&&(()=>{const[t,n]=e.checkInTime.split(":").map(Number),[r,s]=e.endTime.split(":").map(Number),i=60*r+s-(60*t+n),o=Math.floor(i/60),l=i%60;return(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)(j,{size:12,className:a.accentText}),(0,Wf.jsxs)("span",{children:["Durasi: ",(0,Wf.jsxs)("strong",{children:[o,"h ",l,"m"]})]})]})})()]})]}):null})()]}),(0,Wf.jsxs)("div",{className:"space-y-2",children:[n.map((e,n)=>{return(0,Wf.jsx)("div",{className:"".concat(a.badge," rounded-lg p-3 border ").concat(a.borderColor),children:(0,Wf.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)(x,{size:14,className:"".concat(a.accentText," flex-shrink-0")}),(0,Wf.jsx)("p",{className:"text-sm font-medium ".concat(a.text),children:e.task})]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.completedAtDisplay&&(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)(O,{size:12}),(0,Wf.jsxs)("span",{children:["Selesai: ",e.completedAtDisplay]})]}),e.duration&&(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)(j,{size:12}),(0,Wf.jsxs)("span",{children:["Durasi: ",e.duration]})]}),e.startTime&&(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)(Kf,{size:12}),(0,Wf.jsxs)("span",{children:["Mulai: ",e.startTime]})]}),e.endTime&&(0,Wf.jsxs)("div",{className:"flex items-center gap-1 ".concat(a.subtext),children:[(0,Wf.jsx)($f,{size:12}),(0,Wf.jsxs)("span",{children:["Selesai: ",e.endTime]})]})]}),e.pauseHistory&&e.pauseHistory.length>0&&(0,Wf.jsxs)("div",{className:"mt-2 pt-2 border-t ".concat(a.borderColor),children:[(0,Wf.jsxs)("p",{className:"text-xs font-semibold ".concat(a.text," mb-1.5 flex items-center gap-1"),children:[(0,Wf.jsx)(A,{size:12}),"Riwayat Pause (",e.pauseHistory.length,"x):"]}),(0,Wf.jsx)("div",{className:"space-y-1",children:e.pauseHistory.map((e,t)=>(0,Wf.jsxs)("div",{className:"text-xs ".concat(a.accentSoftBg," border ").concat(a.accentSoftBorder," rounded px-2 py-1.5"),children:[(0,Wf.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Wf.jsxs)("span",{className:"".concat(a.accentTextStrong," font-medium"),children:["\u23f8\ufe0f ",e.startTime," \u2192 ",e.endTime||"Belum selesai"]})}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(a.subtext),children:["\ud83d\udccb Alasan: ",e.reason]}),e.dateDisplay&&(0,Wf.jsxs)("p",{className:"text-xs ".concat(a.subtext," mt-0.5"),children:["\ud83d\udcc5 ",e.dateDisplay]})]},t))})]}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Wf.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat((r=e.priority,"urgent"===r?"bg-blue-700/55 text-white border border-blue-300/30":"high"===r?"bg-blue-800/45 text-blue-100 border border-blue-400/25":"normal"===r?"bg-blue-900/35 text-blue-200 border border-blue-500/20":"bg-slate-800/60 text-slate-200 border border-white/10")),children:e.priority}),(0,Wf.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(a.badge),children:[e.progress,"% progress"]})]})]})})},"task-".concat(t.id,"-").concat(e.id,"-").concat(n));var r}),0===n.length&&(0,Wf.jsxs)("div",{className:"text-center py-8",children:[(0,Wf.jsx)(x,{size:40,className:"text-slate-300 mx-auto mb-2"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(a.subtext),children:"Belum ada task selesai"})]})]})]},t.id)})}),t.every(e=>0===[...e.workTasks].filter(e=>e.completed).length)&&(0,Wf.jsxs)("div",{className:"text-center py-8",children:[(0,Wf.jsx)(Bf,{size:48,className:"text-slate-300 mx-auto mb-3"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(a.subtext),children:"Belum ada task yang diselesaikan"})]}),(0,Wf.jsxs)("div",{className:"mt-8",children:[(0,Wf.jsxs)("h3",{className:"text-lg font-semibold ".concat(a.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(D,{size:20}),"Riwayat Istirahat"]}),t.map(e=>{const t=e.breakHistory.filter(e=>{if(!e.date)return!1;return new Date(e.date).toDateString()===s});return 0===t.length?null:(0,Wf.jsxs)("div",{className:"mb-4",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)("div",{className:"w-6 h-6 ".concat(a.accent," rounded-full flex items-center justify-center font-bold text-white text-xs"),children:e.name[0]}),(0,Wf.jsx)("h4",{className:"text-sm font-semibold ".concat(a.text),children:e.name}),(0,Wf.jsxs)("span",{className:"text-xs ".concat(a.badge," px-2 py-0.5 rounded-full"),children:[t.length," istirahat"]})]}),(0,Wf.jsx)("div",{className:"space-y-2",children:t.map((t,n)=>(0,Wf.jsx)("div",{className:"".concat(a.badge," rounded-lg p-3 border ").concat(t.isLate?"border-blue-500/30":"".concat(a.borderColor)),children:(0,Wf.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Wf.jsx)(D,{size:14,className:a.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(a.accentTextStrong),children:"pagi"===t.shift?"\u2600\ufe0f Shift Pagi":"\ud83c\udf19 Shift Malam"}),t.isLate&&(0,Wf.jsxs)("span",{className:"text-xs bg-blue-950/30 text-blue-200 px-2 py-0.5 rounded-full font-medium border border-blue-500/15",children:["Telat ",t.lateDuration," jam"]})]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs mt-2",children:[(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Mulai:"})," ",t.startTime]}),(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Selesai:"})," ",t.endTime]}),(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Durasi:"})," ",t.duration," menit"]})]}),(0,Wf.jsx)("div",{className:"text-xs ".concat(a.subtext," mt-1"),children:t.dateDisplay||t.date})]})})},"break-".concat(e.id,"-").concat(n,"-").concat(t.date)))})]},"break-".concat(e.id))}),t.every(e=>0===e.breakHistory.length)&&(0,Wf.jsxs)("div",{className:"text-center py-6",children:[(0,Wf.jsx)(D,{size:40,className:"text-slate-300 mx-auto mb-2"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(a.subtext),children:"Belum ada riwayat istirahat"})]})]}),(0,Wf.jsxs)("div",{className:"mt-8",children:[(0,Wf.jsxs)("h3",{className:"text-lg font-semibold ".concat(a.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(g,{size:20}),"Riwayat Izin"]}),t.map(e=>{const t=e.izinHistory.filter(e=>{if(!e.date)return!1;return new Date(e.date).toDateString()===s});return 0===t.length?null:(0,Wf.jsxs)("div",{className:"mb-4",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)("div",{className:"w-6 h-6 ".concat(a.accent," rounded-full flex items-center justify-center font-bold text-white text-xs"),children:e.name[0]}),(0,Wf.jsx)("h4",{className:"text-sm font-semibold ".concat(a.text),children:e.name}),(0,Wf.jsxs)("span",{className:"text-xs ".concat(a.badge," px-2 py-0.5 rounded-full"),children:[t.length," izin"]})]}),(0,Wf.jsx)("div",{className:"space-y-2",children:t.map((t,n)=>(0,Wf.jsx)("div",{className:"".concat(a.badge," rounded-lg p-3 border ").concat(a.borderColor),children:(0,Wf.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Wf.jsx)(g,{size:14,className:a.accentText}),(0,Wf.jsx)("span",{className:"text-xs font-medium ".concat(a.accentTextStrong),children:"pagi"===t.shift?"\u2600\ufe0f Shift Pagi":"\ud83c\udf19 Shift Malam"})]}),(0,Wf.jsx)("div",{className:"".concat(a.accentSoftBg," border ").concat(a.accentSoftBorder," rounded px-2 py-1.5 mb-2"),children:(0,Wf.jsxs)("p",{className:"text-xs ".concat(a.accentTextStrong," font-medium"),children:["\ud83d\udccb Alasan: ",t.reason]})}),(0,Wf.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs mt-2",children:[(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Mulai:"})," ",t.startTime]}),(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Selesai:"})," ",t.endTime]}),(0,Wf.jsxs)("div",{className:a.subtext,children:[(0,Wf.jsx)("span",{className:"font-medium",children:"Durasi:"})," ",t.duration," menit"]})]}),(0,Wf.jsx)("div",{className:"text-xs ".concat(a.subtext," mt-1"),children:t.dateDisplay||t.date})]})})},"izin-".concat(e.id,"-").concat(n,"-").concat(t.date)))})]},"izin-".concat(e.id))}),t.every(e=>0===e.izinHistory.length)&&(0,Wf.jsxs)("div",{className:"text-center py-6",children:[(0,Wf.jsx)(g,{size:40,className:"text-slate-300 mx-auto mb-2"}),(0,Wf.jsx)("p",{className:"text-sm ".concat(a.subtext),children:"Belum ada riwayat izin"})]})]})]}),"attendance"===o&&(0,Wf.jsxs)("div",{className:"".concat(a.card," rounded-2xl ").concat(a.shadow," border-2 ").concat(a.borderColor," p-4 sm:p-6"),children:[(0,Wf.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-xl sm:text-2xl font-bold ".concat(a.text),children:"Statistik Kehadiran"}),(0,Wf.jsxs)("p",{className:"text-xs sm:text-sm ".concat(a.subtext," mt-1"),children:[m[c]," ",d]})]}),(0,Wf.jsxs)("div",{className:"flex gap-2",children:[(0,Wf.jsx)("button",{onClick:()=>u(Math.max(0,c-1)),disabled:0===c,className:"p-2 rounded-lg border ".concat(a.badge," hover:bg-white/5 disabled:opacity-30 disabled:cursor-not-allowed transition-colors hover:scale-[1.02] active:scale-[0.98]"),children:(0,Wf.jsx)(tm,{size:18})}),(0,Wf.jsx)("button",{onClick:()=>u(Math.min(11,c+1)),disabled:11===c,className:"p-2 rounded-lg border ".concat(a.badge," hover:bg-white/5 disabled:opacity-30 disabled:cursor-not-allowed transition-colors hover:scale-[1.02] active:scale-[0.98]"),children:(0,Wf.jsx)(nm,{size:18})})]})]}),t.map(e=>{const t=p(e.name,c);return(0,Wf.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,Wf.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3 mb-4",children:[(0,Wf.jsx)("h3",{className:"text-base sm:text-lg font-semibold ".concat(a.text),children:e.name}),(0,Wf.jsx)("div",{className:"flex flex-wrap gap-2 text-[10px] sm:text-xs",children:["hadir","telat","lembur","izin","libur","sakit","alpha"].map(e=>{var n;return(0,Wf.jsxs)("div",{className:"px-2 py-1 rounded-lg font-medium whitespace-nowrap ".concat(k(e)),children:[(null===f||void 0===f||null===(n=f[e])||void 0===n?void 0:n.label)||e,": ",(null===t||void 0===t?void 0:t[e])||0,"telat"===e&&t.totalLateHours>0?" (".concat(t.totalLateHours,"j)"):""]},e)})})]}),(0,Wf.jsx)("div",{className:"overflow-x-auto no-scrollbar -mx-2 px-2",children:(0,Wf.jsxs)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-4 min-w-[320px]",children:[["Min","Sen","Sel","Rab","Kam","Jum","Sab"].map(e=>(0,Wf.jsx)("div",{className:"text-center text-[10px] sm:text-xs font-medium ".concat(a.subtext," py-1"),children:e},e)),[...Array(y)].map((e,t)=>(0,Wf.jsx)("div",{className:"aspect-square sm:aspect-auto"},"empty-".concat(t))),[...Array(v)].map((t,n)=>{var r,s,o,u,p,g,v,y,b;const x=n+1,w=null===h||void 0===h||null===(r=h[e.name])||void 0===r||null===(s=r[c])||void 0===s?void 0:s[x],k=w&&w.status&&"belum"!==w.status,S=w&&"lembur"===w.status,T=S&&w.overtimeBaseStatus?w.overtimeBaseStatus:null===w||void 0===w?void 0:w.status,N=(null===f||void 0===f||null===(o=f[T])||void 0===o?void 0:o.calendarBg)||(null===f||void 0===f||null===(u=f[T])||void 0===u?void 0:u.bg)||"bg-blue-600",E=(null===f||void 0===f||null===(p=f.lembur)||void 0===p?void 0:p.calendarBg)||(null===f||void 0===f||null===(g=f.lembur)||void 0===g?void 0:g.bg)||"bg-blue-800";return(0,Wf.jsx)("div",{className:"relative aspect-square sm:aspect-auto",children:k?S?(0,Wf.jsxs)("div",{className:"calendar-cell w-full h-full sm:h-auto rounded-md sm:rounded-lg p-1.5 sm:p-2.5 text-center text-white text-[10px] sm:text-xs font-medium hover:scale-105 transition-transform cursor-pointer shadow-sm overflow-hidden relative flex items-center justify-center sm:block",onClick:()=>{const e=new Date(d,c,x);i(e.toDateString()),l("history")},title:"".concat(x," ").concat(m[c],": ").concat("telat"===T?"Telat":"Hadir"," + Lembur").concat(w.lateHours>0?" (".concat(w.lateHours,"h telat)"):""),children:[(0,Wf.jsx)("div",{className:"absolute inset-0 ".concat(N),style:{clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)"}}),(0,Wf.jsx)("div",{className:"absolute inset-0 ".concat(E),style:{clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)"}}),(0,Wf.jsx)("span",{className:"relative z-10",children:x})]}):(0,Wf.jsx)("div",{className:"calendar-cell w-full h-full sm:h-auto ".concat((null===f||void 0===f||null===(v=f[w.status])||void 0===v?void 0:v.calendarBg)||(null===f||void 0===f||null===(y=f[w.status])||void 0===y?void 0:y.bg)||"bg-blue-600"," rounded-md sm:rounded-lg p-1.5 sm:p-2.5 text-center text-white text-[10px] sm:text-xs font-medium hover:scale-105 transition-transform cursor-pointer shadow-sm flex items-center justify-center sm:block"),onClick:()=>{const e=new Date(d,c,x);i(e.toDateString()),l("history")},title:"".concat(x," ").concat(m[c],": ").concat((null===f||void 0===f||null===(b=f[w.status])||void 0===b?void 0:b.label)||w.status).concat(w.lateHours>0?" (".concat(w.lateHours,"h telat)"):""),children:x}):(0,Wf.jsx)("div",{className:"calendar-cell w-full h-full sm:h-auto ".concat(a.badge," rounded-md sm:rounded-lg p-1.5 sm:p-2.5 text-center text-[10px] sm:text-xs font-medium border border-dashed ").concat(a.borderColor," ").concat(a.text," flex items-center justify-center sm:block"),title:"".concat(x," ").concat(m[c],": Tidak ada data"),children:x})},x)})]})}),t.totalLateHours>0&&(0,Wf.jsx)("div",{className:"mt-4 p-3 bg-blue-950/20 border border-blue-500/15 rounded-lg",children:(0,Wf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsx)(j,{className:"text-blue-300",size:16}),(0,Wf.jsx)("span",{className:"text-sm font-medium text-blue-200",children:"Total Jam Telat:"})]}),(0,Wf.jsxs)("span",{className:"text-lg font-bold text-blue-200",children:[t.totalLateHours," jam"]})]})})]},e.id)})]})]})});rm.displayName="StatisticsPage";const am=h("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),sm=r.memo(e=>{let{employees:t,currentTheme:n,shiftScheduleYear:a,setShiftScheduleYear:s,shiftScheduleMonth:i,setShiftScheduleMonth:o,shiftScheduleWeek:l,setShiftScheduleWeek:u,shiftScheduleData:d,setShiftScheduleData:h,currentWeekRef:f,hasLoadedInitialData:m,yearlyAttendance:p,setYearlyAttendance:g,monthNames:v,startSaveOperation:y,endSaveOperation:b}=e;const x=(0,r.useMemo)(()=>t.filter(e=>!e.isBackup).map(e=>e.name),[t]),w=(0,r.useMemo)(()=>t.filter(e=>e.isBackup).map(e=>e.name),[t]),k=(0,r.useMemo)(()=>t.map(e=>e.name),[t]),S=k,T=(0,r.useMemo)(()=>new Date(a,i+1,0).getDate(),[a,i]),N=r.useCallback(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};k.forEach(e=>{n[e]={libur:0,pagi:0,malam:0,double:0,weeksAsPagi:0,weeksAsMalam:0,weeksAsDouble:0}});const r=[];for(let a=0;a<e.length;a+=7)r.push(e.slice(a,a+7));const s=[];r.forEach((e,t)=>{const r={};k.forEach(e=>r[e]=0),e.forEach(e=>{"Tidak Ada"!==e.libur&&r[e.libur]++});const a=x.filter(e=>r[e]<4),i=a;let o={};if(3===i.length){const e={};i.forEach(t=>{e[t]=n[t].weeksAsMalam+n[t].weeksAsPagi});let r,a=Math.min(...i.map(t=>e[t])),s=i.filter(t=>e[t]===a);if(s.length>1){const e=t%s.length;s.sort(),r=s[e]}else r=s[0];"2P1M"===(t%2===0?"2P1M":"1P2M")?(o[r]="malam",i.filter(e=>e!==r).forEach(e=>{o[e]="pagi"}),n[r].weeksAsMalam++,i.filter(e=>e!==r).forEach(e=>{n[e].weeksAsPagi++})):(o[r]="pagi",i.filter(e=>e!==r).forEach(e=>{o[e]="malam"}),n[r].weeksAsPagi++,i.filter(e=>e!==r).forEach(e=>{n[e].weeksAsMalam++}))}else if(2===i.length)t%2===0?(o[i[0]]="pagi",o[i[1]]="malam",n[i[0]].weeksAsPagi++,n[i[1]].weeksAsMalam++):(o[i[0]]="malam",o[i[1]]="pagi",n[i[0]].weeksAsMalam++,n[i[1]].weeksAsPagi++);else if(1===i.length){const e=i[0];o[e]="pagi",n[e].weeksAsPagi++,w.length>0&&(o[w[0]]="malam",n[w[0]].weeksAsMalam++)}else w.length>0&&(o[w[0]]="double",n[w[0]].weeksAsDouble++);s.push(o)});const o=e.map((e,t)=>{const r=Math.floor(t/7),a=s[r]||{},i=e.libur,o=k.filter(e=>e!==i||"Tidak Ada"===i);"Tidak Ada"!==i&&n[i].libur++;const l=c({},e),u=[],d=[];if(o.forEach(e=>{const t=a[e];"pagi"===t?u.push(e):"malam"===t?d.push(e):"double"===t&&(u.push(e),d.push(e))}),"Tidak Ada"!==i&&x.includes(i)){const e=w[0];if(e){const t=a[i];"pagi"===t?u.push(e):"malam"===t?d.push(e):"double"===t&&(u.push(e),d.push(e))}}return l.pagi=u,l.malam=d,l.pagi.forEach(e=>n[e].pagi++),l.malam.forEach(e=>n[e].malam++),l});h(o),t&&(y&&y("Shift: Regenerate"),_f.saveShiftSchedule({month:i,year:a,data:o}).then(()=>console.log("\u2705 Schedule regenerated and saved to Firebase")).catch(e=>console.error("\u274c Error saving regenerated schedule:",e)).finally(()=>{b&&b("Shift: Regenerate")}))},[k,x,w,h,i,a,y,b]),E=r.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new Date(a,i,1),n=[],r=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];for(let a=0;a<T;a++){const e=new Date(t);e.setDate(t.getDate()+a);let s="Tidak Ada";S.forEach(e=>{var t,n;const r=null===(t=p[e])||void 0===t||null===(n=t[i])||void 0===n?void 0:n[a+1];r&&"libur"===r.status&&(s=e)}),n.push({day:a+1,date:e.toLocaleDateString("id-ID"),dayName:r[e.getDay()],libur:s,pagi:[],malam:[],keterangan:""})}N(n,e)},[a,i,T,S,p,N]);r.useEffect(()=>{if(0===d.length&&m.current){const e="".concat(a,"-").concat(i);sessionStorage.getItem("lastGeneratedMonth")!==e&&(sessionStorage.setItem("lastGeneratedMonth",e),setTimeout(()=>E(),100))}},[d.length,i,a,m,E]),r.useEffect(()=>{d.length>0&&f.current!==l&&u(f.current)},[d,f,l,u]),r.useEffect(()=>{const e=Math.ceil(T/7);if(l>=e&&e>0){const t=e-1;console.log("\u26a0\ufe0f Saved week ".concat(l," out of bounds, resetting to ").concat(t)),u(t),f.current=t,localStorage.setItem("shiftScheduleWeek",t.toString())}},[T,l,u,f]);const I=(0,r.useMemo)(()=>{if(0===d.length)return[];const e=7*l,t=Math.min(e+7,T);return d.slice(e,t)},[d,l,T]),C=Math.ceil(T/7),j=7*l,A=Math.min(j+7,T),D=r.useMemo(()=>d.filter(e=>"Tidak Ada"!==e.libur).length,[d]),P=r.useCallback((e,t)=>{if(!d[e])return;const n=d.map((n,r)=>r===e?c(c({},n),{},{libur:t}):n),r=d[e].libur,a=d[e].day;let s;g(e=>{const n=c({},e);return S.forEach(e=>{n[e]||(n[e]={}),n[e][i]||(n[e][i]={}),t===e&&"Tidak Ada"!==t?n[e][i][a]=c(c({},n[e][i][a]),{},{status:"libur",lateHours:0}):r===e&&(n[e][i][a]=c(c({},n[e][i][a]),{},{status:"belum",lateHours:0}))}),s=n,n}),N(n,!0),y&&y("Attendance: Sync Libur"),_f.saveYearlyAttendance(s).finally(()=>{b&&b("Attendance: Sync Libur")})},[d,i,a,S,g,y,b,N]);return(0,Wf.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,Wf.jsxs)("div",{className:"".concat(n.card," rounded-2xl ").concat(n.shadow," border-2 ").concat(n.borderColor," p-4 sm:p-6 relative z-20"),children:[(0,Wf.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-4",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,Wf.jsx)("div",{className:"bg-gradient-to-br from-blue-700 to-blue-500 p-2 sm:p-3 rounded-xl ".concat(n.shadow),children:(0,Wf.jsx)(_,{className:"text-white w-5 h-5 sm:w-6 sm:h-6"})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-xl sm:text-2xl font-bold ".concat(n.text),children:"Jadwal Shift"}),(0,Wf.jsx)("p",{className:"text-[10px] sm:text-sm ".concat(n.subtext," mt-0.5 sm:mt-1"),children:S.join(" \u2022 ")})]})]}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-3 relative z-30",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,Wf.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),h([]),u(0),f.current=0,localStorage.setItem("shiftScheduleWeek","0"),0===i?(o(11),s(a-1)):o(i-1)},className:"p-1.5 sm:p-2 rounded-lg ".concat(n.badge," hover:bg-white/5 transition-all cursor-pointer relative z-30 hover:scale-[1.01] active:scale-[0.99]"),title:"Bulan Sebelumnya",children:(0,Wf.jsx)(tm,{className:"w-[18px] h-[18px] sm:w-5 sm:h-5"})}),(0,Wf.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 px-1 sm:px-2",children:[(0,Wf.jsx)("select",{value:i,onChange:e=>{e.preventDefault(),e.stopPropagation();const t=parseInt(e.target.value);h([]),o(t),u(0)},className:"bg-transparent ".concat(n.text," font-bold text-sm sm:text-lg focus:outline-none cursor-pointer appearance-none hover:bg-white/5 p-1 rounded"),style:{textAlignLast:"center"},children:v.map((e,t)=>(0,Wf.jsx)("option",{value:t,className:"text-black",children:e},t))}),(0,Wf.jsx)("select",{value:a,onChange:e=>{e.preventDefault(),e.stopPropagation();const t=parseInt(e.target.value);h([]),s(t),u(0)},className:"bg-transparent ".concat(n.text," font-bold text-sm sm:text-lg focus:outline-none cursor-pointer appearance-none hover:bg-white/5 p-1 rounded"),children:[...Array(5)].map((e,t)=>{const n=(new Date).getFullYear()-2+t;return(0,Wf.jsx)("option",{value:n,className:"text-black",children:n},n)})})]}),(0,Wf.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),h([]),u(0),f.current=0,localStorage.setItem("shiftScheduleWeek","0"),11===i?(o(0),s(a+1)):o(i+1)},className:"p-2 rounded-lg ".concat(n.badge," hover:bg-white/5 transition-all cursor-pointer relative z-30 hover:scale-[1.01] active:scale-[0.99]"),title:"Bulan Berikutnya",children:(0,Wf.jsx)(nm,{className:"w-5 h-5"})})]}),(0,Wf.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),window.confirm("\u26a0\ufe0f Regenerasi akan menghapus jadwal kustom Anda di bulan ini. Lanjutkan?")&&E(!0)},className:"flex items-center gap-2 px-3 py-2 rounded-lg ".concat(n.badge," text-blue-400 border border-blue-500/20 hover:bg-blue-500/10 transition-all text-xs font-bold hover:scale-[1.02] active:scale-[0.98]"),title:"Susun ulang jadwal bulan ini",children:[(0,Wf.jsx)(am,{size:14}),(0,Wf.jsx)("span",{className:"hidden sm:inline",children:"Regenerasi Jadwal"})]})]})]}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 relative z-30",children:[(0,Wf.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation();const t=Math.max(0,l-1);u(t),f.current=t,localStorage.setItem("shiftScheduleWeek",t.toString())},disabled:0===l,className:"p-2 rounded-lg ".concat(n.badge," hover:bg-white/5 transition-all disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer relative z-30 hover:scale-[1.01] active:scale-[0.99]"),title:"Minggu Sebelumnya",children:(0,Wf.jsx)(tm,{size:16})}),(0,Wf.jsxs)("span",{className:"text-sm font-medium ".concat(n.text," px-3"),children:["Minggu ",l+1," dari ",C]}),(0,Wf.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation();const t=Math.min(C-1,l+1);u(t),f.current=t,localStorage.setItem("shiftScheduleWeek",t.toString())},disabled:l>=C-1,className:"p-2 rounded-lg ".concat(n.badge," hover:bg-white/5 transition-all disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer relative z-30 hover:scale-[1.01] active:scale-[0.99]"),title:"Minggu Berikutnya",children:(0,Wf.jsx)(nm,{size:16})})]}),(0,Wf.jsxs)("div",{className:"text-sm ".concat(n.subtext),children:["Hari ",j+1,"-",A," dari ",T," \u2022 ",D," libur"]})]})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:0===I.length?(0,Wf.jsx)("div",{className:"col-span-full text-center py-10",children:(0,Wf.jsx)("p",{className:"text-lg ".concat(n.subtext),children:"Tidak ada data jadwal. Silakan generate jadwal terlebih dahulu."})}):I.map((e,r)=>{const a=j+r,s=e.pagi.some(t=>e.malam.includes(t)),i=s?e.pagi.find(t=>e.malam.includes(t)):null;return(0,Wf.jsxs)("div",{className:"".concat(n.card," rounded-xl ").concat(n.shadow," border-2 ").concat(n.borderColor," p-4 transition-all hover:shadow-lg ").concat(s?"border-blue-400/40 bg-blue-950/15":""),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b-2 ".concat(n.borderColor),children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("div",{className:"text-2xl font-bold ".concat(n.text),children:e.day}),(0,Wf.jsx)("div",{className:"text-xs ".concat(n.subtext),children:e.dayName})]}),(0,Wf.jsx)("div",{className:"text-xs ".concat(n.subtext),children:e.date})]}),(0,Wf.jsxs)("div",{className:"mb-3",children:[(0,Wf.jsx)("label",{className:"text-xs font-semibold ".concat(n.subtext," mb-1 block"),children:"Libur:"}),(0,Wf.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,Wf.jsx)("button",{type:"button",onClick:()=>P(a,"Tidak Ada"),className:"px-2 py-1 text-[10px] rounded-md transition-all ".concat("Tidak Ada"===e.libur?"bg-blue-700 text-white font-bold":"".concat(n.badge," ").concat(n.text," hover:bg-white/5")),children:"Tidak Ada"}),t.filter(e=>!e.isBackup).map(t=>(0,Wf.jsx)("button",{type:"button",onClick:()=>P(a,t.name),className:"px-2 py-1 text-[10px] rounded-md transition-all ".concat(e.libur===t.name?"bg-blue-600 text-white font-bold":"".concat(n.badge," ").concat(n.text," hover:bg-white/5")),children:t.name},t.name))]})]}),(0,Wf.jsxs)("div",{className:"mb-3",children:[(0,Wf.jsx)("label",{className:"text-[10px] font-semibold ".concat(n.subtext," mb-1 block"),children:"\u2600\ufe0f Shift Pagi:"}),(0,Wf.jsx)("div",{className:"flex gap-1.5 flex-wrap",children:e.pagi.length>0?e.pagi.map((e,t)=>(0,Wf.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold ".concat(i===e?"bg-blue-700 text-white ".concat(n.shadow):"bg-blue-600 text-white"),children:[e,i===e&&(0,Wf.jsx)("span",{className:"ml-1",children:"\u26a1"})]},t)):(0,Wf.jsx)("span",{className:"text-[10px] ".concat(n.subtext," italic"),children:"-"})})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"text-[10px] font-semibold ".concat(n.subtext," mb-1 block"),children:"\ud83c\udf19 Shift Malam:"}),(0,Wf.jsx)("div",{className:"flex gap-1.5 flex-wrap",children:e.malam.length>0?e.malam.map((e,t)=>(0,Wf.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold ".concat(i===e?"bg-blue-700 text-white ".concat(n.shadow):"bg-blue-600 text-white"),children:[e,i===e&&(0,Wf.jsx)("span",{className:"ml-1",children:"\u26a1"})]},t)):(0,Wf.jsx)("span",{className:"text-[10px] ".concat(n.subtext," italic"),children:"-"})})]})]},a)})})]})});sm.displayName="ShiftSchedulePage";const im=h("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),om=h("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lm=h("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),cm=h("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),um=r.memo(e=>{let{currentTheme:t,handleAdminLogout:n,adminTab:a,setAdminTab:s,employees:i,editingEmployee:o,setEditingEmployee:l,handleSaveEmployee:u,handleEditEmployee:d,handleAddEmployee:h,handleDeleteEmployee:f,handleDeleteTask:m,handleResetEmployee:p,currentMonth:g,currentYear:k,monthNames:S,yearlyAttendance:T,statusConfig:N,handleEditCalendar:_,calculateMonthlyStats:j,exportData:A,importData:D,setShowClearModal:P,handleFixOvertimeData:R}=e;const[M,L]=r.useState(!1),[F,z]=r.useState(""),[U,B]=r.useState("");return(0,Wf.jsxs)("div",{className:"space-y-8",children:[(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-4 sm:p-6"),children:(0,Wf.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"".concat(t.accent," p-2 sm:p-3 rounded-xl"),children:(0,Wf.jsx)(C,{className:"text-white w-6 h-6 sm:w-7 sm:h-7"})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-xl sm:text-2xl font-bold ".concat(t.text),children:"Admin Panel"}),(0,Wf.jsx)("p",{className:"text-xs sm:text-sm ".concat(t.subtext),children:"Kelola semua data sistem"})]})]}),(0,Wf.jsxs)("button",{onClick:n,className:"flex items-center justify-center gap-2 px-4 py-2 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all ").concat(t.shadow," text-xs sm:text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(im,{size:16}),"Logout Admin"]})]})}),(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-2"),children:(0,Wf.jsx)("div",{className:"flex gap-1 overflow-x-auto no-scrollbar lg:justify-start lg:gap-2",children:[{id:"employees",label:"Karyawan",icon:Jf},{id:"calendar",label:"Kalender",icon:O},{id:"tasks",label:"Tasks",icon:x},{id:"attendance",label:"Kehadiran",icon:E}].map(e=>(0,Wf.jsxs)("button",{onClick:()=>s(e.id),className:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl font-medium transition-all text-xs sm:text-sm whitespace-nowrap ".concat(a===e.id?"".concat(t.accent," text-white ").concat(t.shadow):"".concat(t.badge," hover:bg-white/5")),children:[(0,Wf.jsx)(e.icon,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),e.label]},e.id))})}),"employees"===a&&(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsx)(Jf,{className:"text-blue-500",size:24}),(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(t.text),children:"Manajemen Karyawan"})]}),(0,Wf.jsxs)("button",{onClick:()=>{if(M)L(!1),z(""),B("");else{const e=i.length>0?Math.max(...i.map(e=>e.id))+1:1;B(e.toString()),L(!0)}},className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[M?(0,Wf.jsx)(v,{size:16}):(0,Wf.jsx)(b,{size:16}),M?"Batal":"Tambah Karyawan"]})]}),M&&(0,Wf.jsxs)("div",{className:"mb-6 p-5 rounded-xl border-2 ".concat(t.borderColor," ").concat(t.accentSoftBg," animate-fade-in"),children:[(0,Wf.jsxs)("h4",{className:"text-sm font-bold ".concat(t.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(b,{size:14,className:"text-blue-400"}),"Tambah Karyawan Baru"]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-xs font-semibold ".concat(t.text," mb-1.5"),children:"Nama Karyawan:"}),(0,Wf.jsx)("input",{type:"text",value:F,onChange:e=>z(e.target.value),placeholder:"Contoh: Budi Santoso",className:"w-full px-3 py-2 rounded-lg border ".concat(t.input," text-sm focus:outline-none focus:border-blue-500")})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-xs font-semibold ".concat(t.text," mb-1.5"),children:"ID Karyawan:"}),(0,Wf.jsx)("input",{type:"number",value:U,onChange:e=>B(e.target.value),placeholder:"Contoh: 4",className:"w-full px-3 py-2 rounded-lg border ".concat(t.input," text-sm focus:outline-none focus:border-blue-500")})]})]}),(0,Wf.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Wf.jsx)("button",{onClick:()=>{L(!1),z(""),B("")},className:"px-4 py-2 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all text-sm font-medium"),children:"Batal"}),(0,Wf.jsxs)("button",{onClick:async()=>{if(!F.trim()||!U.trim())return void alert("Harap isi Nama dan ID!");await h(F,U)&&(L(!1),z(""),B(""))},className:"flex items-center gap-2 px-5 py-2 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all text-sm font-bold hover:scale-[1.02] active:scale-[0.98] shadow-lg"),children:[(0,Wf.jsx)(om,{size:16}),"Simpan Karyawan"]})]})]}),(0,Wf.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-5 border-2 ").concat(t.borderColor),children:[o&&o.id===e.id?(0,Wf.jsxs)("div",{className:"space-y-4",children:[(0,Wf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-1"),children:"Nama:"}),(0,Wf.jsx)("input",{type:"text",value:o.name,onChange:e=>l(c(c({},o),{},{name:e.target.value})),className:"w-full px-3 py-2 rounded-lg border ".concat(t.input," text-sm")})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(t.text," mb-1"),children:"ID:"}),(0,Wf.jsx)("input",{type:"number",value:o.id,onChange:e=>l(c(c({},o),{},{id:parseInt(e.target.value)})),className:"w-full px-3 py-2 rounded-lg border ".concat(t.input," text-sm")})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-2",children:[(0,Wf.jsxs)("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(om,{size:16}),"Simpan"]}),(0,Wf.jsx)("button",{onClick:()=>l(null),className:"px-4 py-2 rounded-lg ".concat(t.badge," hover:bg-white/5 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"})]})]}):(0,Wf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h4",{className:"text-lg font-bold ".concat(t.text),children:e.name}),(0,Wf.jsxs)("p",{className:"text-sm ".concat(t.subtext),children:["ID: ",e.id," | Status: ",e.checkedIn?"\u2705 Checked In":"\u2b55 Not Checked In"," | Shift: ",e.shift||"-"," | Tasks: \ud83d\udcbc ",e.workTasks.length]})]}),(0,Wf.jsxs)("div",{className:"flex gap-2",children:[(0,Wf.jsxs)("button",{onClick:()=>d(e),className:"flex items-center gap-2 px-3 py-2 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),title:"Edit Karyawan",children:[(0,Wf.jsx)(lm,{size:16}),"Edit"]}),(0,Wf.jsxs)("button",{onClick:()=>f(e.id),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-red-600/20 text-red-500 border-2 border-red-500/20 hover:bg-red-600/30 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]",title:"Hapus Karyawan",children:[(0,Wf.jsx)(w,{size:16}),"Hapus"]})]})]}),o&&o.id===e.id?null:(0,Wf.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,Wf.jsxs)("div",{children:[(0,Wf.jsxs)("h5",{className:"text-sm font-semibold ".concat(t.text," mb-2"),children:["\ud83d\udcbc Task Pekerjaan (",e.workTasks.length,")"]}),(0,Wf.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:e.workTasks.map(t=>(0,Wf.jsxs)("div",{className:"flex items-center justify-between bg-white/5 border border-white/10 rounded p-2 text-xs",children:[(0,Wf.jsx)("span",{className:t.completed?"line-through opacity-60":"",children:t.task}),(0,Wf.jsx)("button",{onClick:()=>m(e.id,"work",t.id),className:"text-blue-300 hover:text-blue-200",title:"Hapus task",children:(0,Wf.jsx)(w,{size:14})})]},t.id))})]})})]},e.id))})]}),"calendar"===a&&(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,Wf.jsx)(O,{className:"text-blue-300",size:24}),(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(t.text),children:"Edit Kalender Kehadiran"})]}),(0,Wf.jsx)("div",{className:"space-y-6",children:i.map(e=>{const n=new Date(k,g+1,0).getDate(),r=new Date(k,g,1).getDay();return(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-5 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("h4",{className:"text-lg font-bold ".concat(t.text," mb-4"),children:[e.name," - ",S[g]," ",k]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["Min","Sen","Sel","Rab","Kam","Jum","Sab"].map(e=>(0,Wf.jsx)("div",{className:"text-center text-xs font-medium ".concat(t.subtext," py-1.5"),children:e},e)),[...Array(r)].map((e,t)=>(0,Wf.jsx)("div",{},"e-".concat(t))),[...Array(n)].map((n,r)=>{var a,s,i,o,l,c;const u=r+1,d=null===(a=T[e.name])||void 0===a||null===(s=a[g])||void 0===s?void 0:s[u],h=d&&d.status&&"belum"!==d.status,f=d&&"lembur"===d.status,m=f&&d.overtimeBaseStatus?d.overtimeBaseStatus:null===d||void 0===d?void 0:d.status;return(0,Wf.jsx)("div",{className:"relative",children:h?f?(0,Wf.jsxs)("button",{onClick:()=>_(e.name,g,u,k),className:"w-full calendar-cell rounded-lg p-2.5 text-center text-white text-xs font-medium hover:scale-105 transition-transform cursor-pointer shadow-sm overflow-hidden relative",title:"".concat(u," ").concat(S[g],": ").concat("telat"===m?"Telat":"Hadir"," + Lembur").concat(d.lateHours>0?" (".concat(d.lateHours,"h telat)"):""),children:[(0,Wf.jsx)("div",{className:"absolute inset-0 ".concat((null===(i=N[m])||void 0===i?void 0:i.bg)||"bg-blue-600"),style:{clipPath:"polygon(0 0, 50% 0, 50% 100%, 0 100%)"}}),(0,Wf.jsx)("div",{className:"absolute inset-0 ".concat((null===N||void 0===N||null===(o=N.lembur)||void 0===o?void 0:o.bg)||"bg-emerald-600"),style:{clipPath:"polygon(50% 0, 100% 0, 100% 100%, 50% 100%)"}}),(0,Wf.jsx)("span",{className:"relative z-10",children:u})]}):(0,Wf.jsx)("button",{onClick:()=>_(e.name,g,u,k),className:"w-full calendar-cell ".concat((null===N||void 0===N||null===(l=N[d.status])||void 0===l?void 0:l.bg)||"bg-blue-600"," rounded-lg p-2.5 text-center text-white text-xs font-medium hover:scale-105 transition-transform cursor-pointer shadow-sm"),title:"".concat(u," ").concat(S[g],": ").concat((null===N||void 0===N||null===(c=N[d.status])||void 0===c?void 0:c.label)||d.status).concat(d.lateHours>0?" (".concat(d.lateHours,"h telat)"):""),children:u}):(0,Wf.jsx)("button",{onClick:()=>_(e.name,g,u,k),className:"w-full calendar-cell ".concat(t.badge," rounded-lg p-2.5 text-center text-xs font-medium border border-dashed border-white/10 hover:scale-105 transition-transform cursor-pointer ").concat(t.text),title:"Klik untuk edit ".concat(u," ").concat(S[g]," ").concat(k),children:u})},u)})]})]},e.id)})})]}),"tasks"===a&&(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,Wf.jsx)(x,{className:"text-blue-500",size:24}),(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(t.text),children:"Manajemen Tasks"})]}),(0,Wf.jsx)("div",{className:"space-y-6",children:i.map(e=>(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-5 border-2 ").concat(t.borderColor),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Wf.jsx)("h4",{className:"text-lg font-bold ".concat(t.text),children:e.name}),(0,Wf.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-950/40 text-blue-200 hover:bg-blue-900/40 transition-all text-sm font-medium border border-blue-500/15 hover:scale-[1.01] active:scale-[0.99]",children:[(0,Wf.jsx)(w,{size:14}),"Reset Data"]})]}),(0,Wf.jsx)("div",{children:(0,Wf.jsxs)("div",{children:[(0,Wf.jsxs)("h5",{className:"text-sm font-semibold ".concat(t.text," mb-2"),children:["\ud83d\udcbc Task Pekerjaan (",e.workTasks.length,")"]}),(0,Wf.jsxs)("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:[e.workTasks.map(t=>(0,Wf.jsxs)("div",{className:"flex items-center justify-between bg-white/5 border border-white/10 rounded p-2 text-xs",children:[(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("p",{className:t.completed?"line-through opacity-60":"",children:t.task}),t.completed&&t.duration&&(0,Wf.jsxs)("p",{className:"text-xs text-blue-200",children:["\u2713 ",t.duration]})]}),(0,Wf.jsx)("button",{onClick:()=>m(e.id,"work",t.id),className:"text-blue-300 hover:text-blue-200 ml-2",title:"Hapus task",children:(0,Wf.jsx)(w,{size:14})})]},t.id)),0===e.workTasks.length&&(0,Wf.jsx)("p",{className:"text-xs text-slate-400 text-center py-4",children:"Tidak ada task"})]})]})})]},e.id))})]}),"attendance"===a&&(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,Wf.jsx)(O,{className:"text-blue-300",size:24}),(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(t.text),children:"Data Kehadiran"})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-3 gap-4",children:i.map(e=>{const n=j(e.name,g);return(0,Wf.jsxs)("div",{className:"".concat(t.badge," rounded-xl p-4 border-2 ").concat(t.borderColor),children:[(0,Wf.jsx)("h4",{className:"text-lg font-bold ".concat(t.text," mb-3"),children:e.name}),(0,Wf.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Wf.jsxs)("div",{className:"flex justify-between",children:[(0,Wf.jsx)("span",{className:t.subtext,children:"Hadir:"}),(0,Wf.jsx)("span",{className:"font-semibold text-blue-200",children:n.hadir})]}),(0,Wf.jsxs)("div",{className:"flex justify-between",children:[(0,Wf.jsx)("span",{className:t.subtext,children:"Telat:"}),(0,Wf.jsxs)("span",{className:"font-semibold text-blue-200",children:[n.telat," (",n.totalLateHours,"h)"]})]}),(0,Wf.jsxs)("div",{className:"flex justify-between",children:[(0,Wf.jsx)("span",{className:t.subtext,children:"Lembur:"}),(0,Wf.jsx)("span",{className:"font-semibold text-blue-200",children:n.lembur})]}),(0,Wf.jsxs)("div",{className:"flex justify-between",children:[(0,Wf.jsx)("span",{className:t.subtext,children:"Libur:"}),(0,Wf.jsx)("span",{className:"font-semibold text-blue-200",children:n.libur})]})]})]},e.id)})})]}),(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl ").concat(t.shadow," border-2 ").concat(t.borderColor," p-6"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,Wf.jsx)(cm,{className:"text-blue-300",size:24}),(0,Wf.jsx)("h3",{className:"text-xl font-bold ".concat(t.text),children:"Aksi Sistem"})]}),(0,Wf.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Wf.jsxs)("button",{onClick:A,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all ").concat(t.shadow," font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(y,{size:18}),"Export Data"]}),(0,Wf.jsxs)("label",{className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg ".concat(t.accent," text-white ").concat(t.accentHover," transition-all ").concat(t.shadow," font-medium cursor-pointer hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(y,{size:18}),"Import Data",(0,Wf.jsx)("input",{type:"file",accept:".json",onChange:D,className:"hidden"})]}),(0,Wf.jsxs)("button",{onClick:R,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500 transition-all ".concat(t.shadow," font-medium hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(I,{size:18}),"Perbaiki Data Lembur"]}),(0,Wf.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg ".concat(t.accentSoftBg," ").concat(t.accentText," ").concat(t.accentHover," transition-all ").concat(t.shadow," font-medium border ").concat(t.borderColor," hover:scale-[1.01] active:scale-[0.99]"),children:[(0,Wf.jsx)(w,{size:18}),"Clear All Data"]})]})]})]})});um.displayName="AdminPanel";const dm=e=>{let{currentTheme:t,tasks:n,addTask:a,deleteTask:s,toggleTask:i}=e;const[o,l]=(0,r.useState)("");return(0,Wf.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl shadow-md border-2 ").concat(t.borderColor," p-4 sm:p-6"),children:(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 p-2.5 sm:p-3 rounded-xl shadow-lg",children:(0,Wf.jsx)(I,{className:"text-white w-5 h-5 sm:w-6 sm:h-6"})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-xl sm:text-2xl font-bold ".concat(t.text),children:"Mbak Page"}),(0,Wf.jsx)("p",{className:"text-[10px] sm:text-sm ".concat(t.subtext),children:"Manajemen task mandiri dan terpisah."})]})]})}),(0,Wf.jsx)("div",{className:"".concat(t.card," rounded-2xl shadow-md border-2 ").concat(t.borderColor," p-4 sm:p-6"),children:(0,Wf.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(a(o),l(""))},className:"flex flex-col sm:flex-row gap-3",children:[(0,Wf.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"Tambah task baru untuk Mbak...",className:"flex-1 px-4 py-2.5 sm:py-3 rounded-xl border-2 ".concat(t.input," focus:outline-none focus:border-purple-500 transition-all font-medium text-sm")}),(0,Wf.jsxs)("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-2.5 sm:py-3 rounded-xl hover:from-purple-500 hover:to-indigo-500 transition-all shadow-lg flex items-center justify-center gap-2 font-bold text-sm",children:[(0,Wf.jsx)(b,{className:"w-4.5 h-4.5 sm:w-5 sm:h-5"}),"Tambah"]})]})}),(0,Wf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl shadow-md border-2 ").concat(t.borderColor," p-4 sm:p-6"),children:[(0,Wf.jsxs)("h3",{className:"text-base sm:text-lg font-bold ".concat(t.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(j,{className:"text-purple-400 w-4 h-4 sm:w-[18px] sm:h-[18px]"}),"Task Aktif (",n.filter(e=>!e.completed).length,")"]}),(0,Wf.jsx)("div",{className:"space-y-3",children:0===n.filter(e=>!e.completed).length?(0,Wf.jsx)("p",{className:"text-center py-6 sm:py-8 text-xs sm:text-sm ".concat(t.subtext," italic"),children:"Tidak ada task aktif"}):n.filter(e=>!e.completed).map(e=>(0,Wf.jsx)("div",{className:"".concat(t.badge," rounded-xl p-3 sm:p-4 border-2 border-transparent hover:border-purple-500/30 transition-all group"),children:(0,Wf.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Wf.jsxs)("div",{className:"flex items-start gap-2 sm:gap-3 flex-1",children:[(0,Wf.jsx)("button",{onClick:()=>i(e.id),className:"mt-1 w-4 h-4 sm:w-5 sm:h-5 rounded-full border-2 border-purple-400 flex-shrink-0 hover:bg-purple-400/20 transition-all"}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:"text-xs sm:text-sm font-bold ".concat(t.text),children:e.task}),(0,Wf.jsxs)("p",{className:"text-[9px] sm:text-[10px] ".concat(t.subtext," mt-1"),children:["\ud83d\udd52 ",e.createdAt]})]})]}),(0,Wf.jsx)("button",{onClick:()=>s(e.id),className:"text-slate-400 hover:text-red-400 sm:opacity-0 sm:group-hover:opacity-100 transition-all",children:(0,Wf.jsx)(w,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})},e.id))})]}),(0,Wf.jsxs)("div",{className:"".concat(t.card," rounded-2xl shadow-md border-2 ").concat(t.borderColor," p-4 sm:p-6"),children:[(0,Wf.jsxs)("h3",{className:"text-base sm:text-lg font-bold ".concat(t.text," mb-4 flex items-center gap-2"),children:[(0,Wf.jsx)(x,{className:"text-green-400 w-4 h-4 sm:w-[18px] sm:h-[18px]"}),"Selesai (",n.filter(e=>e.completed).length,")"]}),(0,Wf.jsx)("div",{className:"space-y-3",children:0===n.filter(e=>e.completed).length?(0,Wf.jsx)("p",{className:"text-center py-6 sm:py-8 text-xs sm:text-sm ".concat(t.subtext," italic"),children:"Belum ada task selesai"}):n.filter(e=>e.completed).map(e=>(0,Wf.jsx)("div",{className:"".concat(t.badge," rounded-xl p-3 sm:p-4 opacity-70 border-2 border-transparent transition-all group"),children:(0,Wf.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Wf.jsxs)("div",{className:"flex items-start gap-2 sm:gap-3 flex-1",children:[(0,Wf.jsx)("button",{onClick:()=>i(e.id),className:"mt-1 w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:(0,Wf.jsx)(x,{className:"text-white w-2.5 h-2.5 sm:w-3 sm:h-3"})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("p",{className:"text-xs sm:text-sm font-bold ".concat(t.text," line-through"),children:e.task}),(0,Wf.jsxs)("p",{className:"text-[9px] sm:text-[10px] ".concat(t.subtext," mt-1"),children:["\u2705 Selesai pada: ",e.completedAt]})]})]}),(0,Wf.jsx)("button",{onClick:()=>s(e.id),className:"text-slate-400 hover:text-red-400 sm:opacity-0 sm:group-hover:opacity-100 transition-all",children:(0,Wf.jsx)(w,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})},e.id))})]})]})]})};const hm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear();const t={};return Cf.forEach(n=>{t[n.name]={};for(let r=0;r<12;r++){const a=new Date(e,r+1,0).getDate();t[n.name][r]={};for(let e=1;e<=a;e++)t[n.name][r][e]={status:"belum",lateHours:0}}}),t},fm={Moon:f,Sun:m,Palette:p},mm=()=>{var e,t;const[n,a]=(0,r.useState)("dashboard"),[s,i]=(0,r.useState)(()=>{try{const e=localStorage.getItem(Lf.THEME);return e&&Mf[e]?e:"dark"}catch(e){return"dark"}}),[o,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[M,L]=(0,r.useState)(!0),[F,z]=(0,r.useState)(!1),[U,B]=(0,r.useState)(!1),[V,H]=(0,r.useState)(""),[q,K]=(0,r.useState)(""),[W,G]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(null),[J,X]=(0,r.useState)(null),[$,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)("employees"),[ne,re]=(0,r.useState)(!1),ae=(0,r.useRef)(!1),se=(0,r.useRef)(!1),ie=(0,r.useRef)(!1),[oe,le]=(0,r.useState)(!1),ce=(0,r.useRef)(!1),[ue,de]=(0,r.useState)(!1),[he,fe]=(0,r.useState)(null),me=(0,r.useRef)(0),[pe,ge]=(0,r.useState)((new Date).getMonth()),[ve,ye]=(0,r.useState)((new Date).getFullYear()),[be,xe]=(0,r.useState)([]),we=Mf[s]||Mf.dark;(0,r.useEffect)(()=>{try{localStorage.setItem(Lf.THEME,s)}catch(e){}},[s]),(0,r.useEffect)(()=>{document.documentElement.setAttribute("data-theme",s)},[s]);const ke=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=(new Date).toLocaleTimeString("id-ID"),r="[".concat(n,"] \ud83d\udd04 ").concat(e).concat(t?": "+t:"");console.log(r),fe(e),ht("\u23f3 ".concat(e,"..."),"info","action-".concat(Date.now()))},Se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=(new Date).toLocaleTimeString("id-ID"),r="[".concat(n,"] \u2705 ").concat(e," berhasil").concat(t?": "+t:"");console.log(r),fe(null),ht("\u2705 ".concat(e," berhasil!"),"success","success-".concat(Date.now()))},Te=e=>{me.current+=1,de(!0),he||fe(e),console.log("\ud83d\udcbe [SAVE START] ".concat(e," - Active operations: ").concat(me.current))},Ne=e=>{me.current=Math.max(0,me.current-1),console.log("\ud83d\udcbe [SAVE END] ".concat(e," - Active operations: ").concat(me.current)),0===me.current&&(de(!1),fe(null))},[Ee,_e]=(0,r.useState)(()=>hm(ve)),[Ie,Ce]=(0,r.useState)([]),[je,Ae]=(0,r.useState)(""),[De,Pe]=(0,r.useState)(null),[Re,Oe]=(0,r.useState)(null),[Me,Le]=(0,r.useState)(!1),[Fe,ze]=(0,r.useState)(!1),[Ue,Be]=(0,r.useState)([]),[Ve,He]=(0,r.useState)((new Date).getMonth()),[qe,Ke]=(0,r.useState)((new Date).getFullYear()),[We,Ge]=(0,r.useState)(()=>{const e=localStorage.getItem("shiftScheduleWeek");return e?parseInt(e,10):0}),Qe=(0,r.useRef)((()=>{const e=localStorage.getItem("shiftScheduleWeek");return e?parseInt(e,10):0})()),Ye=(0,r.useRef)({month:(new Date).getMonth(),year:(new Date).getFullYear()});(0,r.useEffect)(()=>{Ye.current={month:Ve,year:qe}},[Ve,qe]);const[Je,Xe]=(0,r.useState)(!1),[$e,Ze]=(0,r.useState)(null),[et,tt]=(0,r.useState)(""),[nt,rt]=(0,r.useState)([]),[at,st]=(0,r.useState)(new Date),[it,ot]=(0,r.useState)(null),[lt,ct]=(0,r.useState)(""),[ut,dt]=(0,r.useState)([]),ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n={id:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),message:e,type:t,timestamp:(new Date).toISOString()};rt(t=>t.find(t=>t.message===e&&Date.now()-new Date(t.timestamp).getTime()<5e3)?t:[...t,n]),setTimeout(()=>{rt(e=>e.filter(e=>e.id!==n.id))},1e4)},ft=()=>{const e=(new Date).getHours();return e>=9&&e<17?"pagi":"malam"},[mt,pt]=(0,r.useState)([{id:1,name:"Desta",baseSalary:8e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!0,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[],isBackup:!0},{id:2,name:"Ariel",baseSalary:7e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]},{id:3,name:"Robert",baseSalary:65e5,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]}]),gt=Ff(ht,mt,se,{startSaveOperation:Te,endSaveOperation:Ne}),vt=(0,r.useRef)(gt.setOrders);(0,r.useEffect)(()=>{vt.current=gt.setOrders},[gt.setOrders]);const[yt,bt]=(0,r.useState)({}),[xt,wt]=(0,r.useState)(null),[kt,St]=(0,r.useState)(!1),[Tt,Nt]=(0,r.useState)(null),[Et,_t]=(0,r.useState)("today"),[It,Ct]=(0,r.useState)("all"),[jt,At]=(0,r.useState)(null),[Dt,Pt]=(0,r.useState)("history"),[Rt,Ot]=(0,r.useState)("all"),[Mt,Lt]=(0,r.useState)(null),[Ft,zt]=(0,r.useState)(""),[Ut,Bt]=(0,r.useState)(null),[Vt,Ht]=(0,r.useState)(""),[qt,Kt]=(0,r.useState)([]),[Wt,Gt]=(0,r.useState)(!0),[Qt,Yt]=(0,r.useState)([]),[Jt,Xt]=(0,r.useState)([]),[$t,Zt]=(0,r.useState)((new Date).toDateString()),[en,tn]=(0,r.useState)(null),[nn,rn]=(0,r.useState)(0),[an,sn]=(0,r.useState)(!1),[on,ln]=(0,r.useState)(""),[cn,un]=(0,r.useState)(!1),dn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=mt.find(t=>t.id===e),a=new Date,s="".concat(a.getHours().toString().padStart(2,"0"),":").concat(a.getMinutes().toString().padStart(2,"0")),i={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),empId:e,empName:null===r||void 0===r?void 0:r.name,type:t,reason:n,startTime:s,timestamp:a.getTime()};Yt(e=>[...e,i])},hn=e=>{Yt(t=>t.filter(t=>t.empId!==e))};(0,r.useEffect)(()=>{const e=setInterval(()=>st(new Date),1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=e=>{!Re||e.target.closest(".edit-modal")||e.target.closest(".calendar-cell")||Oe(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[Re]),(0,r.useEffect)(()=>{const e=e=>{if(e.ctrlKey&&"n"===e.key){e.preventDefault();const t=document.querySelector('input[type="text"][placeholder*="Task"]');t&&t.focus()}if(e.ctrlKey&&"d"===e.key&&(e.preventDefault(),a("dashboard")),e.ctrlKey&&"l"===e.key&&(e.preventDefault(),a("leaderboard")),e.ctrlKey&&"s"===e.key&&(e.preventDefault(),a("statistics")),e.ctrlKey&&"t"===e.key){e.preventDefault();const t=Object.keys(Mf).filter(e=>{var t;return!(null!==(t=Mf[e])&&void 0!==t&&t.hidden)}),n=t.indexOf(s);i(t[(n+1)%t.length]||"dark")}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=new Date,t=e.getHours(),n=e.getDate(),r=e.getMonth(),a=ft(),s=Of[a];pt(e=>{let i=!1;const o=e.map(e=>{if(e.checkedIn)return e;let o;return o="malam"===a&&t>=0&&t<s.end?24-s.start+t:t-s.start,o>=3&&"belum"===e.status?(i=!0,_e(t=>{var s;return c(c({},t),{},{[e.name]:c(c({},t[e.name]),{},{[r]:c(c({},null===(s=t[e.name])||void 0===s?void 0:s[r]),{},{[n]:{status:"libur",lateHours:0,shift:a}})})})}),c(c({},e),{},{status:"libur"})):e});return i?o:e})},6e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{Yt(e=>[...e])},6e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{Xt(e=>[...e])},6e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{0},[Jt]),(0,r.useEffect)(()=>{const e=(async()=>{try{const e=async()=>{const e=sessionStorage.getItem("appUnlocked"),t=sessionStorage.getItem("appUnlockExpiry");if("true"===e&&t){const e=parseInt(t);if(Date.now()<e){console.log("\u2705 App unlock session valid - loading data...");try{const e=await _f.loadInitialData();if(e){if(e.employees&&(console.log("\u2705 Restoring employees:",e.employees.length),e.employees.forEach(e=>{var t;console.log("\ud83d\udce5 Firebase Load: ".concat(e.name," - checkedIn=").concat(e.checkedIn,", history=").concat((null===(t=e.completedTasksHistory)||void 0===t?void 0:t.length)||0))}),pt(t=>e.employees.map(e=>{const n=null===t||void 0===t?void 0:t.find(t=>t.id===e.id),r=Cf.find(t=>t.id===e.id)||{},a=[...(null===n||void 0===n?void 0:n.completedTasksHistory)||[],...(e.completedTasksHistory||[]).map(e=>{if(!e.shiftDate&&e.completedAt)try{e.shiftDate=new Date(e.completedAt).toDateString()}catch(t){}return e})].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.shiftDate===e.shiftDate));return c(c(c({},r),e),{},{completedTasksHistory:a,isBackup:r.isBackup||!1,isAdmin:void 0!==e.isAdmin?e.isAdmin:r.isAdmin})}))),e.yearlyAttendance&&(console.log("\u2705 Restoring yearly attendance"),_e(e.yearlyAttendance)),e.productivityData&&(console.log("\u2705 Restoring productivity data:",e.productivityData.length),dt(e.productivityData)),e.attentions&&(console.log("\u2705 Restoring attentions:",e.attentions.length),Ce(e.attentions)),e.currentPeriod&&(console.log("\u2705 Restoring current period"),ge(e.currentPeriod.currentMonth),ye(e.currentPeriod.currentYear)),e.shiftSchedule){const t=e.shiftSchedule.data||e.shiftSchedule.scheduleData;console.log("\u2705 Restoring shift schedule:",{hasData:!!t,dataLength:(null===t||void 0===t?void 0:t.length)||0}),t&&Array.isArray(t)&&(Be(t),He(e.shiftSchedule.month||(new Date).getMonth()),Ke(e.shiftSchedule.year||(new Date).getFullYear()))}ie.current=!0,console.log("\u2705 Initial data loaded - saves now enabled"),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then(e=>{"granted"===e?console.log("\u2705 Browser notification permission granted"):console.log("\u26a0\ufe0f Browser notification permission denied")}),le(!0),setTimeout(()=>{pn()},1e3)}}catch(n){console.error("\u274c Error loading initial data:",n)}return l(!1),!0}return console.log("\u23f0 App unlock session expired"),sessionStorage.removeItem("appUnlocked"),sessionStorage.removeItem("appUnlockExpiry"),l(!0),ht("\u23f0 Session expired. Please login again.","warning"),!1}return!1};await e();const t=setInterval(()=>{e()},3e5),n=If.onAuthStateChange(e=>{e?(console.log("\u2705 User authenticated:",e.email),"josepratama157@gmail.com"===e.email?z(!0):z(!1)):(console.log("\u274c No user authenticated"),z(!1))});return L(!1),{unsubscribe:n,sessionCheckInterval:t}}catch(e){return console.error("\u274c Error checking auth status:",e),L(!1),{unsubscribe:null,sessionCheckInterval:null}}})();return()=>{e&&"function"===typeof e.then&&e.then(e=>{let{unsubscribe:t,sessionCheckInterval:n}=e;t&&t(),n&&clearInterval(n)})}},[]),(0,r.useEffect)(()=>{if(o||M)console.log("\u23f8\ufe0f Skipping Firebase listeners - app locked or checking auth");else{console.log("\ud83d\udd25 Setting up Firebase realtime listeners...");try{const e=_f.onEmployeesChange(e=>{if(ae.current)console.log("\u23f8\ufe0f Skipping Firebase sync - user action in progress");else if(e&&Array.isArray(e)){const t=e.map(e=>c(c({},e),{},{completedTasksHistory:(e.completedTasksHistory||[]).map(e=>{if(!e.shiftDate&&e.completedAt)try{e.shiftDate=new Date(e.completedAt).toDateString()}catch(t){}return e})})),n=t.reduce((e,t)=>{var n;return e+((null===(n=t.completedTasksHistory)||void 0===n?void 0:n.length)||0)},0);console.log("\ud83d\udce5 Firebase sync:",t.length,"employees,",n,"history tasks"),St(!0),Nt(new Date),setTimeout(()=>St(!1),2e3),se.current=!0,setTimeout(()=>{se.current=!1},100),pt(e=>t.map((t,n)=>{const r=e.find(e=>e.id===t.id),a=Cf.find(e=>e.id===t.id)||{};if(r){const e=!0===r.checkedIn,n=!0===t.checkedIn;if(e&&n){0;const e=((e,t,n)=>{const r=new Set((n||[]).map(e=>e.id)),a=(t||[]).filter(e=>!r.has(e.id));if(!e||0===e.length)return a;const s=new Set(e.map(e=>e.id));return[...e.filter(e=>a.some(t=>t.id===e.id)).map(e=>{const t=a.find(t=>t.id===e.id);if(t){const n=e.completed||t.completed,r=e.paused||e.pauseStartTime||e.pauseHistory&&e.pauseHistory.length>0;return c(c(c({},t),e),{},{completed:n,progress:n?100:Math.max(e.progress||0,t.progress||0),completedAt:n?e.completedAt||t.completedAt:null,paused:r?e.paused:t.paused,pauseStartTime:r?e.pauseStartTime:t.pauseStartTime,pauseHistory:r?e.pauseHistory:t.pauseHistory})}return e}),...a.filter(e=>!s.has(e.id))]})(r.workTasks,t.workTasks,r.completedTasksHistory),n=[...r.completedTasksHistory||[],...t.completedTasksHistory||[]].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.completedAt===e.completedAt));return c(c(c({},a),r),{},{workTasks:e,completedTasksHistory:n,lateHours:void 0!==t.lateHours?t.lateHours:r.lateHours,checkInTime:t.checkInTime||r.checkInTime,shift:t.shift||r.shift,shiftEndTime:t.shiftEndTime||r.shiftEndTime,status:t.status||r.status,overtime:void 0!==t.overtime?t.overtime:r.overtime,baseSalary:t.baseSalary||r.baseSalary||a.baseSalary,izinTime:t.izinTime||r.izinTime,adminTab:t.adminTab||r.adminTab,shiftEndAdjustment:void 0!==t.shiftEndAdjustment?t.shiftEndAdjustment:r.shiftEndAdjustment,isBackup:a.isBackup||!1,isAdmin:void 0!==t.isAdmin?t.isAdmin:void 0!==r.isAdmin?r.isAdmin:a.isAdmin})}if(e&&!n){console.log("\u2705 SYNC: ".concat(r.name," ended shift in another browser - syncing"));const e=[...r.completedTasksHistory||[],...t.completedTasksHistory||[]].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.shiftDate===e.shiftDate));return c(c(c({},a),t),{},{completedTasksHistory:e,isBackup:a.isBackup||!1})}if(!e&&n){console.log("\u2705 SYNC: ".concat(r.name," started shift in another browser - syncing"));const e=[...r.completedTasksHistory||[],...t.completedTasksHistory||[]].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.shiftDate===e.shiftDate));return c(c(c({},a),t),{},{completedTasksHistory:e,isBackup:a.isBackup||!1})}{0;r.workTasks&&r.workTasks.length,t.workTasks&&t.workTasks.length;const e=(e,t)=>e&&0!==e.length?t.map(t=>{const n=e.find(e=>e.id===t.id);if(n){const e=n.completed||t.completed;return c(c({},t),{},{completed:e,progress:e?100:Math.max(n.progress||0,t.progress||0),completedAt:e?n.completedAt||t.completedAt:null})}return t}):t||[],n=r.completedTasksHistory||[],s=t.completedTasksHistory||[],i=[...n,...s].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id&&t.shiftDate===e.shiftDate));return console.log("\ud83d\udd04 MERGE HISTORY (Case 4): ".concat(r.name," - Local: ").concat(n.length,", Firebase: ").concat(s.length,", Merged: ").concat(i.length)),c(c(c({},a),t),{},{workTasks:t.workTasks?e(r.workTasks,t.workTasks):r.workTasks||[],completedTasksHistory:i,isBackup:a.isBackup||!1})}}return c(c(c({},a),t),{},{completedTasksHistory:t.completedTasksHistory||[],isBackup:a.isBackup||!1})})),setTimeout(()=>{se.current=!1},100)}else console.warn("\u26a0\ufe0f No employees data from Firebase or invalid format")}),t=_f.onAttentionsChange(e=>{e&&Array.isArray(e)&&(console.log("\ud83d\udce5 RECEIVED FROM FIREBASE - ATTENTIONS:",{count:e.length,active:e.filter(e=>!e.completed).length,timestamp:(new Date).toLocaleTimeString()}),St(!0),Nt(new Date),setTimeout(()=>St(!1),2e3),se.current=!0,Ce(t=>e.map(e=>{const n=t.find(t=>t.id===e.id);if(n){const t=n.readBy||[],r=e.readBy||[],a=[...new Set([...t,...r])],s=mt.map(e=>e.name).every(e=>a.includes(e));return console.log("\ud83d\udd04 MERGE ATTENTION: ".concat(e.id," - Local: ").concat(t.length,", Firebase: ").concat(r.length,", Merged: ").concat(a.length)),c(c({},e),{},{readBy:a,completed:s||e.completed})}return e})),setTimeout(()=>{se.current=!1},100))}),n=_f.onYearlyAttendanceChange(e=>{e&&"object"===typeof e?(console.log("\ud83d\udce5 Received yearly attendance from Firebase"),se.current=!0,_e(e),setTimeout(()=>{se.current=!1},100)):console.warn("\u26a0\ufe0f No yearly attendance data from Firebase")}),r=_f.onProductivityDataChange(e=>{e&&Array.isArray(e)&&(se.current=!0,dt(e),setTimeout(()=>{se.current=!1},100))}),a=_f.onCurrentPeriodChange((e,t)=>{se.current=!0,void 0!==e&&ge(e),void 0!==t&&ye(t),setTimeout(()=>{se.current=!1},100)}),s=_f.onShiftScheduleChange(e=>{if(e&&"object"===typeof e){const t=e.data||e.scheduleData;if(t&&Array.isArray(t)){console.log("\ud83d\udd04 Firebase shift schedule update:",{dataLength:t.length,month:e.month,year:e.year}),se.current=!0;const n=Ye.current,r=n.month===(e.month||(new Date).getMonth()),a=n.year===(e.year||(new Date).getFullYear());r&&a?(console.log("\u2705 Syncing shift schedule (View matches DB)"),Be(t),He(e.month||(new Date).getMonth()),Ke(e.year||(new Date).getFullYear())):console.log("\u23f8\ufe0f Skipping shift schedule sync: View (".concat(n.month+1,"/").concat(n.year,") != DB (").concat((e.month||0)+1,"/").concat(e.year,")")),setTimeout(()=>{se.current=!1},100)}else console.warn("\u26a0\ufe0f Invalid shift schedule data from Firebase:",e)}}),i=_f.onOrdersChange(e=>{if(e&&Array.isArray(e)){console.log("\ud83d\udce6 ORDERS LISTENER TRIGGERED:",{count:e.length,timestamp:(new Date).toISOString(),orders:e.map(e=>({id:e.id,username:e.username,status:e.status}))});const t=(null===gt||void 0===gt?void 0:gt.orders)||[];e.forEach(e=>{const n=t.find(t=>t.id===e.id);var r;if("completed"===e.status&&n&&"completed"!==n.status&&(console.log("\u2705 Order completed, dismissing reminder:",e.id),r=e.id,Xt(e=>e.filter(e=>e.orderId!==r))),"process"===e.status&&n&&"process"!==n.status){console.log("\ud83d\udd14 ORDER STATUS CHANGED TO PROCESS:",e.id,e.username);try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.value=800,t.type="sine",n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(a){console.log("\ud83d\udd07 Sound notification not supported")}ht("\ud83d\ude80 ORDER BARU DIPROSES: ".concat(e.username," - ").concat(e.description),"info"),gn("\ud83d\ude80 ORDER BARU DIPROSES!","".concat(e.username," - ").concat(e.description,"\nPlatform: ").concat(e.platform.toUpperCase())),((e,t)=>{console.log("\ud83d\udd14 ADD ORDER REMINDER CALLED:",e,t.username);const n=new Date,r="".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0")),a={id:"order-".concat(e,"-").concat(Date.now()),orderId:e,username:t.username,description:t.description,platform:t.platform,priority:t.priority,startTime:r,timestamp:n.getTime()};console.log("\ud83d\udccc Creating reminder:",a),Xt(t=>{const n=[...t.filter(t=>t.orderId!==e),a];return console.log("\ud83d\udccc Order reminders updated:",n.length),n})})(e.id,e)}}),se.current=!0,vt.current(e),setTimeout(()=>{se.current=!1},100)}}),o=_f.onMbakTasksChange(e=>{e&&Array.isArray(e)?(console.log("\ud83d\udce5 RECEIVED FROM FIREBASE - MBAK TASKS:",{count:e.length,timestamp:(new Date).toLocaleTimeString()}),se.current=!0,xe(e),setTimeout(()=>{se.current=!1},100)):console.warn("\u26a0\ufe0f No mbak tasks data from Firebase or invalid format")});return console.log("\u2705 Firebase realtime listeners active (including orders notifications)!"),()=>{e(),t(),n(),r(),a(),s(),i(),o(),console.log("\ud83d\udd25 Firebase listeners cleaned up")}}catch(e){console.error("\u274c Error setting up Firebase listeners:",e),ht("\u26a0\ufe0f Error connecting to database. Please refresh the page.","error")}}},[o,M]);const fn=async e=>{if(o||M||!ie.current||se.current)console.log("\u23f8\ufe0f Skipping single save - conditions not met");else try{console.log("\u26a1 SINGLE SAVE (".concat(e.name,"):"),(new Date).toLocaleTimeString()),await _f.updateEmployeeTransaction(e),console.log("\u2705 SINGLE SAVE COMPLETED")}catch(t){console.error("\u274c Error in single save:",t),ht("\u26a0\ufe0f Gagal menyimpan data karyawan. Coba lagi.","error")}},mn=async e=>{if(o||M||!ie.current||se.current)console.log("\u23f8\ufe0f Skipping save - conditions not met");else try{console.log("\u26a1 DIRECT SAVE TO FIREBASE:",(new Date).toLocaleTimeString()),await Promise.all([_f.saveEmployees(e),_f.saveAttentions(Ie),_f.saveYearlyAttendance(Ee),_f.saveProductivityData(ut),_f.saveCurrentPeriod(pe,ve),_f.saveMbakTasks(be)]),console.log("\u2705 DIRECT SAVE COMPLETED at",(new Date).toLocaleTimeString())}catch(t){console.error("\u274c Error in direct save:",t),ht("\u26a0\ufe0f Gagal menyimpan data. Coba lagi.","error")}};(0,r.useEffect)(()=>{if(o||M)return void console.log("\u23f8\ufe0f Skipping save - app locked or checking auth");if(!ie.current)return void console.log("\u23f8\ufe0f Skipping save - initial data not loaded yet (preventing data loss)");if(se.current)return void console.log("\u23ed\ufe0f Skipping save - data from Firebase listener");const e=ce.current;e&&(ce.current=!1,console.log("\u26a1 IMMEDIATE SAVE triggered - skipping debounce"));const t="Auto Save";let n=!1;Te(t);const r=setTimeout(async()=>{try{const e=mt.reduce((e,t)=>{var n;return e+((null===(n=t.completedTasksHistory)||void 0===n?void 0:n.length)||0)},0);console.log("\ud83d\udcbe Saving to Firebase:",{employees:mt.length,historyTasks:e,attentions:Ie.length,yearlyAttendanceKeys:Object.keys(Ee).length,mbakTasks:be.length}),await Promise.all([_f.saveAttentions(Ie),_f.saveYearlyAttendance(Ee),_f.saveProductivityData(ut),_f.saveCurrentPeriod(pe,ve),_f.saveMbakTasks(be)]),console.log("\u2705 Save complete at",(new Date).toLocaleTimeString())}catch(e){console.error("\u274c Error saving data to Firebase:",e),ht("\u26a0\ufe0f Gagal menyimpan data. Coba refresh halaman.","error")}finally{n=!0,Ne(t)}},e?0:500);return()=>{clearTimeout(r),n||Ne(t)}},[mt,Ie,Ee,ut,pe,ve,be,o,M]),(0,r.useEffect)(()=>{if(o||M||!ie.current||se.current)return;const e="Simpan Jadwal Shift";let t=!1;Te(e);const n=setTimeout(()=>{const n={scheduleData:Ue,month:Ve,year:qe};console.log("\ud83d\udcbe Shift schedule save:",Ue.length,"days"),_f.saveShiftSchedule(n).catch(e=>console.error("\u274c Error saving shift schedule:",e)).finally(()=>{t=!0,Ne(e)})},500);return()=>{clearTimeout(n),t||Ne(e)}},[Ue,Ve,qe,o,M]),(0,r.useEffect)(()=>{const e=e=>{if(ue||ne||me.current>0){const t="\u26a0\ufe0f Data sedang disimpan ke Firebase! Jangan refresh halaman sekarang.";return e.preventDefault(),e.returnValue=t,console.warn("\ud83d\udeab PREVENTED PAGE REFRESH - Save in progress!"),t}if(!se.current&&null!==gt&&void 0!==gt&&gt.orders&&gt.orders.length>0){const t="\u26a0\ufe0f Ada data yang belum tersimpan. Yakin ingin keluar?";return e.preventDefault(),e.returnValue=t,t}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[ue,ne,null===gt||void 0===gt?void 0:gt.orders]),(0,r.useEffect)(()=>{if(o||M||null===gt||void 0===gt||!gt.orders||!ie.current)return;const e=setInterval(async()=>{if(gt.orders.length>0&&!se.current){Te("Auto Save Orders");try{await _f.saveOrders(gt.orders),console.log("\ud83d\udcbe AUTO-SAVE ORDERS (periodic backup):",{count:gt.orders.length,timestamp:(new Date).toISOString()})}catch(e){console.error("\u274c Auto-save orders error:",e)}finally{Ne("Auto Save Orders")}}},3e5);return()=>clearInterval(e)},[null===gt||void 0===gt?void 0:gt.orders,o,M]);const pn=()=>{let e=!1;pt(t=>{const n=t.map(t=>{const n=[...t.workTasks.filter(e=>e.completed).map(e=>c(c({},e),{},{taskType:"work"}))],r=t.completedTasksHistory;return n.length>0||r.length!==t.completedTasksHistory.length?(e=!0,console.log("\ud83d\udd04 Migrating ".concat(n.length," completed tasks for ").concat(t.name," to history")),c(c({},t),{},{completedTasksHistory:[...r,...n.filter(e=>!r.some(t=>t.id===e.id))],workTasks:t.workTasks.filter(e=>!e.completed)})):c(c({},t),{},{completedTasksHistory:r})});return e&&ht("\u2705 Data history task berhasil dipulihkan!","success"),n})};(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=new Date;pt(t=>(t.forEach(t=>{[...t.workTasks].forEach(n=>{if(n.startTime&&!n.endTime){const[r,a,s=0]=n.startTime.split(":").map(Number),i=new Date;i.setHours(r,a,s,0);const o=Math.floor((e-i)/1e3/60);o>60&&o%60===0&&ht('\u26a0\ufe0f Task "'.concat(n.task,'" dari ').concat(t.name," sudah berjalan ").concat(Math.floor(o/60)," jam"),"warning")}})}),t))},6e4);return()=>clearInterval(e)},[]);const gn=function(e,t){if("Notification"in window&&"granted"===Notification.permission)try{const n=new Notification(e,{body:t,icon:"/logo192.png",badge:"/logo192.png",tag:"order-notification",requireInteraction:!0,silent:!1});setTimeout(()=>n.close(),1e4),n.onclick=()=>{window.focus(),n.close()},console.log("\u2705 Browser notification shown")}catch(n){console.error("\u274c Error showing browser notification:",n)}else console.log("\u26a0\ufe0f Browser notifications not available or permission not granted")};(0,r.useEffect)(()=>{if(!oe||o||M)return;(async()=>{try{const e=await _f.loadInitialData();console.log("\ud83d\udd0d Raw data from Firebase:",e),null!==e&&void 0!==e&&e.orders&&Array.isArray(e.orders)?(console.log("\ud83d\udce6 Orders loaded: ".concat(e.orders.length," orders")),console.log("\ud83d\udce6 Order details:",e.orders),gt.setOrders(e.orders)):console.log("\ud83d\udce6 No orders found in Firebase - data:",e),le(!1)}catch(e){console.error("\u274c Error loading orders:",e)}})()},[oe,o,M]);const vn={hadir:{bg:"bg-emerald-600",calendarBg:"bg-emerald-600",label:"Hadir",pillClass:"bg-emerald-950/25 text-emerald-200"},telat:{bg:"bg-amber-600",calendarBg:"bg-amber-600",label:"Telat",pillClass:"bg-amber-950/25 text-amber-200"},lembur:{bg:"bg-sky-600",calendarBg:"bg-sky-600",label:"Lembur",pillClass:"bg-sky-950/25 text-sky-200"},izin:{bg:"bg-violet-600",calendarBg:"bg-violet-600",label:"Izin",pillClass:"bg-violet-950/25 text-violet-200"},libur:{bg:"bg-slate-600",calendarBg:"bg-slate-600",label:"Libur",pillClass:"bg-slate-900/45 text-slate-200"},sakit:{bg:"bg-rose-600",calendarBg:"bg-rose-600",label:"Sakit",pillClass:"bg-rose-950/25 text-rose-200"},alpha:{bg:"bg-red-700",calendarBg:"bg-red-700",label:"Alpha",pillClass:"bg-red-950/25 text-red-200"}},yn=(e,t)=>{const n=new Date,r=n.getHours(),a=n.toLocaleDateString("id-ID");dt(n=>{const s=n.find(t=>t.empId===e&&t.hour===r&&t.date===a);return s?n.map(n=>n.empId===e&&n.hour===r&&n.date===a?c(c({},n),{},{count:n.count+1,[t]:(n[t]||0)+1}):n):[...n,{empId:e,hour:r,date:a,count:1,[t]:1}]})},bn=async()=>{if("@enc2025"===on){if(window.confirm("\u26a0\ufe0f KONFIRMASI TERAKHIR: Yakin ingin menghapus SEMUA data dari Firebase? Tindakan ini TIDAK DAPAT DIBATALKAN!"))try{Te("Hapus Semua Data");const e=[{id:1,name:"Desta",baseSalary:8e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!0,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[],isBackup:!0},{id:2,name:"Ariel",baseSalary:7e6,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]},{id:3,name:"Robert",baseSalary:65e5,status:"belum",lateHours:0,checkInTime:null,workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[]}],t=hm();await Promise.all([_f.saveEmployees(e),_f.saveAttentions([]),_f.saveYearlyAttendance(t),_f.saveProductivityData([]),_f.saveCurrentPeriod((new Date).getMonth(),(new Date).getFullYear()),_f.saveMbakTasks([])]),console.log("\u2705 All data cleared from Firebase"),sn(!1),ln(""),ht("\u2705 Semua data berhasil dihapus dari Firebase!","success"),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("\u274c Error clearing data:",e),alert("\u274c Gagal menghapus data: "+e.message)}finally{Ne("Hapus Semua Data")}}else alert("\u274c Password salah! Data tidak dihapus.")},xn=async()=>{if(u&&h){if("josepratama157@gmail.com"===u)return alert("\u274c Email admin tidak bisa digunakan untuk unlock aplikasi! Gunakan email user biasa."),void d("");p(!0);try{if((await If.unlockApp(u,h)).success){console.log("\ud83d\udce5 Loading data from Firebase...");const e=await _f.loadInitialData();e&&(e.employees&&(console.log("\u2705 Restoring employees:",e.employees.length),pt(e.employees)),e.yearlyAttendance&&(console.log("\u2705 Restoring yearly attendance"),_e(e.yearlyAttendance)),e.productivityData&&(console.log("\u2705 Restoring productivity data:",e.productivityData.length),dt(e.productivityData)),e.attentions&&(console.log("\u2705 Restoring attentions:",e.attentions.length),Ce(e.attentions)),e.currentPeriod&&(console.log("\u2705 Restoring current period"),ge(e.currentPeriod.currentMonth),ye(e.currentPeriod.currentYear)),e.mbakTasks&&(console.log("\u2705 Restoring mbak tasks:",e.mbakTasks.length),xe(e.mbakTasks)),ie.current=!0,console.log("\u2705 Initial data loaded - saves now enabled"),setTimeout(()=>{pn()},1e3)),l(!1),d(""),f("");const t=Date.now()+864e5;sessionStorage.setItem("appUnlocked","true"),sessionStorage.setItem("appUnlockExpiry",t.toString()),ht("\ud83d\udd13 Aplikasi berhasil dibuka!","success")}else alert("\u274c Email atau password salah!"),f("")}catch(e){console.error("Unlock error:",e),alert("\u274c Terjadi kesalahan saat membuka aplikasi. Pastikan Firebase Authentication sudah diaktifkan.")}finally{p(!1)}}else alert("\u274c Email dan password harus diisi!")},wn=async()=>{if(V&&q){if("josepratama157@gmail.com"!==V)return alert("\u274c Email ini tidak memiliki akses admin!"),void H("");G(!0);try{(await If.loginAdmin(V,q)).success?(z(!0),B(!1),H(""),K(""),ht("\ud83d\udd10 Login Admin berhasil!","success"),a("admin")):(alert("\u274c Email atau password salah!"),K(""))}catch(e){console.error("Login error:",e),alert("\u274c Terjadi kesalahan saat login. Pastikan Firebase Authentication sudah diaktifkan.")}finally{G(!1)}}else alert("\u274c Email dan password harus diisi!")},kn=(e,t)=>{var n;const r=null===(n=Ee[e])||void 0===n?void 0:n[t],a={hadir:0,libur:0,lembur:0,izin:0,telat:0,sakit:0,alpha:0,totalLateHours:0};return r?(Object.values(r).forEach(e=>{e.status&&"belum"!==e.status&&(a[e.status]=(a[e.status]||0)+1,"telat"===e.status&&e.lateHours&&(a.totalLateHours+=e.lateHours),"lembur"===e.status&&e.lateHours&&(a.totalLateHours+=e.lateHours))}),a):a},Sn=(e,t,n)=>{const r=new Date(n),a=r.getMonth(),s=r.getDate();_e(r=>{var i,o;const l=null===(i=r[e])||void 0===i||null===(o=i[a])||void 0===o?void 0:o[s];return l?c(c({},r),{},{[e]:c(c({},r[e]),{},{[a]:c(c({},r[e][a]),{},{[s]:c(c({},l),{},{activities:[...l.activities||[],{type:t,timestamp:n}]})})})}):r})},Tn=async()=>{if(!je.trim()&&!De)return;const e={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:je,image:De,completed:!1,createdAt:(new Date).toLocaleString("id-ID"),readBy:[]};Ce(t=>[e,...t]);try{await _f.addAttentionTransaction(e),console.log("\u2705 Attention added via transaction")}catch(t){console.error("\u274c Error adding attention:",t),ht("\u26a0\ufe0f Gagal menyimpan perhatian!","error")}Ae(""),Pe(null)},Nn=async e=>{Ce(t=>t.filter(t=>t.id!==e));try{await _f.deleteAttentionTransaction(e),console.log("\u2705 Attention deleted via transaction")}catch(t){console.error("\u274c Error deleting attention:",t)}},En=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>Pe(e.result),e.readAsDataURL(t)}},_n=(0,r.useMemo)(()=>{const e=Ie.filter(e=>!e.completed);return 0!==e.length||Fe?Fe||0!==e.length?(0,Wf.jsxs)("div",{className:"".concat(we.card," rounded-2xl shadow-md border-2 p-6 mb-8"),children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Wf.jsx)("div",{className:"bg-gradient-to-r from-blue-700 to-blue-500 p-2.5 rounded-xl",children:(0,Wf.jsx)(g,{className:"text-white",size:20})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h2",{className:"text-xl font-semibold ".concat(we.text),children:"Team Attention"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext," mt-0.5"),children:"Informasi penting untuk team"})]})]}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Wf.jsxs)("span",{className:"bg-blue-600 text-white px-2.5 py-1 rounded-lg text-xs font-semibold",children:[e.length," Active"]}),0===e.length&&(0,Wf.jsx)("button",{onClick:()=>ze(!1),className:"text-slate-400 hover:text-blue-300 p-1.5 hover:bg-white/5 rounded-lg transition-colors",children:(0,Wf.jsx)(v,{size:16})})]})]}),(0,Wf.jsxs)("div",{className:"mb-5 p-4 bg-blue-950/20 rounded-xl border-2 border-blue-500/15",children:[(0,Wf.jsx)("textarea",{placeholder:"Tulis informasi penting...",value:je,onChange:e=>Ae(e.target.value),className:"w-full px-3 py-2.5 rounded-lg border ".concat(we.input," resize-none focus:outline-none text-sm"),rows:"2"}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,Wf.jsxs)("label",{className:"flex items-center gap-2 px-3 py-2 ".concat(we.badge," border border-white/10 rounded-lg cursor-pointer hover:bg-white/5 transition-colors text-sm"),children:[(0,Wf.jsx)(y,{size:16,className:"text-blue-200"}),(0,Wf.jsx)("span",{className:"text-blue-200",children:"Gambar"}),(0,Wf.jsx)("input",{type:"file",accept:"image/*",onChange:En,className:"hidden"})]}),De&&(0,Wf.jsxs)("div",{className:"relative",children:[(0,Wf.jsx)("img",{src:De,alt:"Preview",className:"h-10 w-10 object-cover rounded-lg border border-white/10"}),(0,Wf.jsx)("button",{onClick:()=>Pe(null),className:"absolute -top-1.5 -right-1.5 bg-blue-600 text-white rounded-full p-0.5 hover:bg-blue-500",children:(0,Wf.jsx)(v,{size:10})})]}),(0,Wf.jsxs)("button",{onClick:Tn,className:"ml-auto flex items-center gap-1.5 bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-blue-500 transition-all shadow-sm text-sm font-medium hover:scale-[1.01] active:scale-[0.99]",children:[(0,Wf.jsx)(b,{size:16}),"Tambah"]})]})]}),e.length>0&&(0,Wf.jsx)("div",{className:"space-y-2.5",children:e.map(e=>{const t=e.readBy||[],n=mt.length,r=t.length;return(0,Wf.jsx)("div",{className:"".concat(we.badge," border border-white/10 rounded-xl p-3.5 hover:shadow-sm transition-shadow"),children:(0,Wf.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Wf.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Wf.jsx)("p",{className:"text-sm font-medium mb-1.5 break-words ".concat(we.text),children:e.text}),e.image&&(0,Wf.jsx)("img",{src:e.image,alt:"Attention",className:"max-w-sm rounded-lg border border-white/10 mb-2"}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(we.subtext," mb-3"),children:["\ud83d\udcdd ",e.createdAt]}),(0,Wf.jsxs)("div",{className:"space-y-1.5",children:[(0,Wf.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Wf.jsx)("p",{className:"text-xs font-semibold ".concat(we.text),children:"Konfirmasi Baca:"}),(0,Wf.jsxs)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(r===n?"bg-blue-700/55 text-white border border-blue-300/30":"bg-blue-950/25 text-blue-200 border border-blue-500/15"),children:[r,"/",n," sudah baca"]})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-3 gap-2",children:mt.map(n=>{const r=t.includes(n.name);return(0,Wf.jsxs)("button",{onClick:()=>(async(e,t)=>{const n=Ie.find(t=>t.id===e);if(!n)return;const r=n.readBy||[],a=r.includes(t)?r.filter(e=>e!==t):[...r,t],s=mt.map(e=>e.name).every(e=>a.includes(e));Ce(t=>t.map(t=>t.id===e?c(c({},t),{},{readBy:a,completed:s}):t));try{await _f.updateAttentionTransaction(e,{readBy:a,completed:s}),console.log("\u2705 Attention read status updated via transaction")}catch(i){console.error("\u274c Error updating attention read status:",i)}})(e.id,n.name),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all ".concat(r?"bg-blue-600 text-white shadow-sm":"".concat(we.badge," border border-white/10 ").concat(we.text," hover:bg-white/5")),children:[r?(0,Wf.jsx)(x,{size:14,className:"flex-shrink-0"}):(0,Wf.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-2 border-blue-300/60 flex-shrink-0"}),(0,Wf.jsx)("span",{className:"truncate",children:n.name})]},n.id)})})]})]}),(0,Wf.jsx)("button",{onClick:()=>Nn(e.id),className:"text-slate-400 hover:text-blue-300 p-1 hover:bg-white/5 rounded-lg transition-colors flex-shrink-0",children:(0,Wf.jsx)(w,{size:14})})]})},e.id)})}),Ie.filter(e=>e.completed).length>0&&(0,Wf.jsxs)("div",{className:"mt-6",children:[(0,Wf.jsxs)("h3",{className:"text-sm font-semibold ".concat(we.text," mb-3 flex items-center gap-2"),children:[(0,Wf.jsx)(x,{size:16,className:"text-blue-300"}),"Riwayat Selesai (",Ie.filter(e=>e.completed).length,")"]}),(0,Wf.jsx)("div",{className:"space-y-2",children:Ie.filter(e=>e.completed).map(e=>(0,Wf.jsx)("div",{className:"".concat(we.card," border-2 border-blue-500/15 rounded-xl p-3 opacity-75"),children:(0,Wf.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Wf.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Wf.jsx)(x,{size:14,className:"text-blue-300 flex-shrink-0"}),(0,Wf.jsx)("p",{className:"text-sm font-medium ".concat(we.text," break-words"),children:e.text})]}),e.image&&(0,Wf.jsx)("img",{src:e.image,alt:"Attention",className:"max-w-xs rounded-lg border border-white/10 mb-2 mt-2"}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(we.subtext),children:["\ud83d\udcdd ",e.createdAt," \u2022 \u2705 Selesai dibaca semua"]})]}),(0,Wf.jsx)("button",{onClick:()=>Nn(e.id),className:"text-slate-400 hover:text-blue-300 p-1 hover:bg-white/5 rounded-lg transition-colors flex-shrink-0",children:(0,Wf.jsx)(w,{size:14})})]})},e.id))})]})]}):(0,Wf.jsx)("div",{className:"mb-8",children:(0,Wf.jsxs)("button",{onClick:()=>ze(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-700 to-blue-500 text-white px-5 py-2.5 rounded-xl hover:from-blue-600 hover:to-blue-500 transition-all shadow-md text-sm font-medium hover:scale-[1.01] active:scale-[0.99]",children:[(0,Wf.jsx)(g,{size:16}),"Tambah Team Attention"]})}):null},[Ie,Fe,je,De,we,mt]);return M?(0,Wf.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-6",children:(0,Wf.jsxs)("div",{className:"text-center",children:[(0,Wf.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white mx-auto mb-4"}),(0,Wf.jsx)("p",{className:"text-white text-lg",children:"Loading..."})]})}):o?(0,Wf.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-6",children:(0,Wf.jsx)("div",{className:"max-w-md w-full",children:(0,Wf.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border-2 border-white/20 p-8",children:[(0,Wf.jsx)("div",{className:"flex justify-center mb-6",children:(0,Wf.jsx)("div",{className:"bg-gradient-to-r from-blue-700 to-blue-500 p-6 rounded-full shadow-lg",children:(0,Wf.jsx)(k,{className:"text-white",size:48})})}),(0,Wf.jsxs)("div",{className:"text-center mb-8",children:[(0,Wf.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"\ud83d\udd12 Aplikasi Terkunci"}),(0,Wf.jsx)("p",{className:"text-slate-300 text-sm",children:"Masukkan email dan password untuk mengakses aplikasi"})]}),(0,Wf.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Email:"}),(0,Wf.jsx)("input",{type:"email",value:u,onChange:e=>d(e.target.value),placeholder:"user@example.com",className:"w-full px-4 py-3 rounded-lg bg-white/10 border-2 border-white/20 text-white placeholder-slate-400 focus:border-blue-400 focus:outline-none text-sm",autoFocus:!0})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Password:"}),(0,Wf.jsx)("input",{type:"password",value:h,onChange:e=>f(e.target.value),placeholder:"Masukkan password",className:"w-full px-4 py-3 rounded-lg bg-white/10 border-2 border-white/20 text-white placeholder-slate-400 focus:border-blue-400 focus:outline-none text-sm",onKeyPress:e=>{"Enter"===e.key&&xn()}})]})]}),(0,Wf.jsx)("button",{onClick:xn,disabled:m,className:"w-full px-6 py-3 rounded-lg bg-gradient-to-r from-blue-700 to-blue-500 text-white font-medium hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg ".concat(m?"opacity-50 cursor-not-allowed":""),children:m?"\u23f3 Membuka...":"\ud83d\udd13 Buka Aplikasi"}),(0,Wf.jsx)("div",{className:"mt-6 text-center",children:(0,Wf.jsx)("p",{className:"text-xs text-slate-400",children:"\ud83d\udd10 Aplikasi ini dilindungi untuk mencegah akses tidak sah"})})]})})}):(0,Wf.jsxs)("div",{className:"min-h-screen bg-gradient-to-br ".concat(we.bg," p-4 sm:p-6"),children:[(0,Wf.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Wf.jsx)("nav",{className:"".concat(we.nav," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-2 mb-6 sm:mb-8"),children:(0,Wf.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,Wf.jsx)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1 md:pb-0 px-1",children:[{page:"dashboard",icon:S,label:"Dashboard"},{page:"orderan",icon:T,label:"Orderan"},{page:"leaderboard",icon:N,label:"Leaderboard"},{page:"statistics",icon:E,label:"Statistik"},{page:"shift",icon:_,label:"Jadwal Shift"},{page:"mbak",icon:I,label:"Mbak"},...F?[{page:"admin",icon:C,label:"Admin Panel"}]:[]].map(e=>{let{page:t,icon:r,label:s}=e;return(0,Wf.jsxs)("button",{onClick:()=>a(t),className:"flex items-center gap-2 px-4 md:px-5 py-2 md:py-2.5 font-bold transition-all text-xs md:text-sm border-2 whitespace-nowrap ".concat(n===t?we.navActive:we.navInactive),children:[(0,Wf.jsx)(r,{size:14,className:"md:w-4 md:h-4"}),s]},t)})}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between md:justify-end gap-3 px-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 font-bold border-2 ".concat(we.borderColor," bg-black text-white ").concat(we.shadow," text-xs"),children:[(0,Wf.jsx)("div",{className:"w-2 h-2 rounded-full bg-white ".concat(kt?"animate-pulse":"")}),(0,Wf.jsx)("span",{children:"LIVE"}),Tt&&(0,Wf.jsx)("span",{className:"text-[10px] opacity-75",children:Tt.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),!F&&(0,Wf.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-3 py-2 font-bold border-2 ".concat(we.borderColor," bg-black text-white hover:bg-slate-900 transition-all ").concat(we.shadow," text-xs"),title:"Admin Login",children:[(0,Wf.jsx)(k,{size:14}),"Admin"]}),(0,Wf.jsx)("div",{className:"flex items-center gap-1 p-1 border-2 border-black ".concat(we.badge),children:Object.keys(Mf).filter(e=>{var t;return!(null!==(t=Mf[e])&&void 0!==t&&t.hidden)}).map(e=>{const t=fm[Mf[e].icon];return(0,Wf.jsx)("button",{onClick:()=>i(e),className:"w-9 h-9 flex items-center justify-center font-bold border-2 transition-all ".concat(s===e?Mf[e].navActive:"".concat(we.badge," ").concat(we.navInactive)," hover:scale-[1.02] active:scale-[0.98] ").concat(s===e?"border-black":"border-transparent"),title:Mf[e].name,"aria-label":"Theme: ".concat(Mf[e].name),children:t&&(0,Wf.jsx)(t,{size:16})},e)})})]})]})}),nt.length>0&&(0,Wf.jsx)("div",{className:"fixed top-6 right-6 z-50 space-y-2 max-w-md",children:nt.map(e=>(0,Wf.jsx)("div",{className:"".concat(we.card," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-4 animate-slide-in-right ").concat("urgent"===e.type?"border-fuchsia-600":"border-fuchsia-400"),children:(0,Wf.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Wf.jsx)("div",{className:"p-2 border-2 ".concat(we.borderColor," bg-fuchsia-100"),children:(0,Wf.jsx)(g,{size:16,className:"text-fuchsia-700"})}),(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("p",{className:"text-sm font-medium ".concat(we.text),children:e.message}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext," mt-1"),children:e.timestamp})]}),(0,Wf.jsx)("button",{onClick:()=>rt(t=>t.filter(t=>t.id!==e.id)),className:"text-slate-400 hover:text-slate-200",children:(0,Wf.jsx)(v,{size:16})})]})},e.id))}),"dashboard"===n&&(0,Wf.jsx)(em,{employees:mt,currentTheme:we,AttentionSection:_n,selectedEmployee:Rt,setSelectedEmployee:Ot,newTask:yt,setNewTask:bt,showCompletedTasks:Me,isProcessing:ne,statusConfig:vn,priorityColors:{urgent:{bg:"bg-blue-950/25",border:"border-blue-500/25",text:"text-blue-200",badge:"bg-blue-600"},high:{bg:"bg-blue-950/20",border:"border-blue-500/20",text:"text-blue-200",badge:"bg-blue-600"},normal:{bg:"bg-slate-900/50",border:"border-white/10",text:"text-slate-200",badge:"bg-blue-600"},low:{bg:"bg-slate-900/40",border:"border-white/10",text:"text-slate-300",badge:"bg-slate-500"}},detectShift:ft,updateLateHours:(e,t)=>{pt(n=>{const r=n.find(t=>t.id===e);if(!r)return n;const a=new Date;return _e(e=>c(c({},e),{},{[r.name]:c(c({},e[r.name]),{},{[a.getMonth()]:c(c({},e[r.name][a.getMonth()]),{},{[a.getDate()]:c(c({},e[r.name][a.getMonth()][a.getDate()]),{},{lateHours:t})})})})),n.map(n=>n.id===e?c(c({},n),{},{lateHours:t}):n)})},startBreak:async e=>{if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const t=mt.find(t=>t.id===e);if(null!==t&&void 0!==t&&t.hasBreakToday)ht("\u26a0\ufe0f ".concat(t.name," sudah istirahat hari ini (maksimal 1x per shift)"),"warning");else{ke("Mulai Istirahat",null===t||void 0===t?void 0:t.name),re(!0),ae.current=!0;try{const n=new Date,r="".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0")),a=mt.map(t=>t.id===e?c(c({},t),{},{breakTime:r,breakDuration:1}):t);pt(a),dn(e,"break","Istirahat 1 jam"),ht("\u2615 ".concat(null===t||void 0===t?void 0:t.name," mulai istirahat (").concat(r,") - Harus kembali dalam 1 jam"),"warning"),Te("Mulai Istirahat");const s=a.find(t=>t.id===e);s&&await fn(s),Ne("Mulai Istirahat"),Se("Mulai Istirahat",null===t||void 0===t?void 0:t.name)}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}}},endBreak:async e=>{var t;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const n=(null===(t=mt.find(t=>t.id===e))||void 0===t?void 0:t.name)||"Unknown";ke("Selesai Istirahat",n),re(!0),ae.current=!0;try{const t=new Date,r="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0")),a=mt.map(n=>{if(n.id===e&&n.breakTime){const[e,a]=n.breakTime.split(":").map(Number),s=new Date;s.setHours(e,a,0);const i=Math.floor((t-s)/1e3/60),o=i>60,l={startTime:n.breakTime,endTime:r,duration:i,isLate:o,lateDuration:o?Math.ceil((i-60)/60):0,date:t.toISOString(),dateDisplay:t.toLocaleString("id-ID"),shift:n.shift};if(o){const e=Math.ceil((i-60)/60);return ht("\u26a0\ufe0f ".concat(n.name," telat kembali dari istirahat ").concat(e," jam"),"warning"),c(c({},n),{},{breakTime:null,hasBreakToday:!0,shiftEndAdjustment:n.shiftEndAdjustment+1,status:"telat",lateHours:n.lateHours+e,breakHistory:[...n.breakHistory,l]})}return ht("\u2705 ".concat(n.name," kembali dari istirahat (").concat(r,")"),"success"),c(c({},n),{},{breakTime:null,hasBreakToday:!0,shiftEndAdjustment:n.shiftEndAdjustment+1,breakHistory:[...n.breakHistory,l]})}return n});pt(a);const s=a.find(t=>t.id===e);s&&Sn(s.name,"break",t.toISOString()),hn(e),Te("Selesai Istirahat");const i=a.find(t=>t.id===e);i&&await fn(i),Ne("Selesai Istirahat"),Se("Selesai Istirahat",n)}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}},startIzin:e=>{ot(e)},endIzin:async e=>{var t;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const n=(null===(t=mt.find(t=>t.id===e))||void 0===t?void 0:t.name)||"Unknown";ke("Selesai Izin",n),re(!0),ae.current=!0;const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0")),s=mt.map(t=>{if(t.id===e&&t.izinTime){const[e,n]=t.izinTime.split(":").map(Number),s=new Date;s.setHours(e,n,0);const i=Math.floor((r-s)/1e3/60),o={startTime:t.izinTime,endTime:a,duration:i,reason:t.izinReason,date:r.toISOString(),dateDisplay:r.toLocaleString("id-ID"),shift:t.shift};return c(c({},t),{},{izinTime:null,izinReason:null,izinHistory:[...t.izinHistory,o]})}return t}),i=s.find(t=>t.id===e);pt(s),i&&Sn(i.name,"izin",r.toISOString()),hn(e),ht("\u2705 ".concat(null===i||void 0===i?void 0:i.name," selesai izin (").concat(a,")"),"success"),Te("Selesai Izin");const o=s.find(t=>t.id===e);o&&await fn(o),Ne("Selesai Izin"),Se("Selesai Izin",n),re(!1),ae.current=!1},endShift:async e=>{var t;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const n=(null===(t=mt.find(t=>t.id===e))||void 0===t?void 0:t.name)||"Unknown";ke("Selesai Shift",n),re(!0),ae.current=!0;const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0")),s=r.getDate(),i=r.getMonth(),o=mt.find(t=>t.id===e);console.log("\ud83d\udd0d Employee found: ".concat(null===o||void 0===o?void 0:o.name,", checkedIn: ").concat(null===o||void 0===o?void 0:o.checkedIn));const l=mt.map(t=>{if(t.id===e&&t.checkedIn){const e=(t.workTasks||[]).map(e=>c(c({},e),{},{taskType:"work",endShiftTime:a,shiftDate:r.toDateString(),completedAtDisplay:e.completedAtDisplay||e.completedAt||a})),n=[...t.completedTasksHistory||[],...e.filter(e=>!(t.completedTasksHistory||[]).some(t=>t.id===e.id&&t.shiftDate===e.shiftDate))],s=(t.shifts||[]).map((e,n)=>n===t.shifts.length-1?c(c({},e),{},{endTime:a}):e);console.log("\ud83d\udcca ".concat(t.name," end shift: ").concat(e.length," tasks archived (shiftDate: ").concat(r.toDateString(),")"));const i=c(c({},t),{},{checkedIn:!1,shiftEndTime:a,shift:null,breakTime:null,hasBreakToday:!1,shifts:s,workTasks:[],completedTasksHistory:n});return console.log("\u2705 ".concat(t.name," updated: checkedIn=").concat(i.checkedIn,", tasks cleared, history=").concat(i.completedTasksHistory.length)),i}return t});_e(e=>{var t,n,r;return c(c({},e),{},{[null===o||void 0===o?void 0:o.name]:c(c({},e[null===o||void 0===o?void 0:o.name]),{},{[i]:c(c({},null===(t=e[null===o||void 0===o?void 0:o.name])||void 0===t?void 0:t[i]),{},{[s]:c(c({},null===(n=e[null===o||void 0===o?void 0:o.name])||void 0===n||null===(r=n[i])||void 0===r?void 0:r[s]),{},{endShift:a})})})})}),pt(l),ht("\ud83c\udfc1 ".concat(null===o||void 0===o?void 0:o.name," selesai shift (").concat(a,")"),"success"),Te("Selesai Shift");try{const t=l.find(t=>t.id===e);t&&await fn(t),console.log("\u2705 Single save to Firebase completed")}catch(f){console.error("\u274c Error saving to Firebase:",f)}Ne("Selesai Shift");try{var u,d;const t=await _f.getEmployees(),n=null===t||void 0===t||null===(u=t.data)||void 0===u?void 0:u.find(t=>t.id===e);var h;if(console.log("\ud83d\udd0d VERIFICATION: Firebase has ".concat((null===n||void 0===n?void 0:n.name)||"UNKNOWN"," (id=").concat(e,") checkedIn=").concat(null===n||void 0===n?void 0:n.checkedIn,", history=").concat(null===n||void 0===n||null===(d=n.completedTasksHistory)||void 0===d?void 0:d.length)),!1===(null===n||void 0===n?void 0:n.checkedIn))console.log("\u2705 VERIFIED: Firebase correctly saved ".concat(n.name," checkedIn=false"));else console.error("\u274c VERIFICATION FAILED: Firebase has ".concat((null===n||void 0===n?void 0:n.name)||"UNKNOWN"," checkedIn=").concat(null===n||void 0===n?void 0:n.checkedIn," (expected: false)")),console.log("\ud83d\udd0d All employees in Firebase:",null===t||void 0===t||null===(h=t.data)||void 0===h?void 0:h.map(e=>"".concat(e.name,": checkedIn=").concat(e.checkedIn)))}catch(f){console.error("\u274c Verification error:",f)}Se("Selesai Shift",null===o||void 0===o?void 0:o.name),re(!1),ae.current=!1},pauseAllTasks:e=>{Bt(e)},resumeAllTasks:async e=>{var t;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const n=mt.find(t=>t.id===e),r=(null===n||void 0===n?void 0:n.name)||"Unknown",a=(null===n||void 0===n||null===(t=n.workTasks)||void 0===t?void 0:t.filter(e=>e.paused&&!e.completed))||[];if(0===a.length)return void alert("Tidak ada task yang di-pause untuk di-resume.");ke("Resume Semua Task","".concat(r," (").concat(a.length," tasks)")),re(!0),ae.current=!0,hn(e);const s=new Date,i="".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0"),":").concat(s.getSeconds().toString().padStart(2,"0")),o=mt.map(t=>t.id===e?c(c({},t),{},{workTasks:t.workTasks.map(e=>{if(e.paused&&!e.completed){const t=e.pauseHistory||[],n=t.map((e,n)=>n!==t.length-1||e.endTime?e:c(c({},e),{},{endTime:i}));return c(c({},e),{},{paused:!1,pauseStartTime:null,pauseHistory:n})}return e})}):t);pt(o),ht("\u25b6\ufe0f ".concat(r," melanjutkan ").concat(a.length," task"),"info"),Te("Resume Semua Task");const l=o.find(t=>t.id===e);l&&await fn(l),Ne("Resume Semua Task"),Se("Resume Semua Task","".concat(r," (").concat(a.length," tasks)")),setTimeout(()=>{re(!1),ae.current=!1},500)},handleDragStart:(e,t,n,r)=>{wt({empId:t,type:n,taskId:r}),e.dataTransfer.effectAllowed="move"},handleDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},handleDrop:(e,t,n,r)=>{if(e.preventDefault(),!xt)return;const{empId:a,type:s,taskId:i}=xt;a===t&&s===n&&i!==r&&(pt(e=>e.map(e=>{if(e.id===a){const t="cleaning"===s?"cleaningTasks":"workTasks",n=[...e[t]],a=n.findIndex(e=>e.id===i),o=n.findIndex(e=>e.id===r);if(-1!==a&&-1!==o){const[e]=n.splice(a,1);n.splice(o,0,e)}return c(c({},e),{},{[t]:n})}return e})),ht("\ud83d\udccb Task berhasil dipindahkan","info")),wt(null)},calculateElapsedTime:e=>{if(!e)return null;try{const[t,n,r=0]=e.split(":").map(Number),a=new Date,s=new Date;s.setHours(t,n,r,0);let i=Math.floor((a-s)/1e3);i<0&&(i+=86400);const o=Math.floor(i/3600),l=Math.floor(i%3600/60),c=i%60;return"".concat(o.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0"),":").concat(c.toString().padStart(2,"0"))}catch(t){return"00:00:00"}},deleteTask:async(e,t,n)=>{ae.current=!0;try{const r=mt.map(r=>r.id===e?c(c({},r),{},{["cleaning"===t?"cleaningTasks":"workTasks"]:r["cleaning"===t?"cleaningTasks":"workTasks"].filter(e=>e.id!==n)}):r);pt(r);const a=r.find(t=>t.id===e);a&&await fn(a)}finally{setTimeout(()=>{ae.current=!1},500)}},updateProgress:async(e,t,n,r)=>{ae.current=!0;try{const a=mt.map(a=>{if(a.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},a),{},{[e]:a[e].map(e=>e.id===n?c(c({},e),{},{progress:parseInt(r)||0}):e)})}return a});pt(a);const s=a.find(t=>t.id===e);s&&await fn(s)}finally{setTimeout(()=>{ae.current=!1},500)}},updatePriority:async(e,t,n,r)=>{ae.current=!0;try{const a=mt.map(a=>{if(a.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},a),{},{[e]:a[e].map(e=>e.id===n?c(c({},e),{},{priority:r}):e)})}return a});pt(a);const s=a.find(t=>t.id===e);s&&await fn(s)}finally{setTimeout(()=>{ae.current=!1},500)}},startTask:async(e,t,n)=>{var r,a,s,i;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const o=(null===(r=mt.find(t=>t.id===e))||void 0===r?void 0:r.name)||"Unknown",l=(null===(a=mt.find(t=>t.id===e))||void 0===a||null===(s=a["cleaning"===t?"cleaningTasks":"workTasks"])||void 0===s||null===(i=s.find(e=>e.id===n))||void 0===i?void 0:i.task)||"Task";ke("Mulai Pekerjaan","".concat(o," - ").concat(l)),re(!0),ae.current=!0;try{var u;const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")),s=mt.map(r=>{if(r.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},r),{},{[e]:r[e].map(e=>e.id===n?c(c({},e),{},{startTime:a,endTime:null,duration:null,paused:!1,pauseHistory:[]}):e)})}return r}),i=null===(u=s.find(t=>t.id===e))||void 0===u?void 0:u.name;pt(s),ht("\u25b6\ufe0f ".concat(i," mulai task"),"info"),Te("Mulai Pekerjaan");const o=s.find(t=>t.id===e);o&&await fn(o),Ne("Mulai Pekerjaan"),Se("Mulai Pekerjaan","".concat(i," - ").concat(l))}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}},pauseTask:(e,t,n)=>{Lt({empId:e,type:t,taskId:n})},resumeTask:async(e,t,n)=>{var r,a,s,i;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const o=(null===(r=mt.find(t=>t.id===e))||void 0===r?void 0:r.name)||"Unknown",l=(null===(a=mt.find(t=>t.id===e))||void 0===a||null===(s=a["cleaning"===t?"cleaningTasks":"workTasks"])||void 0===s||null===(i=s.find(e=>e.id===n))||void 0===i?void 0:i.task)||"Task";ke("Lanjutkan Pekerjaan","".concat(o," - ").concat(l)),re(!0),ae.current=!0;try{var u;hn(e);const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")),s=mt.map(r=>{if(r.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},r),{},{[e]:r[e].map(e=>{if(e.id===n){const t=e.pauseHistory||[],n=t.map((e,n)=>n===t.length-1?c(c({},e),{},{endTime:a}):e);return c(c({},e),{},{paused:!1,pauseStartTime:null,pauseHistory:n})}return e})})}return r}),i=null===(u=s.find(t=>t.id===e))||void 0===u?void 0:u.name;pt(s),ht("\u25b6\ufe0f ".concat(i," melanjutkan task"),"info"),Te("Lanjutkan Pekerjaan");const o=s.find(t=>t.id===e);o&&await fn(o),Ne("Lanjutkan Pekerjaan"),Se("Lanjutkan Pekerjaan","".concat(i," - ").concat(l))}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}},taskBreak:(e,t,n)=>{tn({empId:e,type:t,taskId:n});const r=mt.find(t=>t.id===e),a=null===r||void 0===r?void 0:r["cleaning"===t?"cleaningTasks":"workTasks"].find(e=>e.id===n);rn((null===a||void 0===a?void 0:a.progress)||0)},resumeFromTaskBreak:async(e,t,n)=>{if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");console.log("\u25b6\ufe0f RESUME FROM TASK BREAK: empId=".concat(e,", type=").concat(t,", taskId=").concat(n)),re(!0),ae.current=!0;const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")),s=mt.map(r=>{if(r.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},r),{},{[e]:r[e].map(e=>{if(e.id===n&&e.onTaskBreak){const t=[...e.pauseHistory||[]];if(t.length>0){const e=t[t.length-1];e.endTime||(e.endTime=a)}return c(c({},e),{},{onTaskBreak:!1,isPaused:!1,taskBreakStartTime:null,taskBreakStartDate:null,pauseHistory:t})}return e})})}return r}),i=s.find(t=>t.id===e);pt(s),ht("\u25b6\ufe0f ".concat(null===i||void 0===i?void 0:i.name," melanjutkan task"),"info"),Te("Lanjutkan Task");const o=s.find(t=>t.id===e);o&&await fn(o),Ne("Lanjutkan Task"),console.log("\u2705 Resume from task break completed"),re(!1),ae.current=!1},endTask:async(e,t,n)=>{if(ne)console.log("\u23f8\ufe0f Action in progress, ignoring double-click");else{console.log("\ud83c\udfaf END TASK called: empId=".concat(e,", type=").concat(t,", taskId=").concat(n)),re(!0),ae.current=!0;try{const r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0"));let s=!1;const i=mt.map(i=>{if(i.id===e){const o="cleaning"===t?"cleaningTasks":"workTasks",l=i[o].find(e=>e.id===n&&e.startTime);if(l){s=!0;const[u,d,h=0]=l.startTime.split(":").map(Number),[f,m,p=0]=a.split(":").map(Number);let g=3600*f+60*m+p-(3600*u+60*d+h);g<0&&(g+=86400);const v=Math.floor(g/3600),y=Math.floor(g%3600/60),b=v>0?"".concat(v,"j ").concat(y,"m"):"".concat(y,"m"),x=c(c({},l),{},{endTime:a,duration:b,completed:!0,progress:100,completedAt:r.toISOString(),completedAtDisplay:r.toLocaleString("id-ID"),taskType:t});return yn(e,t),ht("\u2705 ".concat(i.name," menyelesaikan task: ").concat(l.task," (").concat(b,")"),"success"),c(c({},i),{},{completedTasksHistory:[...i.completedTasksHistory,x],[o]:i[o].filter(e=>e.id!==n)})}}return i});if(!s)return void console.error("\u274c Task NOT found! empId=".concat(e,", type=").concat(t,", taskId=").concat(n));pt(i),Te("Selesai Task");const o=i.find(t=>t.id===e);o&&await fn(o),Ne("Selesai Task")}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}}},addTask:async(e,t)=>{const n=yt["".concat(e,"-").concat(t)];if(null!==n&&void 0!==n&&n.trim()){ae.current=!0;try{const r=mt.map(r=>{if(r.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},r),{},{[e]:[...r[e],{id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),task:n,completed:!1,priority:"normal",progress:0,startTime:null,endTime:null,duration:null,createdAt:(new Date).toLocaleString("id-ID"),completedAt:null}]})}return r});pt(r),bt(n=>c(c({},n),{},{["".concat(e,"-").concat(t)]:""}));const a=r.find(t=>t.id===e);a&&await fn(a)}finally{setTimeout(()=>{ae.current=!1},500)}}}}),"orderan"===n&&gt&&(0,Wf.jsx)(Gf,{currentTheme:we,ordersHook:gt,showAddForm:Je,setShowAddForm:Xe,expandedOrder:$e,setExpandedOrder:Ze,newNote:et,setNewNote:tt}),"leaderboard"===n&&(0,Wf.jsx)(Yf,{employees:mt,currentTheme:we,leaderboardPeriod:Et,setLeaderboardPeriod:_t,leaderboardTaskType:It,setLeaderboardTaskType:Ct,expandedLeaderboard:jt,setExpandedLeaderboard:At}),"mbak"===n&&(0,Wf.jsx)(dm,{currentTheme:we,tasks:be,addTask:async e=>{if(null!==e&&void 0!==e&&e.trim()){re(!0),ae.current=!0;try{const t={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),task:e,completed:!1,createdAt:(new Date).toLocaleString("id-ID")},n=[...be,t];xe(n),await _f.addMbakTaskTransaction(t),ht("\u2705 Task Mbak berhasil ditambahkan!","success")}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}}},deleteTask:async e=>{re(!0),ae.current=!0;try{const t=be.filter(t=>t.id!==e);xe(t),await _f.deleteMbakTaskTransaction(e),ht("\ud83d\uddd1\ufe0f Task Mbak berhasil dihapus!","warning")}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}},toggleTask:async e=>{const t=be.find(t=>t.id===e);if(t){re(!0),ae.current=!0;try{const n=!t.completed,r=be.map(t=>t.id===e?c(c({},t),{},{completed:n,completedAt:n?(new Date).toLocaleString("id-ID"):null}):t);xe(r),await _f.updateMbakTaskTransaction(e,{completed:n,completedAt:n?(new Date).toLocaleString("id-ID"):null})}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}}}}),"statistics"===n&&(0,Wf.jsx)(rm,{employees:mt,attentions:Ie,currentTheme:we,selectedDate:$t,setSelectedDate:Zt,statisticsTab:Dt,setStatisticsTab:Pt,currentMonth:pe,setCurrentMonth:ge,currentYear:ve,yearlyAttendance:Ee,statusConfig:vn,monthNames:jf,calculateMonthlyStats:kn}),"shift"===n&&(0,Wf.jsx)(sm,{employees:mt,currentTheme:we,shiftScheduleYear:qe,setShiftScheduleYear:Ke,shiftScheduleMonth:Ve,setShiftScheduleMonth:He,shiftScheduleWeek:We,setShiftScheduleWeek:Ge,shiftScheduleData:Ue,setShiftScheduleData:Be,currentWeekRef:Qe,hasLoadedInitialData:ie,yearlyAttendance:Ee,setYearlyAttendance:_e,monthNames:jf,startSaveOperation:Te,endSaveOperation:Ne}),"admin"===n&&F&&(0,Wf.jsx)(um,{currentTheme:we,handleAdminLogout:async()=>{await If.logoutAdmin(),z(!1),a("dashboard"),ht("\ud83d\udc4b Logout Admin berhasil","success")},adminTab:ee,setAdminTab:te,employees:mt,editingEmployee:Q,setEditingEmployee:Y,handleSaveEmployee:async()=>{if(Q){ae.current=!0;try{const e=mt.map(e=>e.id===Q.id?Q:e);pt(e);const t=e.find(e=>e.id===Q.id);t&&(Te("Update Employee Admin"),await fn(t),Ne("Update Employee Admin")),ht("\u2705 Data ".concat(Q.name," berhasil diupdate!"),"success"),Y(null)}finally{setTimeout(()=>{ae.current=!1},500)}}},handleEditEmployee:e=>{Y(c({},e))},handleAddEmployee:async(e,t)=>{if(e&&t)if(mt.some(e=>e.id===t))alert("\u274c ID Karyawan sudah ada!");else{ae.current=!0;try{const n={id:parseInt(t),name:e,baseSalary:0,status:"belum",lateHours:0,checkInTime:null,cleaningTasks:[],workTasks:[],shift:null,checkedIn:!1,isAdmin:!1,breakTime:null,breakDuration:0,shiftEndAdjustment:0,overtime:!1,shifts:[],breakHistory:[],hasBreakToday:!1,shiftEndTime:null,izinTime:null,izinHistory:[],completedTasksHistory:[],pauseHistory:[]},r=[...mt,n];pt(r);const a=(new Date).getFullYear();return _e(t=>{if(t[e])return t;const n={};for(let e=0;e<12;e++){n[e]={};const t=new Date(a,e+1,0).getDate();for(let r=1;r<=t;r++)n[e][r]={status:"belum",lateHours:0}}return c(c({},t),{},{[e]:n})}),Te("Tambah Karyawan"),await _f.saveEmployees(r),ce.current=!0,Ne("Tambah Karyawan"),ht("\u2705 Karyawan ".concat(e," berhasil ditambahkan!"),"success"),!0}catch(n){return console.error("Error adding employee:",n),alert("\u274c Gagal menambahkan karyawan ke Firebase"),Ne("Tambah Karyawan"),!1}finally{setTimeout(()=>{ae.current=!1},500)}}else alert("\u274c Nama dan ID harus diisi!")},handleDeleteEmployee:async e=>{const t=mt.find(t=>t.id===e);if(t&&window.confirm('\u26a0\ufe0f Apakah Anda yakin ingin menghapus karyawan "'.concat(t.name,'"? Semua data terkait (termasuk riwayat kalender) akan hilang.'))){ae.current=!0;try{Te("Hapus Karyawan");const n=mt.filter(t=>t.id!==e);return pt(n),_e(e=>{const n=c({},e);return delete n[t.name],n}),await _f.saveEmployees(n),ce.current=!0,Ne("Hapus Karyawan"),ht("\ud83d\uddd1\ufe0f Karyawan ".concat(t.name," berhasil dihapus!"),"warning"),!0}catch(n){return console.error("Error deleting employee:",n),alert("\u274c Gagal menghapus karyawan dari Firebase"),Ne("Hapus Karyawan"),!1}finally{setTimeout(()=>{ae.current=!1},500)}}},handleDeleteTask:async(e,t,n)=>{if(window.confirm("Yakin ingin menghapus task ini?")){ae.current=!0;try{const r=mt.map(r=>r.id===e?c(c({},r),{},"cleaning"===t?{cleaningTasks:r.cleaningTasks.filter(e=>e.id!==n)}:{workTasks:r.workTasks.filter(e=>e.id!==n)}):r);pt(r);const a=r.find(t=>t.id===e);a&&await fn(a),ht("\ud83d\uddd1\ufe0f Task berhasil dihapus!","warning")}finally{setTimeout(()=>{ae.current=!1},500)}}},handleResetEmployee:async e=>{if(window.confirm("Yakin ingin reset semua data karyawan ini? (tasks, check-in, shifts)")){re(!0),ae.current=!0;try{const t=mt.map(t=>t.id===e?c(c({},t),{},{checkedIn:!1,checkInTime:null,status:"belum",lateHours:0,shift:null,shifts:[],cleaningTasks:[],workTasks:[],breakHistory:[],izinHistory:[],pauseHistory:[],completedTasksHistory:[],shiftEndAdjustment:0,overtime:!1}):t);pt(t);const n=t.find(t=>t.id===e);n&&(Te("Reset Employee"),await fn(n),Ne("Reset Employee")),ht("\ud83d\udd04 Data karyawan berhasil direset!","warning")}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}}},currentMonth:pe,currentYear:ve,monthNames:jf,yearlyAttendance:Ee,statusConfig:vn,handleEditCalendar:(e,t,n,r)=>{var a,s;const i=null===(a=Ee[e])||void 0===a||null===(s=a[t])||void 0===s?void 0:s[n];Z({empName:e,month:t,day:n,year:r||ve,status:(null===i||void 0===i?void 0:i.status)||"belum",lateHours:(null===i||void 0===i?void 0:i.lateHours)||0,overtimeBaseStatus:(null===i||void 0===i?void 0:i.overtimeBaseStatus)||null})},calculateMonthlyStats:kn,exportData:()=>{try{const e={employees:mt,attentions:Ie,yearlyAttendance:Ee,productivityData:ut,mbakTasks:be,currentMonth:pe,currentYear:ve,exportedAt:(new Date).toISOString(),version:"1.0"},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="attendance-backup-".concat((new Date).toISOString().split("T")[0],".json"),a.click(),URL.revokeObjectURL(r),ht("\u2705 Data berhasil di-export","success")}catch(e){console.error("Export error:",e),ht("\u274c Gagal export data","error")}},importData:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{const t=JSON.parse(e.target.result);t.employees&&pt(t.employees),t.attentions&&Ce(t.attentions),t.yearlyAttendance&&_e(t.yearlyAttendance),t.productivityData&&dt(t.productivityData),t.mbakTasks&&xe(t.mbakTasks),void 0!==t.currentMonth&&ge(t.currentMonth),void 0!==t.currentYear&&ye(t.currentYear),ht("\u2705 Data berhasil di-import","success")}catch(t){console.error("Import error:",t),ht("\u274c Gagal import data - file tidak valid","error")}},n.readAsText(t)},setShowClearModal:sn,handleFixOvertimeData:async()=>{if(window.confirm('Aksi ini akan memindai semua data dan memperbaiki status "Lembur" yang salah (jika hanya ada 1 shift di hari tersebut). Lanjutkan?'))try{Te("Repair Overtime");const e=JSON.parse(JSON.stringify(Ee));let t=0;mt.forEach(n=>{e[n.name]&&Object.keys(e[n.name]).forEach(r=>{Object.keys(e[n.name][r]).forEach(a=>{const s=e[n.name][r][a];if("lembur"===(null===s||void 0===s?void 0:s.status)){const i=new Date(ve,parseInt(r),parseInt(a)).toDateString(),o=(n.shifts||[]).filter(e=>e.date===i).length;if(!s.startShift||o<=1){const i=s.startShift||s.overtimeCheckIn;e[n.name][r][a]=c(c({},s),{},{status:s.overtimeBaseStatus||"hadir",startShift:i,overtimeCheckIn:null,overtimeShift:null,overtimeBaseStatus:null}),t++}}})})}),t>0?(_e(e),ce.current=!0,ht("\u2705 Berhasil memperbaiki ".concat(t," data lembur!"),"success"),console.log("\ud83d\udee0\ufe0f Repair complete: ".concat(t," records fixed."))):ht("\u2139\ufe0f Tidak ada data lembur yang perlu diperbaiki.","info"),Ne("Repair Overtime")}catch(e){console.error("\u274c Error repairing overtime data:",e),alert("Gagal memperbaiki data. Cek konsol untuk detail."),Ne("Repair Overtime")}}}),(0,Wf.jsxs)("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col gap-3",children:[!1,!Fe&&0===Ie.filter(e=>!e.completed).length&&(0,Wf.jsxs)("button",{onClick:()=>ze(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-700 to-blue-500 text-white px-5 py-3 rounded-full hover:from-blue-600 hover:to-blue-500 transition-all shadow-lg hover:shadow-xl hover:scale-105 text-sm font-medium",title:"Tambah Team Attention",children:[(0,Wf.jsx)(g,{size:20}),(0,Wf.jsx)("span",{children:"Team Attention"})]})]}),Wt&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-8 max-w-2xl w-full mx-4 relative"),children:[(0,Wf.jsx)("button",{onClick:()=>Gt(!1),className:"absolute top-4 right-4 p-2 border-2 border-black bg-white hover:bg-black hover:text-white transition-all font-bold",title:"Close",children:(0,Wf.jsx)(v,{size:24,className:we.text})}),(0,Wf.jsxs)("div",{className:"text-center mb-6",children:[(0,Wf.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 ".concat(we.borderColor," ").concat(we.accent," mb-4"),children:(0,Wf.jsx)(j,{className:"text-white",size:32})}),(0,Wf.jsx)("h2",{className:"text-3xl font-bold ".concat(we.text," mb-2"),children:"START SHIFT"}),(0,Wf.jsxs)("p",{className:"text-sm ".concat(we.subtext),children:["Shift Sekarang: ",(0,Wf.jsx)("span",{className:"font-bold",children:"pagi"===ft()?"\u2600\ufe0f Pagi (09:00 - 17:00)":"\ud83c\udf19 Malam (17:00 - 01:00)"})]}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext," mt-1"),children:"Klik nama Anda untuk mulai shift dan mendapatkan task"})]}),(0,Wf.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:mt.filter(e=>{if(e.checkedIn)return!0;if(!e.isBackup)return!0;const t=(new Date).getDate(),n=Ue.find(e=>e.day===t);return!!n&&(n.pagi.includes(e.name)||n.malam.includes(e.name))}).map(e=>(0,Wf.jsx)("button",{onClick:()=>(async e=>{var t;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const n=(null===(t=mt.find(t=>t.id===e))||void 0===t?void 0:t.name)||"Unknown";ke("Check In",n),re(!0),ae.current=!0;try{const t=new Date,i=t.getHours(),o=t.getMinutes(),l="".concat(i.toString().padStart(2,"0"),":").concat(o.toString().padStart(2,"0")),u=ft(),d=Of[u],h=t.getDate(),f=t.getMonth(),m=(t.getFullYear(),mt.map((t,n)=>{if(t.id===e){t.shifts.some(e=>e.shift===u&&e.date===(new Date).toDateString());const e=t.shifts.filter(e=>e.date===(new Date).toDateString()),n=e.length>0;let r="hadir",a=0,s=d.maxCheckIn;if(t.isBackup)r="hadir",a=0;else{if(n){e[0];const n=t.breakHistory.some(e=>e.date===(new Date).toDateString());s=n?d.maxCheckIn+1:d.maxCheckIn}if("malam"===u){if(i>=0&&i<d.end){const e=60*(24-s)+60*i+o;e>1&&(r="telat",a=Math.ceil(e/60))}else if(i>s||i===s&&o>1){const e=60*(i-s)+o;e>1&&(r="telat",a=Math.ceil(e/60))}}else if(i>s||i===s&&o>1){const e=60*(i-s)+o;e>1&&(r="telat",a=Math.ceil(e/60))}}const h={shift:u,checkInTime:l,date:(new Date).toDateString(),status:n?"lembur":r,lateHours:a,isOvertime:n},f=(t.workTasks||[]).map(e=>c(c({},e),{},{startTime:null,endTime:null,completed:!1,paused:!1,pauseStartTime:null,pauseHistory:[]}));return c(c({},t),{},{checkedIn:!0,checkInTime:l,shift:u,status:n?"lembur":r,lateHours:a,overtime:n,shifts:[...t.shifts,h],workTasks:f,hasBreakToday:!1,overtime:n})}return t}));pt(m);const p=m.find(t=>t.id===e);if(p){const e=p.shifts.filter(e=>e.date===(new Date).toDateString()).length>1;if(e){var r,a,s;const e=null===(r=Ee[p.name])||void 0===r||null===(a=r[f])||void 0===a?void 0:a[h],t=(null===e||void 0===e?void 0:e.status)||"hadir",n=(null===e||void 0===e?void 0:e.lateHours)||0;let g=0,v=d.maxCheckIn;const y=null===(s=p.breakHistory)||void 0===s?void 0:s.some(e=>e.date===(new Date).toDateString());if(y&&(v=d.maxCheckIn+1),"malam"===u){if(i>=0&&i<d.end){const e=60*(24-v)+60*i+o;e>1&&(g=Math.ceil(e/60))}else if(i>v||i===v&&o>1){const e=60*(i-v)+o;e>1&&(g=Math.ceil(e/60))}}else if(i>v||i===v&&o>1){const e=60*(i-v)+o;e>1&&(g=Math.ceil(e/60))}console.log("\ud83d\udcc5 Updating calendar OVERTIME for ".concat(p.name,":"),{month:f,day:h,status:"lembur",baseStatus:t,shift:u,time:l}),_e(e=>{var r,a,s;return c(c({},e),{},{[p.name]:c(c({},e[p.name]),{},{[f]:c(c({},null===(r=e[p.name])||void 0===r?void 0:r[f]),{},{[h]:c(c({},null===(a=e[p.name])||void 0===a||null===(s=a[f])||void 0===s?void 0:s[h]),{},{status:"lembur",overtimeBaseStatus:t,lateHours:n+g,overtimeShift:u,overtimeCheckIn:l})})})})}),console.log("\u2705 Calendar updated successfully (overtime)"),ce.current=!0,setTimeout(()=>{mn(m)},50)}else{let e=p.status,t=p.lateHours,n=d.maxCheckIn;if("malam"===u){if(i>=0&&i<d.end){const r=60*(24-n)+60*i+o;r>1&&(e="telat",t=Math.ceil(r/60))}else if(i>n||i===n&&o>1){const r=60*(i-n)+o;r>1&&(e="telat",t=Math.ceil(r/60))}}else if(i>n||i===n&&o>1){const r=60*(i-n)+o;r>1&&(e="telat",t=Math.ceil(r/60))}console.log("\ud83d\udcc5 Updating calendar for ".concat(p.name,":"),{month:f,day:h,status:e,shift:u,time:l}),_e(n=>{var r;return c(c({},n),{},{[p.name]:c(c({},n[p.name]),{},{[f]:c(c({},null===(r=n[p.name])||void 0===r?void 0:r[f]),{},{[h]:{status:e,lateHours:t,startShift:l,shift:u}})})})}),console.log("\u2705 Calendar updated successfully"),ce.current=!0,setTimeout(()=>{mn(m)},50)}e?ht("\u26a1 ".concat(p.name," LEMBUR - Check-in shift ").concat(u," ke-2 (").concat(l,")"),"warning"):ht("\u2705 ".concat(p.name," check-in shift ").concat(u," (").concat(l,")"),"success")}Te("Check In");const g=m.find(t=>t.id===e);g&&await fn(g),Ne("Check In"),Se("Check In",n)}finally{re(!1),setTimeout(()=>{ae.current=!1},500)}})(e.id),disabled:e.checkedIn||ne,className:"relative p-6 border-4 transition-all font-bold ".concat(e.checkedIn||ne?"".concat(we.accentSoftBg," border-slate-500 cursor-not-allowed opacity-70"):"".concat(we.card," ").concat(we.shadow," hover:-translate-x-1 hover:-translate-y-1 cursor-pointer")," ").concat(we.borderColor),children:(0,Wf.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,Wf.jsx)("div",{className:"w-16 h-16 border-4 border-black flex items-center justify-center font-bold text-2xl ".concat((e.checkedIn,"".concat(we.accent," text-white"))),children:(0,Wf.jsx)("span",{className:"drop-shadow-lg",children:e.checkedIn?"\u2713":e.name[0]})}),(0,Wf.jsxs)("div",{className:"text-center",children:[(0,Wf.jsx)("h3",{className:"text-xl font-bold mb-2 ".concat(e.checkedIn?"text-blue-200":we.text),children:e.name}),e.checkedIn&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsx)("p",{className:"text-xs text-blue-200 font-semibold mt-1",children:"\u2713 Checked In"}),(0,Wf.jsx)("p",{className:"text-xs text-blue-200/80 font-medium",children:e.checkInTime}),(0,Wf.jsx)("span",{className:"inline-block mt-2 px-2.5 py-1 border-2 border-black text-xs font-bold ".concat("pagi"===e.shift?"bg-yellow-200 text-black":"bg-cyan-200 text-black"),children:"pagi"===e.shift?"\u2600\ufe0f Pagi":"\ud83c\udf19 Malam"})]}),!e.checkedIn&&(0,Wf.jsx)("p",{className:"text-sm ".concat(we.subtext," font-medium mt-1"),children:"Tap untuk check-in"})]})]})},e.id))}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[qt.length>0&&(0,Wf.jsxs)("button",{onClick:()=>Gt(!1),className:"flex-1 py-3 border-2 border-black ".concat(we.accent," text-white font-bold ").concat(we.accentHover," transition-all ").concat(we.shadow," hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0"),children:["Mulai Bekerja (",qt.length," orang) \u2192"]}),0===qt.length&&(0,Wf.jsx)("p",{className:"flex-1 text-center text-sm ".concat(we.subtext," py-3"),children:"Pilih nama untuk check-in terlebih dahulu"})]}),qt.length>0&&qt.length<3&&(0,Wf.jsxs)("p",{className:"text-center text-xs ".concat(we.subtext," mt-2"),children:["\ud83d\udca1 ",3-qt.length," orang lagi belum check-in (opsional)"]})]})}),Mt&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"border-2 ".concat(we.borderColor," ").concat(we.accentSoftBg," p-3"),children:(0,Wf.jsx)(A,{className:we.accentText,size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"PAUSE TASK"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Berikan alasan untuk pause"})]})]}),(0,Wf.jsx)("textarea",{value:Ft,onChange:e=>zt(e.target.value),placeholder:"Contoh: Istirahat makan siang, Meeting mendadak, dll...",className:"w-full px-4 py-3 border-2 ".concat(we.borderColor," ").concat(we.input," text-sm resize-none font-bold"),rows:4,autoFocus:!0}),(0,Wf.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Wf.jsx)("button",{onClick:()=>{Lt(null),zt("")},className:"flex-1 px-4 py-2 border-2 border-black bg-white text-black font-bold hover:bg-black hover:text-white transition-all",children:"Batal"}),(0,Wf.jsx)("button",{onClick:async()=>{var e;if(!Ft.trim())return void alert("Harap berikan alasan pause!");if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const{empId:t,type:n,taskId:r}=Mt,a=(null===(e=mt.find(e=>e.id===t))||void 0===e?void 0:e.name)||"Unknown";ke("Pause Pekerjaan","".concat(a," - ").concat(Ft)),re(!0),ae.current=!0;const s=new Date,i="".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0"),":").concat(s.getSeconds().toString().padStart(2,"0")),o=mt.map(e=>{if(e.id===t){const t="cleaning"===n?"cleaningTasks":"workTasks";return c(c({},e),{},{[t]:e[t].map(e=>{if(e.id===r){const t=e.pauseHistory||[];return c(c({},e),{},{paused:!0,pauseStartTime:i,pauseHistory:[...t,{startTime:i,endTime:null,reason:Ft}]})}return e})})}return e}),l=o.find(e=>e.id===t);pt(o),dn(t,"task",Ft),ht("\u23f8\ufe0f ".concat(null===l||void 0===l?void 0:l.name," pause task: ").concat(Ft),"warning"),Lt(null),zt(""),Te("Pause Pekerjaan");const u=o.find(e=>e.id===t);u&&await fn(u),Ne("Pause Pekerjaan"),Se("Pause Pekerjaan",a),setTimeout(()=>{re(!1),ae.current=!1},500)},className:"flex-1 px-4 py-2 border-2 border-black ".concat(we.accent," text-white font-bold ").concat(we.accentHover," transition-all ").concat(we.shadow," hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0"),children:"Konfirmasi Pause"})]})]})}),Ut&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"border-2 ".concat(we.borderColor," bg-orange-100 p-3"),children:(0,Wf.jsx)(A,{className:"text-orange-600",size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"PAUSE SEMUA TASK"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Semua task yang sedang berjalan akan di-pause"})]})]}),(0,Wf.jsx)("textarea",{value:Vt,onChange:e=>Ht(e.target.value),placeholder:"Contoh: Istirahat makan siang, Meeting mendadak, dll...",className:"w-full px-4 py-3 border-2 ".concat(we.borderColor," ").concat(we.input," text-sm resize-none font-bold"),rows:4,autoFocus:!0}),(0,Wf.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Wf.jsx)("button",{onClick:()=>{Bt(null),Ht("")},className:"flex-1 px-4 py-2 border-2 ".concat(we.borderColor," bg-white text-black font-bold hover:bg-black hover:text-white transition-all"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:async()=>{var e;if(!Vt.trim())return void alert("Harap berikan alasan pause!");if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");const t=Ut,n=mt.find(e=>e.id===t),r=(null===n||void 0===n?void 0:n.name)||"Unknown",a=(null===n||void 0===n||null===(e=n.workTasks)||void 0===e?void 0:e.filter(e=>e.startTime&&!e.completed&&!e.paused))||[];if(0===a.length)return alert("Tidak ada task yang sedang berjalan untuk di-pause."),Bt(null),void Ht("");ke("Pause Semua Task","".concat(r," - ").concat(Vt," (").concat(a.length," tasks)")),re(!0),ae.current=!0;const s=new Date,i="".concat(s.getHours().toString().padStart(2,"0"),":").concat(s.getMinutes().toString().padStart(2,"0"),":").concat(s.getSeconds().toString().padStart(2,"0")),o=mt.map(e=>e.id===t?c(c({},e),{},{workTasks:e.workTasks.map(e=>{if(e.startTime&&!e.completed&&!e.paused){const t=e.pauseHistory||[];return c(c({},e),{},{paused:!0,pauseStartTime:i,pauseHistory:[...t,{startTime:i,endTime:null,reason:Vt}]})}return e})}):e);pt(o),dn(t,"task","Pause All: ".concat(Vt)),ht("\u23f8\ufe0f ".concat(r," pause ").concat(a.length," task: ").concat(Vt),"warning"),Bt(null),Ht(""),Te("Pause Semua Task");const l=o.find(e=>e.id===t);l&&await fn(l),Ne("Pause Semua Task"),Se("Pause Semua Task","".concat(r," (").concat(a.length," tasks)")),setTimeout(()=>{re(!1),ae.current=!1},500)},disabled:ne,className:"flex-1 px-4 py-2 border-2 ".concat(we.borderColor," bg-orange-500 text-white font-bold transition-all ").concat(we.shadow," ").concat(ne?"opacity-50 cursor-not-allowed":"hover:bg-orange-600 hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0"),children:ne?"Memproses...":"Pause Semua"})]})]})}),it&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," border-2 ").concat(we.borderColor," ").concat(we.shadow," p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"border-2 ".concat(we.borderColor," ").concat(we.accentSoftBg," p-3"),children:(0,Wf.jsx)(g,{className:we.accentText,size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"IZIN"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Berikan alasan izin Anda"})]})]}),(0,Wf.jsx)("textarea",{value:lt,onChange:e=>ct(e.target.value),placeholder:"Contoh: Ke dokter, Urusan keluarga, dll...",className:"w-full px-4 py-3 border-2 ".concat(we.borderColor," ").concat(we.input," text-sm resize-none font-bold"),rows:4,autoFocus:!0}),(0,Wf.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,Wf.jsx)("button",{onClick:()=>{ot(null),ct("")},className:"flex-1 px-4 py-2 border-2 ".concat(we.borderColor," bg-white text-black font-bold hover:bg-black hover:text-white transition-all"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:async()=>{var e;if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");if(!lt.trim())return void alert("Harap berikan alasan izin!");const t=it,n=(null===(e=mt.find(e=>e.id===t))||void 0===e?void 0:e.name)||"Unknown";ke("Izin","".concat(n," - ").concat(lt)),re(!0),ae.current=!0;const r=new Date,a=r.getHours(),s="".concat(a.toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0")),i=mt.map(e=>e.id===t?c(c({},e),{},{izinTime:s,izinReason:lt}):e),o=i.find(e=>e.id===t);pt(i),dn(t,"izin",lt),ht("\ud83d\udccb ".concat(null===o||void 0===o?void 0:o.name," izin: ").concat(lt," (").concat(s,")"),"warning"),ot(null),ct(""),Te("Izin");const l=i.find(e=>e.id===t);l&&await fn(l),Ne("Izin"),Se("Izin",n),re(!1),ae.current=!1},disabled:ne,className:"flex-1 px-4 py-2 border-2 ".concat(we.borderColor," ").concat(we.accent," text-white font-bold transition-all ").concat(we.shadow," ").concat(ne?"opacity-50 cursor-not-allowed":"".concat(we.accentHover," hover:translate-x-1 hover:translate-y-1 active:translate-x-0 active:translate-y-0")),children:ne?"Memproses...":"Konfirmasi Izin"})]})]})}),en&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," rounded-2xl ").concat(we.shadow," border-2 ").concat(we.borderColor," p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"".concat(we.accentSoftBg," p-3 rounded-xl border ").concat(we.borderColor),children:(0,Wf.jsx)(D,{className:we.accentText,size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"Task Break"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Isi progress saat ini sebelum break"})]})]}),(0,Wf.jsxs)("div",{className:"mb-4",children:[(0,Wf.jsxs)("label",{className:"text-sm font-medium ".concat(we.text," mb-2 block"),children:["Progress Saat Ini: ",nn,"%"]}),(0,Wf.jsx)("input",{type:"range",min:"0",max:"100",value:nn,onChange:e=>rn(parseInt(e.target.value)),className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-blue-500"}),(0,Wf.jsxs)("div",{className:"flex justify-between text-xs ".concat(we.subtext," mt-1"),children:[(0,Wf.jsx)("span",{children:"0%"}),(0,Wf.jsx)("span",{children:"50%"}),(0,Wf.jsx)("span",{children:"100%"})]})]}),(0,Wf.jsx)("div",{className:"bg-blue-950/20 border border-blue-500/15 rounded-lg p-3 mb-4",children:(0,Wf.jsx)("p",{className:"text-xs text-blue-200",children:'\u23f8\ufe0f Timer akan berhenti saat break. Klik "Lanjutkan" untuk melanjutkan timer'})}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[(0,Wf.jsx)("button",{onClick:()=>{tn(null),rn(0)},className:"flex-1 px-4 py-2 rounded-lg ".concat(we.badge," hover:bg-white/5 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:async()=>{if(0===nn)return void alert("Harap isi progress sebelum break!");if(ne)return void console.log("\u23f8\ufe0f Action in progress, ignoring double-click");console.log("\u2615 CONFIRM TASK BREAK: progress=".concat(nn,"%")),re(!0),ae.current=!0;const{empId:e,type:t,taskId:n}=en,r=new Date,a="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")),s=mt.map(s=>{if(s.id===e){const e="cleaning"===t?"cleaningTasks":"workTasks";return c(c({},s),{},{[e]:s[e].map(e=>e.id===n?c(c({},e),{},{progress:nn,onTaskBreak:!0,isPaused:!0,taskBreakStartTime:a,taskBreakStartDate:r.toISOString(),pauseHistory:[...e.pauseHistory||[],{startTime:a,endTime:null,reason:"Break - Progress ".concat(nn,"%"),date:r.toISOString(),dateDisplay:r.toLocaleString("id-ID")}]}):e)})}return s}),i=s.find(t=>t.id===e);pt(s),ht("\u2615 ".concat(null===i||void 0===i?void 0:i.name," break task - Progress: ").concat(nn,"%"),"warning"),tn(null),rn(0),Te("Break Task");const o=s.find(t=>t.id===e);o&&await fn(o),Ne("Break Task"),console.log("\u2705 Confirm task break completed"),re(!1),ae.current=!1},className:"flex-1 px-4 py-2 rounded-lg ".concat(we.accent," text-white ").concat(we.accentHover," transition-all text-sm font-medium ").concat(we.shadow," hover:scale-[1.01] active:scale-[0.99]"),children:"Konfirmasi Break"})]})]})}),(0,Wf.jsx)("div",{className:"fixed bottom-24 right-6 z-50 space-y-3 max-w-sm",children:Jt.map(e=>{const t=Date.now(),n=Math.floor((t-e.timestamp)/1e3/60),r={low:{badgeClass:"bg-slate-800/60 text-slate-200 border border-white/10",icon:"\u25cf",label:"Low"},medium:{badgeClass:"bg-blue-900/35 text-blue-200 border border-blue-500/20",icon:"\u25cf\u25cf",label:"Medium"},high:{badgeClass:"bg-blue-800/45 text-blue-100 border border-blue-400/25",icon:"\u25cf\u25cf\u25cf",label:"High"},urgent:{badgeClass:"bg-blue-700/55 text-white border border-blue-300/30",icon:"\ud83d\udd25",label:"URGENT"}},a={wa:{label:"WhatsApp",emoji:"\ud83d\udcac"},tele:{label:"Telegram",emoji:"\u2708\ufe0f"},shopee_media:{label:"Shopee Media",emoji:"\ud83d\uded2"},shopee_acc:{label:"Shopee AccStor",emoji:"\ud83d\udecd\ufe0f"}},s=r[e.priority]||r.medium,i=a[e.platform]||a.wa;return(0,Wf.jsxs)("div",{className:"".concat(we.accent," text-white rounded-2xl ").concat(we.shadow," border ").concat(we.borderColor," p-4 animate-slide-in-right"),children:[(0,Wf.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)("span",{className:"text-2xl",children:"\ud83d\ude80"}),(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsx)("h4",{className:"font-bold text-sm",children:e.username}),(0,Wf.jsx)("p",{className:"text-xs opacity-90",children:"Order Sedang Diproses"})]})]}),(0,Wf.jsx)("div",{className:"bg-white/20 rounded-lg p-2 mb-2",children:(0,Wf.jsx)("p",{className:"text-xs font-medium",children:e.description})}),(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-xs",children:[(0,Wf.jsxs)("span",{className:"bg-white/20 px-2 py-0.5 rounded",children:[i.emoji," ",i.label]}),(0,Wf.jsxs)("span",{className:"px-2 py-0.5 rounded font-bold ".concat(s.badgeClass),children:[s.icon," ",s.label]})]}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Wf.jsxs)("span",{children:["Mulai: ",e.startTime]}),(0,Wf.jsxs)("span",{className:"font-bold",children:[n," menit lalu"]})]})]}),(0,Wf.jsx)("button",{onClick:()=>{return t=e.id,void Xt(e=>e.filter(e=>e.id!==t));var t},className:"bg-white/20 hover:bg-white/30 rounded-full p-1.5 transition-all",children:(0,Wf.jsx)(v,{size:16})})]}),(0,Wf.jsx)("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,Wf.jsx)("p",{className:"text-xs font-semibold text-center animate-pulse",children:"\u26a0\ufe0f Jangan lupa untuk menyelesaikan order ini!"})})]},e.id)})}),(0,Wf.jsx)("div",{className:"fixed bottom-24 right-96 z-50 space-y-3 max-w-sm",children:Qt.map(e=>{const t=Date.now(),n=Math.floor((t-e.timestamp)/1e3/60),r={break:{icon:"\u2615",label:"Istirahat"},izin:{icon:"\ud83d\udccb",label:"Izin"},task:{icon:"\u23f8\ufe0f",label:"Pause Task"}}[e.type];return(0,Wf.jsxs)("div",{className:"".concat(we.accent," text-white rounded-2xl ").concat(we.shadow," border ").concat(we.borderColor," p-4 animate-slide-in-right"),children:[(0,Wf.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Wf.jsxs)("div",{className:"flex-1",children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Wf.jsx)("span",{className:"text-2xl",children:r.icon}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h4",{className:"font-bold text-sm",children:e.empName}),(0,Wf.jsx)("p",{className:"text-xs opacity-90",children:r.label})]})]}),(0,Wf.jsx)("div",{className:"bg-white/20 rounded-lg p-2 mb-2",children:(0,Wf.jsx)("p",{className:"text-xs font-medium",children:e.reason})}),(0,Wf.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Wf.jsxs)("span",{children:["Mulai: ",e.startTime]}),(0,Wf.jsxs)("span",{className:"font-bold",children:[n," menit lalu"]})]})]}),(0,Wf.jsx)("button",{onClick:()=>{return t=e.id,void Yt(e=>e.filter(e=>e.id!==t));var t},className:"bg-white/20 hover:bg-white/30 rounded-full p-1.5 transition-all",children:(0,Wf.jsx)(v,{size:16})})]}),(0,Wf.jsx)("div",{className:"mt-3 pt-3 border-t border-white/20",children:(0,Wf.jsx)("p",{className:"text-xs font-semibold text-center animate-pulse",children:"\u26a0\ufe0f Jangan lupa untuk melanjutkan atau menghentikan waktu!"})})]},e.id)})})]}),an&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," rounded-2xl shadow-2xl border-2 border-blue-500/20 p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"".concat(we.accentSoftBg," p-3 rounded-xl border ").concat(we.borderColor),children:(0,Wf.jsx)(w,{className:we.accentText,size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"\u26a0\ufe0f Clear All Data"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Hapus semua data dari Firebase"})]})]}),(0,Wf.jsxs)("div",{className:"bg-blue-950/20 border border-blue-500/15 rounded-lg p-4 mb-4",children:[(0,Wf.jsx)("p",{className:"text-sm text-blue-200 font-medium mb-2",children:"\u26a0\ufe0f PERINGATAN:"}),(0,Wf.jsxs)("ul",{className:"text-xs text-blue-200/80 space-y-1 list-disc list-inside",children:[(0,Wf.jsx)("li",{children:"Semua data akan dihapus"}),(0,Wf.jsx)("li",{children:"Semua riwayat task akan hilang"}),(0,Wf.jsx)("li",{children:"Semua data kehadiran akan direset"}),(0,Wf.jsx)("li",{children:"Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})]}),(0,Wf.jsxs)("div",{className:"mb-4",children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Masukkan Password untuk Konfirmasi:"}),(0,Wf.jsxs)("div",{className:"relative",children:[(0,Wf.jsx)("input",{type:cn?"text":"password",value:on,onChange:e=>ln(e.target.value),placeholder:"Masukkan password",className:"w-full px-4 py-3 pr-12 rounded-lg border ".concat(we.input," text-sm"),autoFocus:!0,onKeyPress:e=>{"Enter"===e.key&&bn()}}),(0,Wf.jsx)("button",{type:"button",onClick:()=>un(!cn),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",title:cn?"Sembunyikan password":"Lihat password",children:cn?(0,Wf.jsx)(P,{size:18}):(0,Wf.jsx)(R,{size:18})})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[(0,Wf.jsx)("button",{onClick:()=>{sn(!1),ln("")},className:"flex-1 px-4 py-2 rounded-lg ".concat(we.badge," hover:bg-white/5 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:bn,className:"flex-1 px-4 py-2 rounded-lg ".concat(we.accentSoftBg," ").concat(we.accentText," ").concat(we.accentHover," transition-all text-sm font-medium ").concat(we.shadow," border ").concat(we.borderColor," hover:scale-[1.01] active:scale-[0.99]"),children:"\ud83d\uddd1\ufe0f Hapus Semua Data"})]})]})}),U&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," rounded-2xl ").concat(we.shadow," border-2 ").concat(we.borderColor," p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"".concat(we.accentSoftBg," p-3 rounded-xl border ").concat(we.borderColor),children:(0,Wf.jsx)(C,{className:we.accentText,size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"\ud83d\udd10 Admin Login"}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext),children:"Masukkan password admin"})]})]}),(0,Wf.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Email Admin:"}),(0,Wf.jsx)("input",{type:"email",value:V,onChange:e=>H(e.target.value),placeholder:"admin@example.com",className:"w-full px-4 py-3 rounded-lg border ".concat(we.input," text-sm"),autoFocus:!0})]}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Password:"}),(0,Wf.jsx)("input",{type:"password",value:q,onChange:e=>K(e.target.value),placeholder:"Masukkan password",className:"w-full px-4 py-3 rounded-lg border ".concat(we.input," text-sm"),onKeyPress:e=>{"Enter"===e.key&&wn()}})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[(0,Wf.jsx)("button",{onClick:()=>{B(!1),H(""),K("")},className:"flex-1 px-4 py-2 rounded-lg ".concat(we.badge," hover:bg-white/5 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:wn,disabled:W,className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-blue-700 to-blue-500 text-white hover:from-blue-600 hover:to-blue-500 transition-all text-sm font-medium shadow-md ".concat(W?"opacity-50 cursor-not-allowed":"hover:scale-[1.01] active:scale-[0.99]"),children:W?"\u23f3 Loading...":"\ud83d\udd13 Login"})]})]})}),$&&(0,Wf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:(0,Wf.jsxs)("div",{className:"".concat(we.card," rounded-2xl shadow-2xl border-2 border-blue-500/20 p-6 max-w-md w-full mx-4"),children:[(0,Wf.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Wf.jsx)("div",{className:"bg-blue-950/20 p-3 rounded-xl border border-blue-500/15",children:(0,Wf.jsx)(O,{className:"text-blue-300",size:24})}),(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("h3",{className:"text-lg font-bold ".concat(we.text),children:"\ud83d\udcc5 Edit Kalender"}),(0,Wf.jsxs)("p",{className:"text-xs ".concat(we.subtext),children:[$.empName," - ",$.day," ",jf[$.month]," ",$.year||ve]})]})]}),(0,Wf.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Status Kehadiran:"}),(0,Wf.jsxs)("select",{value:$.status,onChange:e=>Z(c(c({},$),{},{status:e.target.value})),className:"w-full px-4 py-3 rounded-lg border ".concat(we.input," text-sm"),children:[(0,Wf.jsx)("option",{value:"belum",children:"Belum Ada Data"}),(0,Wf.jsx)("option",{value:"hadir",children:"\u2705 Hadir"}),!(null!==(e=mt.find(e=>e.name===$.empName))&&void 0!==e&&e.isBackup)&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsx)("option",{value:"telat",children:"\u26a0\ufe0f Telat"}),(0,Wf.jsx)("option",{value:"lembur",children:"\u26a1 Lembur"}),(0,Wf.jsx)("option",{value:"libur",children:"\ud83c\udfd6\ufe0f Libur"})]}),(0,Wf.jsx)("option",{value:"izin",children:"\ud83d\udccb Izin"}),!(null!==(t=mt.find(e=>e.name===$.empName))&&void 0!==t&&t.isBackup)&&(0,Wf.jsxs)(Wf.Fragment,{children:[(0,Wf.jsx)("option",{value:"sakit",children:"\ud83e\udd12 Sakit"}),(0,Wf.jsx)("option",{value:"alpha",children:"\u26d4 Alpha"})]})]})]}),"lembur"===$.status&&(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Status Dasar (Shift Pertama):"}),(0,Wf.jsxs)("select",{value:$.overtimeBaseStatus||"hadir",onChange:e=>Z(c(c({},$),{},{overtimeBaseStatus:e.target.value})),className:"w-full px-4 py-3 rounded-lg border ".concat(we.input," text-sm"),children:[(0,Wf.jsx)("option",{value:"hadir",children:"\u2705 Hadir (Tepat Waktu)"}),(0,Wf.jsx)("option",{value:"telat",children:"\u26a0\ufe0f Telat"})]}),(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext," mt-1"),children:"\ud83d\udca1 Status shift pertama sebelum lembur"})]}),("telat"===$.status||"lembur"===$.status)&&(0,Wf.jsxs)("div",{children:[(0,Wf.jsx)("label",{className:"block text-sm font-medium ".concat(we.text," mb-2"),children:"Jam Telat:"}),(0,Wf.jsx)("input",{type:"number",min:"0",value:$.lateHours,onChange:e=>Z(c(c({},$),{},{lateHours:parseInt(e.target.value)||0})),className:"w-full px-4 py-3 rounded-lg border ".concat(we.input," text-sm"),placeholder:"Masukkan jam telat"}),"lembur"===$.status&&(0,Wf.jsx)("p",{className:"text-xs ".concat(we.subtext," mt-1"),children:"\ud83d\udca1 Total jam telat dari shift 1 + shift 2"})]})]}),(0,Wf.jsxs)("div",{className:"flex gap-3",children:[(0,Wf.jsx)("button",{onClick:()=>Z(null),className:"flex-1 px-4 py-2 rounded-lg ".concat(we.badge," hover:bg-white/5 transition-all text-sm font-medium hover:scale-[1.01] active:scale-[0.99]"),children:"Batal"}),(0,Wf.jsx)("button",{onClick:()=>{if(!$)return;const e={status:$.status,lateHours:$.lateHours||0};"lembur"===$.status&&$.overtimeBaseStatus&&(e.overtimeBaseStatus=$.overtimeBaseStatus),_e(t=>{var n;return c(c({},t),{},{[$.empName]:c(c({},t[$.empName]),{},{[$.month]:c(c({},null===(n=t[$.empName])||void 0===n?void 0:n[$.month]),{},{[$.day]:e})})})}),ht("\u2705 Kalender ".concat($.empName," berhasil diupdate!"),"success"),Z(null)},className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-blue-700 to-blue-500 text-white hover:from-blue-600 hover:to-blue-500 transition-all text-sm font-medium shadow-md hover:scale-[1.01] active:scale-[0.99]",children:"\ud83d\udcbe Simpan"})]})]})}),(ue||me.current>0)&&(0,Wf.jsxs)("div",{className:"fixed inset-0 z-[9999]",children:[(0,Wf.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-md"}),(0,Wf.jsx)("div",{className:"relative h-full w-full flex items-center justify-center p-4",children:(0,Wf.jsx)("div",{className:"".concat(we.card," w-full max-w-md rounded-2xl shadow-2xl border border-white/10 overflow-hidden"),children:(0,Wf.jsx)("div",{className:"p-6",children:(0,Wf.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Wf.jsx)("div",{className:"shrink-0",children:(0,Wf.jsx)("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-blue-600/15 to-blue-900/15 flex items-center justify-center",children:(0,Wf.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500/40 border-t-blue-500 rounded-full animate-spin"})})}),(0,Wf.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Wf.jsx)("h3",{className:"text-base font-semibold ".concat(we.text),children:"Menyimpan perubahan"}),(0,Wf.jsx)("p",{className:"mt-1 text-sm ".concat(we.subtext," truncate"),children:he||"Memproses\u2026"}),(0,Wf.jsx)("div",{className:"mt-4 h-2 rounded-full ".concat(we.badge," overflow-hidden"),children:(0,Wf.jsx)("div",{className:"h-full w-1/3 bg-gradient-to-r from-blue-700 to-blue-500 animate-pulse"})}),(0,Wf.jsx)("p",{className:"mt-4 text-xs ".concat(we.subtext),children:"Mohon tunggu, jangan tutup atau refresh halaman sampai proses selesai."})]})]})})})})]})]})};class pm extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?(0,Wf.jsxs)("div",{style:{padding:"20px",textAlign:"center",fontFamily:"Arial, sans-serif"},children:[(0,Wf.jsx)("h1",{children:"Terjadi kesalahan"}),(0,Wf.jsx)("p",{children:"Silakan refresh halaman atau hubungi administrator."}),(0,Wf.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",marginTop:"10px",cursor:"pointer",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"5px"},children:"Refresh Halaman"})]}):this.props.children}}const gm=pm,vm=document.getElementById("root");if(vm){a.createRoot(vm).render((0,Wf.jsx)(gm,{children:(0,Wf.jsx)(mm,{})}))}else console.error("Root element not found")})();
//# sourceMappingURL=main.30fb3d75.js.map